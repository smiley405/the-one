var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));

// node_modules/howler/dist/howler.js
var require_howler = __commonJS({
  "node_modules/howler/dist/howler.js"(exports) {
    (function() {
      "use strict";
      var HowlerGlobal2 = function() {
        this.init();
      };
      HowlerGlobal2.prototype = {
        /**
         * Initialize the global Howler object.
         * @return {Howler}
         */
        init: function() {
          var self = this || Howler2;
          self._counter = 1e3;
          self._html5AudioPool = [];
          self.html5PoolSize = 10;
          self._codecs = {};
          self._howls = [];
          self._muted = false;
          self._volume = 1;
          self._canPlayEvent = "canplaythrough";
          self._navigator = typeof window !== "undefined" && window.navigator ? window.navigator : null;
          self.masterGain = null;
          self.noAudio = false;
          self.usingWebAudio = true;
          self.autoSuspend = true;
          self.ctx = null;
          self.autoUnlock = true;
          self._setup();
          return self;
        },
        /**
         * Get/set the global volume for all sounds.
         * @param  {Float} vol Volume from 0.0 to 1.0.
         * @return {Howler/Float}     Returns self or current volume.
         */
        volume: function(vol) {
          var self = this || Howler2;
          vol = parseFloat(vol);
          if (!self.ctx) {
            setupAudioContext();
          }
          if (typeof vol !== "undefined" && vol >= 0 && vol <= 1) {
            self._volume = vol;
            if (self._muted) {
              return self;
            }
            if (self.usingWebAudio) {
              self.masterGain.gain.setValueAtTime(vol, Howler2.ctx.currentTime);
            }
            for (var i = 0; i < self._howls.length; i++) {
              if (!self._howls[i]._webAudio) {
                var ids = self._howls[i]._getSoundIds();
                for (var j = 0; j < ids.length; j++) {
                  var sound = self._howls[i]._soundById(ids[j]);
                  if (sound && sound._node) {
                    sound._node.volume = sound._volume * vol;
                  }
                }
              }
            }
            return self;
          }
          return self._volume;
        },
        /**
         * Handle muting and unmuting globally.
         * @param  {Boolean} muted Is muted or not.
         */
        mute: function(muted) {
          var self = this || Howler2;
          if (!self.ctx) {
            setupAudioContext();
          }
          self._muted = muted;
          if (self.usingWebAudio) {
            self.masterGain.gain.setValueAtTime(muted ? 0 : self._volume, Howler2.ctx.currentTime);
          }
          for (var i = 0; i < self._howls.length; i++) {
            if (!self._howls[i]._webAudio) {
              var ids = self._howls[i]._getSoundIds();
              for (var j = 0; j < ids.length; j++) {
                var sound = self._howls[i]._soundById(ids[j]);
                if (sound && sound._node) {
                  sound._node.muted = muted ? true : sound._muted;
                }
              }
            }
          }
          return self;
        },
        /**
         * Handle stopping all sounds globally.
         */
        stop: function() {
          var self = this || Howler2;
          for (var i = 0; i < self._howls.length; i++) {
            self._howls[i].stop();
          }
          return self;
        },
        /**
         * Unload and destroy all currently loaded Howl objects.
         * @return {Howler}
         */
        unload: function() {
          var self = this || Howler2;
          for (var i = self._howls.length - 1; i >= 0; i--) {
            self._howls[i].unload();
          }
          if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== "undefined") {
            self.ctx.close();
            self.ctx = null;
            setupAudioContext();
          }
          return self;
        },
        /**
         * Check for codec support of specific extension.
         * @param  {String} ext Audio file extention.
         * @return {Boolean}
         */
        codecs: function(ext) {
          return (this || Howler2)._codecs[ext.replace(/^x-/, "")];
        },
        /**
         * Setup various state values for global tracking.
         * @return {Howler}
         */
        _setup: function() {
          var self = this || Howler2;
          self.state = self.ctx ? self.ctx.state || "suspended" : "suspended";
          self._autoSuspend();
          if (!self.usingWebAudio) {
            if (typeof Audio !== "undefined") {
              try {
                var test = new Audio();
                if (typeof test.oncanplaythrough === "undefined") {
                  self._canPlayEvent = "canplay";
                }
              } catch (e) {
                self.noAudio = true;
              }
            } else {
              self.noAudio = true;
            }
          }
          try {
            var test = new Audio();
            if (test.muted) {
              self.noAudio = true;
            }
          } catch (e) {
          }
          if (!self.noAudio) {
            self._setupCodecs();
          }
          return self;
        },
        /**
         * Check for browser support for various codecs and cache the results.
         * @return {Howler}
         */
        _setupCodecs: function() {
          var self = this || Howler2;
          var audioTest = null;
          try {
            audioTest = typeof Audio !== "undefined" ? new Audio() : null;
          } catch (err) {
            return self;
          }
          if (!audioTest || typeof audioTest.canPlayType !== "function") {
            return self;
          }
          var mpegTest = audioTest.canPlayType("audio/mpeg;").replace(/^no$/, "");
          var ua = self._navigator ? self._navigator.userAgent : "";
          var checkOpera = ua.match(/OPR\/(\d+)/g);
          var isOldOpera = checkOpera && parseInt(checkOpera[0].split("/")[1], 10) < 33;
          var checkSafari = ua.indexOf("Safari") !== -1 && ua.indexOf("Chrome") === -1;
          var safariVersion = ua.match(/Version\/(.*?) /);
          var isOldSafari = checkSafari && safariVersion && parseInt(safariVersion[1], 10) < 15;
          self._codecs = {
            mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType("audio/mp3;").replace(/^no$/, ""))),
            mpeg: !!mpegTest,
            opus: !!audioTest.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, ""),
            ogg: !!audioTest.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
            oga: !!audioTest.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
            wav: !!(audioTest.canPlayType('audio/wav; codecs="1"') || audioTest.canPlayType("audio/wav")).replace(/^no$/, ""),
            aac: !!audioTest.canPlayType("audio/aac;").replace(/^no$/, ""),
            caf: !!audioTest.canPlayType("audio/x-caf;").replace(/^no$/, ""),
            m4a: !!(audioTest.canPlayType("audio/x-m4a;") || audioTest.canPlayType("audio/m4a;") || audioTest.canPlayType("audio/aac;")).replace(/^no$/, ""),
            m4b: !!(audioTest.canPlayType("audio/x-m4b;") || audioTest.canPlayType("audio/m4b;") || audioTest.canPlayType("audio/aac;")).replace(/^no$/, ""),
            mp4: !!(audioTest.canPlayType("audio/x-mp4;") || audioTest.canPlayType("audio/mp4;") || audioTest.canPlayType("audio/aac;")).replace(/^no$/, ""),
            weba: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "")),
            webm: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "")),
            dolby: !!audioTest.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/, ""),
            flac: !!(audioTest.canPlayType("audio/x-flac;") || audioTest.canPlayType("audio/flac;")).replace(/^no$/, "")
          };
          return self;
        },
        /**
         * Some browsers/devices will only allow audio to be played after a user interaction.
         * Attempt to automatically unlock audio on the first user interaction.
         * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/
         * @return {Howler}
         */
        _unlockAudio: function() {
          var self = this || Howler2;
          if (self._audioUnlocked || !self.ctx) {
            return;
          }
          self._audioUnlocked = false;
          self.autoUnlock = false;
          if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {
            self._mobileUnloaded = true;
            self.unload();
          }
          self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);
          var unlock = function(e) {
            while (self._html5AudioPool.length < self.html5PoolSize) {
              try {
                var audioNode = new Audio();
                audioNode._unlocked = true;
                self._releaseHtml5Audio(audioNode);
              } catch (e2) {
                self.noAudio = true;
                break;
              }
            }
            for (var i = 0; i < self._howls.length; i++) {
              if (!self._howls[i]._webAudio) {
                var ids = self._howls[i]._getSoundIds();
                for (var j = 0; j < ids.length; j++) {
                  var sound = self._howls[i]._soundById(ids[j]);
                  if (sound && sound._node && !sound._node._unlocked) {
                    sound._node._unlocked = true;
                    sound._node.load();
                  }
                }
              }
            }
            self._autoResume();
            var source = self.ctx.createBufferSource();
            source.buffer = self._scratchBuffer;
            source.connect(self.ctx.destination);
            if (typeof source.start === "undefined") {
              source.noteOn(0);
            } else {
              source.start(0);
            }
            if (typeof self.ctx.resume === "function") {
              self.ctx.resume();
            }
            source.onended = function() {
              source.disconnect(0);
              self._audioUnlocked = true;
              document.removeEventListener("touchstart", unlock, true);
              document.removeEventListener("touchend", unlock, true);
              document.removeEventListener("click", unlock, true);
              document.removeEventListener("keydown", unlock, true);
              for (var i2 = 0; i2 < self._howls.length; i2++) {
                self._howls[i2]._emit("unlock");
              }
            };
          };
          document.addEventListener("touchstart", unlock, true);
          document.addEventListener("touchend", unlock, true);
          document.addEventListener("click", unlock, true);
          document.addEventListener("keydown", unlock, true);
          return self;
        },
        /**
         * Get an unlocked HTML5 Audio object from the pool. If none are left,
         * return a new Audio object and throw a warning.
         * @return {Audio} HTML5 Audio object.
         */
        _obtainHtml5Audio: function() {
          var self = this || Howler2;
          if (self._html5AudioPool.length) {
            return self._html5AudioPool.pop();
          }
          var testPlay = new Audio().play();
          if (testPlay && typeof Promise !== "undefined" && (testPlay instanceof Promise || typeof testPlay.then === "function")) {
            testPlay.catch(function() {
              console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.");
            });
          }
          return new Audio();
        },
        /**
         * Return an activated HTML5 Audio object to the pool.
         * @return {Howler}
         */
        _releaseHtml5Audio: function(audio) {
          var self = this || Howler2;
          if (audio._unlocked) {
            self._html5AudioPool.push(audio);
          }
          return self;
        },
        /**
         * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.
         * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.
         * @return {Howler}
         */
        _autoSuspend: function() {
          var self = this;
          if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === "undefined" || !Howler2.usingWebAudio) {
            return;
          }
          for (var i = 0; i < self._howls.length; i++) {
            if (self._howls[i]._webAudio) {
              for (var j = 0; j < self._howls[i]._sounds.length; j++) {
                if (!self._howls[i]._sounds[j]._paused) {
                  return self;
                }
              }
            }
          }
          if (self._suspendTimer) {
            clearTimeout(self._suspendTimer);
          }
          self._suspendTimer = setTimeout(function() {
            if (!self.autoSuspend) {
              return;
            }
            self._suspendTimer = null;
            self.state = "suspending";
            var handleSuspension = function() {
              self.state = "suspended";
              if (self._resumeAfterSuspend) {
                delete self._resumeAfterSuspend;
                self._autoResume();
              }
            };
            self.ctx.suspend().then(handleSuspension, handleSuspension);
          }, 3e4);
          return self;
        },
        /**
         * Automatically resume the Web Audio AudioContext when a new sound is played.
         * @return {Howler}
         */
        _autoResume: function() {
          var self = this;
          if (!self.ctx || typeof self.ctx.resume === "undefined" || !Howler2.usingWebAudio) {
            return;
          }
          if (self.state === "running" && self.ctx.state !== "interrupted" && self._suspendTimer) {
            clearTimeout(self._suspendTimer);
            self._suspendTimer = null;
          } else if (self.state === "suspended" || self.state === "running" && self.ctx.state === "interrupted") {
            self.ctx.resume().then(function() {
              self.state = "running";
              for (var i = 0; i < self._howls.length; i++) {
                self._howls[i]._emit("resume");
              }
            });
            if (self._suspendTimer) {
              clearTimeout(self._suspendTimer);
              self._suspendTimer = null;
            }
          } else if (self.state === "suspending") {
            self._resumeAfterSuspend = true;
          }
          return self;
        }
      };
      var Howler2 = new HowlerGlobal2();
      var Howl3 = function(o) {
        var self = this;
        if (!o.src || o.src.length === 0) {
          console.error("An array of source files must be passed with any new Howl.");
          return;
        }
        self.init(o);
      };
      Howl3.prototype = {
        /**
         * Initialize a new Howl group object.
         * @param  {Object} o Passed in properties for this group.
         * @return {Howl}
         */
        init: function(o) {
          var self = this;
          if (!Howler2.ctx) {
            setupAudioContext();
          }
          self._autoplay = o.autoplay || false;
          self._format = typeof o.format !== "string" ? o.format : [o.format];
          self._html5 = o.html5 || false;
          self._muted = o.mute || false;
          self._loop = o.loop || false;
          self._pool = o.pool || 5;
          self._preload = typeof o.preload === "boolean" || o.preload === "metadata" ? o.preload : true;
          self._rate = o.rate || 1;
          self._sprite = o.sprite || {};
          self._src = typeof o.src !== "string" ? o.src : [o.src];
          self._volume = o.volume !== void 0 ? o.volume : 1;
          self._xhr = {
            method: o.xhr && o.xhr.method ? o.xhr.method : "GET",
            headers: o.xhr && o.xhr.headers ? o.xhr.headers : null,
            withCredentials: o.xhr && o.xhr.withCredentials ? o.xhr.withCredentials : false
          };
          self._duration = 0;
          self._state = "unloaded";
          self._sounds = [];
          self._endTimers = {};
          self._queue = [];
          self._playLock = false;
          self._onend = o.onend ? [{ fn: o.onend }] : [];
          self._onfade = o.onfade ? [{ fn: o.onfade }] : [];
          self._onload = o.onload ? [{ fn: o.onload }] : [];
          self._onloaderror = o.onloaderror ? [{ fn: o.onloaderror }] : [];
          self._onplayerror = o.onplayerror ? [{ fn: o.onplayerror }] : [];
          self._onpause = o.onpause ? [{ fn: o.onpause }] : [];
          self._onplay = o.onplay ? [{ fn: o.onplay }] : [];
          self._onstop = o.onstop ? [{ fn: o.onstop }] : [];
          self._onmute = o.onmute ? [{ fn: o.onmute }] : [];
          self._onvolume = o.onvolume ? [{ fn: o.onvolume }] : [];
          self._onrate = o.onrate ? [{ fn: o.onrate }] : [];
          self._onseek = o.onseek ? [{ fn: o.onseek }] : [];
          self._onunlock = o.onunlock ? [{ fn: o.onunlock }] : [];
          self._onresume = [];
          self._webAudio = Howler2.usingWebAudio && !self._html5;
          if (typeof Howler2.ctx !== "undefined" && Howler2.ctx && Howler2.autoUnlock) {
            Howler2._unlockAudio();
          }
          Howler2._howls.push(self);
          if (self._autoplay) {
            self._queue.push({
              event: "play",
              action: function() {
                self.play();
              }
            });
          }
          if (self._preload && self._preload !== "none") {
            self.load();
          }
          return self;
        },
        /**
         * Load the audio file.
         * @return {Howler}
         */
        load: function() {
          var self = this;
          var url = null;
          if (Howler2.noAudio) {
            self._emit("loaderror", null, "No audio support.");
            return;
          }
          if (typeof self._src === "string") {
            self._src = [self._src];
          }
          for (var i = 0; i < self._src.length; i++) {
            var ext, str;
            if (self._format && self._format[i]) {
              ext = self._format[i];
            } else {
              str = self._src[i];
              if (typeof str !== "string") {
                self._emit("loaderror", null, "Non-string found in selected audio sources - ignoring.");
                continue;
              }
              ext = /^data:audio\/([^;,]+);/i.exec(str);
              if (!ext) {
                ext = /\.([^.]+)$/.exec(str.split("?", 1)[0]);
              }
              if (ext) {
                ext = ext[1].toLowerCase();
              }
            }
            if (!ext) {
              console.warn('No file extension was found. Consider using the "format" property or specify an extension.');
            }
            if (ext && Howler2.codecs(ext)) {
              url = self._src[i];
              break;
            }
          }
          if (!url) {
            self._emit("loaderror", null, "No codec support for selected audio sources.");
            return;
          }
          self._src = url;
          self._state = "loading";
          if (window.location.protocol === "https:" && url.slice(0, 5) === "http:") {
            self._html5 = true;
            self._webAudio = false;
          }
          new Sound2(self);
          if (self._webAudio) {
            loadBuffer(self);
          }
          return self;
        },
        /**
         * Play a sound or resume previous playback.
         * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.
         * @param  {Boolean} internal Internal Use: true prevents event firing.
         * @return {Number}          Sound ID.
         */
        play: function(sprite, internal) {
          var self = this;
          var id = null;
          if (typeof sprite === "number") {
            id = sprite;
            sprite = null;
          } else if (typeof sprite === "string" && self._state === "loaded" && !self._sprite[sprite]) {
            return null;
          } else if (typeof sprite === "undefined") {
            sprite = "__default";
            if (!self._playLock) {
              var num = 0;
              for (var i = 0; i < self._sounds.length; i++) {
                if (self._sounds[i]._paused && !self._sounds[i]._ended) {
                  num++;
                  id = self._sounds[i]._id;
                }
              }
              if (num === 1) {
                sprite = null;
              } else {
                id = null;
              }
            }
          }
          var sound = id ? self._soundById(id) : self._inactiveSound();
          if (!sound) {
            return null;
          }
          if (id && !sprite) {
            sprite = sound._sprite || "__default";
          }
          if (self._state !== "loaded") {
            sound._sprite = sprite;
            sound._ended = false;
            var soundId = sound._id;
            self._queue.push({
              event: "play",
              action: function() {
                self.play(soundId);
              }
            });
            return soundId;
          }
          if (id && !sound._paused) {
            if (!internal) {
              self._loadQueue("play");
            }
            return sound._id;
          }
          if (self._webAudio) {
            Howler2._autoResume();
          }
          var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1e3);
          var duration = Math.max(0, (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1e3 - seek);
          var timeout = duration * 1e3 / Math.abs(sound._rate);
          var start = self._sprite[sprite][0] / 1e3;
          var stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1e3;
          sound._sprite = sprite;
          sound._ended = false;
          var setParams = function() {
            sound._paused = false;
            sound._seek = seek;
            sound._start = start;
            sound._stop = stop;
            sound._loop = !!(sound._loop || self._sprite[sprite][2]);
          };
          if (seek >= stop) {
            self._ended(sound);
            return;
          }
          var node = sound._node;
          if (self._webAudio) {
            var playWebAudio = function() {
              self._playLock = false;
              setParams();
              self._refreshBuffer(sound);
              var vol = sound._muted || self._muted ? 0 : sound._volume;
              node.gain.setValueAtTime(vol, Howler2.ctx.currentTime);
              sound._playStart = Howler2.ctx.currentTime;
              if (typeof node.bufferSource.start === "undefined") {
                sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);
              } else {
                sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);
              }
              if (timeout !== Infinity) {
                self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);
              }
              if (!internal) {
                setTimeout(function() {
                  self._emit("play", sound._id);
                  self._loadQueue();
                }, 0);
              }
            };
            if (Howler2.state === "running" && Howler2.ctx.state !== "interrupted") {
              playWebAudio();
            } else {
              self._playLock = true;
              self.once("resume", playWebAudio);
              self._clearTimer(sound._id);
            }
          } else {
            var playHtml5 = function() {
              node.currentTime = seek;
              node.muted = sound._muted || self._muted || Howler2._muted || node.muted;
              node.volume = sound._volume * Howler2.volume();
              node.playbackRate = sound._rate;
              try {
                var play = node.play();
                if (play && typeof Promise !== "undefined" && (play instanceof Promise || typeof play.then === "function")) {
                  self._playLock = true;
                  setParams();
                  play.then(function() {
                    self._playLock = false;
                    node._unlocked = true;
                    if (!internal) {
                      self._emit("play", sound._id);
                    } else {
                      self._loadQueue();
                    }
                  }).catch(function() {
                    self._playLock = false;
                    self._emit("playerror", sound._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
                    sound._ended = true;
                    sound._paused = true;
                  });
                } else if (!internal) {
                  self._playLock = false;
                  setParams();
                  self._emit("play", sound._id);
                }
                node.playbackRate = sound._rate;
                if (node.paused) {
                  self._emit("playerror", sound._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
                  return;
                }
                if (sprite !== "__default" || sound._loop) {
                  self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);
                } else {
                  self._endTimers[sound._id] = function() {
                    self._ended(sound);
                    node.removeEventListener("ended", self._endTimers[sound._id], false);
                  };
                  node.addEventListener("ended", self._endTimers[sound._id], false);
                }
              } catch (err) {
                self._emit("playerror", sound._id, err);
              }
            };
            if (node.src === "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA") {
              node.src = self._src;
              node.load();
            }
            var loadedNoReadyState = window && window.ejecta || !node.readyState && Howler2._navigator.isCocoonJS;
            if (node.readyState >= 3 || loadedNoReadyState) {
              playHtml5();
            } else {
              self._playLock = true;
              self._state = "loading";
              var listener = function() {
                self._state = "loaded";
                playHtml5();
                node.removeEventListener(Howler2._canPlayEvent, listener, false);
              };
              node.addEventListener(Howler2._canPlayEvent, listener, false);
              self._clearTimer(sound._id);
            }
          }
          return sound._id;
        },
        /**
         * Pause playback and save current position.
         * @param  {Number} id The sound ID (empty to pause all in group).
         * @return {Howl}
         */
        pause: function(id) {
          var self = this;
          if (self._state !== "loaded" || self._playLock) {
            self._queue.push({
              event: "pause",
              action: function() {
                self.pause(id);
              }
            });
            return self;
          }
          var ids = self._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            self._clearTimer(ids[i]);
            var sound = self._soundById(ids[i]);
            if (sound && !sound._paused) {
              sound._seek = self.seek(ids[i]);
              sound._rateSeek = 0;
              sound._paused = true;
              self._stopFade(ids[i]);
              if (sound._node) {
                if (self._webAudio) {
                  if (!sound._node.bufferSource) {
                    continue;
                  }
                  if (typeof sound._node.bufferSource.stop === "undefined") {
                    sound._node.bufferSource.noteOff(0);
                  } else {
                    sound._node.bufferSource.stop(0);
                  }
                  self._cleanBuffer(sound._node);
                } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {
                  sound._node.pause();
                }
              }
            }
            if (!arguments[1]) {
              self._emit("pause", sound ? sound._id : null);
            }
          }
          return self;
        },
        /**
         * Stop playback and reset to start.
         * @param  {Number} id The sound ID (empty to stop all in group).
         * @param  {Boolean} internal Internal Use: true prevents event firing.
         * @return {Howl}
         */
        stop: function(id, internal) {
          var self = this;
          if (self._state !== "loaded" || self._playLock) {
            self._queue.push({
              event: "stop",
              action: function() {
                self.stop(id);
              }
            });
            return self;
          }
          var ids = self._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            self._clearTimer(ids[i]);
            var sound = self._soundById(ids[i]);
            if (sound) {
              sound._seek = sound._start || 0;
              sound._rateSeek = 0;
              sound._paused = true;
              sound._ended = true;
              self._stopFade(ids[i]);
              if (sound._node) {
                if (self._webAudio) {
                  if (sound._node.bufferSource) {
                    if (typeof sound._node.bufferSource.stop === "undefined") {
                      sound._node.bufferSource.noteOff(0);
                    } else {
                      sound._node.bufferSource.stop(0);
                    }
                    self._cleanBuffer(sound._node);
                  }
                } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {
                  sound._node.currentTime = sound._start || 0;
                  sound._node.pause();
                  if (sound._node.duration === Infinity) {
                    self._clearSound(sound._node);
                  }
                }
              }
              if (!internal) {
                self._emit("stop", sound._id);
              }
            }
          }
          return self;
        },
        /**
         * Mute/unmute a single sound or all sounds in this Howl group.
         * @param  {Boolean} muted Set to true to mute and false to unmute.
         * @param  {Number} id    The sound ID to update (omit to mute/unmute all).
         * @return {Howl}
         */
        mute: function(muted, id) {
          var self = this;
          if (self._state !== "loaded" || self._playLock) {
            self._queue.push({
              event: "mute",
              action: function() {
                self.mute(muted, id);
              }
            });
            return self;
          }
          if (typeof id === "undefined") {
            if (typeof muted === "boolean") {
              self._muted = muted;
            } else {
              return self._muted;
            }
          }
          var ids = self._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            var sound = self._soundById(ids[i]);
            if (sound) {
              sound._muted = muted;
              if (sound._interval) {
                self._stopFade(sound._id);
              }
              if (self._webAudio && sound._node) {
                sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler2.ctx.currentTime);
              } else if (sound._node) {
                sound._node.muted = Howler2._muted ? true : muted;
              }
              self._emit("mute", sound._id);
            }
          }
          return self;
        },
        /**
         * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.
         *   volume() -> Returns the group's volume value.
         *   volume(id) -> Returns the sound id's current volume.
         *   volume(vol) -> Sets the volume of all sounds in this Howl group.
         *   volume(vol, id) -> Sets the volume of passed sound id.
         * @return {Howl/Number} Returns self or current volume.
         */
        volume: function() {
          var self = this;
          var args = arguments;
          var vol, id;
          if (args.length === 0) {
            return self._volume;
          } else if (args.length === 1 || args.length === 2 && typeof args[1] === "undefined") {
            var ids = self._getSoundIds();
            var index = ids.indexOf(args[0]);
            if (index >= 0) {
              id = parseInt(args[0], 10);
            } else {
              vol = parseFloat(args[0]);
            }
          } else if (args.length >= 2) {
            vol = parseFloat(args[0]);
            id = parseInt(args[1], 10);
          }
          var sound;
          if (typeof vol !== "undefined" && vol >= 0 && vol <= 1) {
            if (self._state !== "loaded" || self._playLock) {
              self._queue.push({
                event: "volume",
                action: function() {
                  self.volume.apply(self, args);
                }
              });
              return self;
            }
            if (typeof id === "undefined") {
              self._volume = vol;
            }
            id = self._getSoundIds(id);
            for (var i = 0; i < id.length; i++) {
              sound = self._soundById(id[i]);
              if (sound) {
                sound._volume = vol;
                if (!args[2]) {
                  self._stopFade(id[i]);
                }
                if (self._webAudio && sound._node && !sound._muted) {
                  sound._node.gain.setValueAtTime(vol, Howler2.ctx.currentTime);
                } else if (sound._node && !sound._muted) {
                  sound._node.volume = vol * Howler2.volume();
                }
                self._emit("volume", sound._id);
              }
            }
          } else {
            sound = id ? self._soundById(id) : self._sounds[0];
            return sound ? sound._volume : 0;
          }
          return self;
        },
        /**
         * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).
         * @param  {Number} from The value to fade from (0.0 to 1.0).
         * @param  {Number} to   The volume to fade to (0.0 to 1.0).
         * @param  {Number} len  Time in milliseconds to fade.
         * @param  {Number} id   The sound id (omit to fade all sounds).
         * @return {Howl}
         */
        fade: function(from, to, len, id) {
          var self = this;
          if (self._state !== "loaded" || self._playLock) {
            self._queue.push({
              event: "fade",
              action: function() {
                self.fade(from, to, len, id);
              }
            });
            return self;
          }
          from = Math.min(Math.max(0, parseFloat(from)), 1);
          to = Math.min(Math.max(0, parseFloat(to)), 1);
          len = parseFloat(len);
          self.volume(from, id);
          var ids = self._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            var sound = self._soundById(ids[i]);
            if (sound) {
              if (!id) {
                self._stopFade(ids[i]);
              }
              if (self._webAudio && !sound._muted) {
                var currentTime = Howler2.ctx.currentTime;
                var end = currentTime + len / 1e3;
                sound._volume = from;
                sound._node.gain.setValueAtTime(from, currentTime);
                sound._node.gain.linearRampToValueAtTime(to, end);
              }
              self._startFadeInterval(sound, from, to, len, ids[i], typeof id === "undefined");
            }
          }
          return self;
        },
        /**
         * Starts the internal interval to fade a sound.
         * @param  {Object} sound Reference to sound to fade.
         * @param  {Number} from The value to fade from (0.0 to 1.0).
         * @param  {Number} to   The volume to fade to (0.0 to 1.0).
         * @param  {Number} len  Time in milliseconds to fade.
         * @param  {Number} id   The sound id to fade.
         * @param  {Boolean} isGroup   If true, set the volume on the group.
         */
        _startFadeInterval: function(sound, from, to, len, id, isGroup) {
          var self = this;
          var vol = from;
          var diff = to - from;
          var steps = Math.abs(diff / 0.01);
          var stepLen = Math.max(4, steps > 0 ? len / steps : len);
          var lastTick = Date.now();
          sound._fadeTo = to;
          sound._interval = setInterval(function() {
            var tick = (Date.now() - lastTick) / len;
            lastTick = Date.now();
            vol += diff * tick;
            vol = Math.round(vol * 100) / 100;
            if (diff < 0) {
              vol = Math.max(to, vol);
            } else {
              vol = Math.min(to, vol);
            }
            if (self._webAudio) {
              sound._volume = vol;
            } else {
              self.volume(vol, sound._id, true);
            }
            if (isGroup) {
              self._volume = vol;
            }
            if (to < from && vol <= to || to > from && vol >= to) {
              clearInterval(sound._interval);
              sound._interval = null;
              sound._fadeTo = null;
              self.volume(to, sound._id);
              self._emit("fade", sound._id);
            }
          }, stepLen);
        },
        /**
         * Internal method that stops the currently playing fade when
         * a new fade starts, volume is changed or the sound is stopped.
         * @param  {Number} id The sound id.
         * @return {Howl}
         */
        _stopFade: function(id) {
          var self = this;
          var sound = self._soundById(id);
          if (sound && sound._interval) {
            if (self._webAudio) {
              sound._node.gain.cancelScheduledValues(Howler2.ctx.currentTime);
            }
            clearInterval(sound._interval);
            sound._interval = null;
            self.volume(sound._fadeTo, id);
            sound._fadeTo = null;
            self._emit("fade", id);
          }
          return self;
        },
        /**
         * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.
         *   loop() -> Returns the group's loop value.
         *   loop(id) -> Returns the sound id's loop value.
         *   loop(loop) -> Sets the loop value for all sounds in this Howl group.
         *   loop(loop, id) -> Sets the loop value of passed sound id.
         * @return {Howl/Boolean} Returns self or current loop value.
         */
        loop: function() {
          var self = this;
          var args = arguments;
          var loop, id, sound;
          if (args.length === 0) {
            return self._loop;
          } else if (args.length === 1) {
            if (typeof args[0] === "boolean") {
              loop = args[0];
              self._loop = loop;
            } else {
              sound = self._soundById(parseInt(args[0], 10));
              return sound ? sound._loop : false;
            }
          } else if (args.length === 2) {
            loop = args[0];
            id = parseInt(args[1], 10);
          }
          var ids = self._getSoundIds(id);
          for (var i = 0; i < ids.length; i++) {
            sound = self._soundById(ids[i]);
            if (sound) {
              sound._loop = loop;
              if (self._webAudio && sound._node && sound._node.bufferSource) {
                sound._node.bufferSource.loop = loop;
                if (loop) {
                  sound._node.bufferSource.loopStart = sound._start || 0;
                  sound._node.bufferSource.loopEnd = sound._stop;
                  if (self.playing(ids[i])) {
                    self.pause(ids[i], true);
                    self.play(ids[i], true);
                  }
                }
              }
            }
          }
          return self;
        },
        /**
         * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.
         *   rate() -> Returns the first sound node's current playback rate.
         *   rate(id) -> Returns the sound id's current playback rate.
         *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.
         *   rate(rate, id) -> Sets the playback rate of passed sound id.
         * @return {Howl/Number} Returns self or the current playback rate.
         */
        rate: function() {
          var self = this;
          var args = arguments;
          var rate, id;
          if (args.length === 0) {
            id = self._sounds[0]._id;
          } else if (args.length === 1) {
            var ids = self._getSoundIds();
            var index = ids.indexOf(args[0]);
            if (index >= 0) {
              id = parseInt(args[0], 10);
            } else {
              rate = parseFloat(args[0]);
            }
          } else if (args.length === 2) {
            rate = parseFloat(args[0]);
            id = parseInt(args[1], 10);
          }
          var sound;
          if (typeof rate === "number") {
            if (self._state !== "loaded" || self._playLock) {
              self._queue.push({
                event: "rate",
                action: function() {
                  self.rate.apply(self, args);
                }
              });
              return self;
            }
            if (typeof id === "undefined") {
              self._rate = rate;
            }
            id = self._getSoundIds(id);
            for (var i = 0; i < id.length; i++) {
              sound = self._soundById(id[i]);
              if (sound) {
                if (self.playing(id[i])) {
                  sound._rateSeek = self.seek(id[i]);
                  sound._playStart = self._webAudio ? Howler2.ctx.currentTime : sound._playStart;
                }
                sound._rate = rate;
                if (self._webAudio && sound._node && sound._node.bufferSource) {
                  sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler2.ctx.currentTime);
                } else if (sound._node) {
                  sound._node.playbackRate = rate;
                }
                var seek = self.seek(id[i]);
                var duration = (self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1e3 - seek;
                var timeout = duration * 1e3 / Math.abs(sound._rate);
                if (self._endTimers[id[i]] || !sound._paused) {
                  self._clearTimer(id[i]);
                  self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);
                }
                self._emit("rate", sound._id);
              }
            }
          } else {
            sound = self._soundById(id);
            return sound ? sound._rate : self._rate;
          }
          return self;
        },
        /**
         * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.
         *   seek() -> Returns the first sound node's current seek position.
         *   seek(id) -> Returns the sound id's current seek position.
         *   seek(seek) -> Sets the seek position of the first sound node.
         *   seek(seek, id) -> Sets the seek position of passed sound id.
         * @return {Howl/Number} Returns self or the current seek position.
         */
        seek: function() {
          var self = this;
          var args = arguments;
          var seek, id;
          if (args.length === 0) {
            if (self._sounds.length) {
              id = self._sounds[0]._id;
            }
          } else if (args.length === 1) {
            var ids = self._getSoundIds();
            var index = ids.indexOf(args[0]);
            if (index >= 0) {
              id = parseInt(args[0], 10);
            } else if (self._sounds.length) {
              id = self._sounds[0]._id;
              seek = parseFloat(args[0]);
            }
          } else if (args.length === 2) {
            seek = parseFloat(args[0]);
            id = parseInt(args[1], 10);
          }
          if (typeof id === "undefined") {
            return 0;
          }
          if (typeof seek === "number" && (self._state !== "loaded" || self._playLock)) {
            self._queue.push({
              event: "seek",
              action: function() {
                self.seek.apply(self, args);
              }
            });
            return self;
          }
          var sound = self._soundById(id);
          if (sound) {
            if (typeof seek === "number" && seek >= 0) {
              var playing = self.playing(id);
              if (playing) {
                self.pause(id, true);
              }
              sound._seek = seek;
              sound._ended = false;
              self._clearTimer(id);
              if (!self._webAudio && sound._node && !isNaN(sound._node.duration)) {
                sound._node.currentTime = seek;
              }
              var seekAndEmit = function() {
                if (playing) {
                  self.play(id, true);
                }
                self._emit("seek", id);
              };
              if (playing && !self._webAudio) {
                var emitSeek = function() {
                  if (!self._playLock) {
                    seekAndEmit();
                  } else {
                    setTimeout(emitSeek, 0);
                  }
                };
                setTimeout(emitSeek, 0);
              } else {
                seekAndEmit();
              }
            } else {
              if (self._webAudio) {
                var realTime = self.playing(id) ? Howler2.ctx.currentTime - sound._playStart : 0;
                var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;
                return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));
              } else {
                return sound._node.currentTime;
              }
            }
          }
          return self;
        },
        /**
         * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.
         * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.
         * @return {Boolean} True if playing and false if not.
         */
        playing: function(id) {
          var self = this;
          if (typeof id === "number") {
            var sound = self._soundById(id);
            return sound ? !sound._paused : false;
          }
          for (var i = 0; i < self._sounds.length; i++) {
            if (!self._sounds[i]._paused) {
              return true;
            }
          }
          return false;
        },
        /**
         * Get the duration of this sound. Passing a sound id will return the sprite duration.
         * @param  {Number} id The sound id to check. If none is passed, return full source duration.
         * @return {Number} Audio duration in seconds.
         */
        duration: function(id) {
          var self = this;
          var duration = self._duration;
          var sound = self._soundById(id);
          if (sound) {
            duration = self._sprite[sound._sprite][1] / 1e3;
          }
          return duration;
        },
        /**
         * Returns the current loaded state of this Howl.
         * @return {String} 'unloaded', 'loading', 'loaded'
         */
        state: function() {
          return this._state;
        },
        /**
         * Unload and destroy the current Howl object.
         * This will immediately stop all sound instances attached to this group.
         */
        unload: function() {
          var self = this;
          var sounds = self._sounds;
          for (var i = 0; i < sounds.length; i++) {
            if (!sounds[i]._paused) {
              self.stop(sounds[i]._id);
            }
            if (!self._webAudio) {
              self._clearSound(sounds[i]._node);
              sounds[i]._node.removeEventListener("error", sounds[i]._errorFn, false);
              sounds[i]._node.removeEventListener(Howler2._canPlayEvent, sounds[i]._loadFn, false);
              sounds[i]._node.removeEventListener("ended", sounds[i]._endFn, false);
              Howler2._releaseHtml5Audio(sounds[i]._node);
            }
            delete sounds[i]._node;
            self._clearTimer(sounds[i]._id);
          }
          var index = Howler2._howls.indexOf(self);
          if (index >= 0) {
            Howler2._howls.splice(index, 1);
          }
          var remCache = true;
          for (i = 0; i < Howler2._howls.length; i++) {
            if (Howler2._howls[i]._src === self._src || self._src.indexOf(Howler2._howls[i]._src) >= 0) {
              remCache = false;
              break;
            }
          }
          if (cache && remCache) {
            delete cache[self._src];
          }
          Howler2.noAudio = false;
          self._state = "unloaded";
          self._sounds = [];
          self = null;
          return null;
        },
        /**
         * Listen to a custom event.
         * @param  {String}   event Event name.
         * @param  {Function} fn    Listener to call.
         * @param  {Number}   id    (optional) Only listen to events for this sound.
         * @param  {Number}   once  (INTERNAL) Marks event to fire only once.
         * @return {Howl}
         */
        on: function(event, fn, id, once) {
          var self = this;
          var events = self["_on" + event];
          if (typeof fn === "function") {
            events.push(once ? { id, fn, once } : { id, fn });
          }
          return self;
        },
        /**
         * Remove a custom event. Call without parameters to remove all events.
         * @param  {String}   event Event name.
         * @param  {Function} fn    Listener to remove. Leave empty to remove all.
         * @param  {Number}   id    (optional) Only remove events for this sound.
         * @return {Howl}
         */
        off: function(event, fn, id) {
          var self = this;
          var events = self["_on" + event];
          var i = 0;
          if (typeof fn === "number") {
            id = fn;
            fn = null;
          }
          if (fn || id) {
            for (i = 0; i < events.length; i++) {
              var isId = id === events[i].id;
              if (fn === events[i].fn && isId || !fn && isId) {
                events.splice(i, 1);
                break;
              }
            }
          } else if (event) {
            self["_on" + event] = [];
          } else {
            var keys = Object.keys(self);
            for (i = 0; i < keys.length; i++) {
              if (keys[i].indexOf("_on") === 0 && Array.isArray(self[keys[i]])) {
                self[keys[i]] = [];
              }
            }
          }
          return self;
        },
        /**
         * Listen to a custom event and remove it once fired.
         * @param  {String}   event Event name.
         * @param  {Function} fn    Listener to call.
         * @param  {Number}   id    (optional) Only listen to events for this sound.
         * @return {Howl}
         */
        once: function(event, fn, id) {
          var self = this;
          self.on(event, fn, id, 1);
          return self;
        },
        /**
         * Emit all events of a specific type and pass the sound id.
         * @param  {String} event Event name.
         * @param  {Number} id    Sound ID.
         * @param  {Number} msg   Message to go with event.
         * @return {Howl}
         */
        _emit: function(event, id, msg) {
          var self = this;
          var events = self["_on" + event];
          for (var i = events.length - 1; i >= 0; i--) {
            if (!events[i].id || events[i].id === id || event === "load") {
              setTimeout(function(fn) {
                fn.call(this, id, msg);
              }.bind(self, events[i].fn), 0);
              if (events[i].once) {
                self.off(event, events[i].fn, events[i].id);
              }
            }
          }
          self._loadQueue(event);
          return self;
        },
        /**
         * Queue of actions initiated before the sound has loaded.
         * These will be called in sequence, with the next only firing
         * after the previous has finished executing (even if async like play).
         * @return {Howl}
         */
        _loadQueue: function(event) {
          var self = this;
          if (self._queue.length > 0) {
            var task = self._queue[0];
            if (task.event === event) {
              self._queue.shift();
              self._loadQueue();
            }
            if (!event) {
              task.action();
            }
          }
          return self;
        },
        /**
         * Fired when playback ends at the end of the duration.
         * @param  {Sound} sound The sound object to work with.
         * @return {Howl}
         */
        _ended: function(sound) {
          var self = this;
          var sprite = sound._sprite;
          if (!self._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {
            setTimeout(self._ended.bind(self, sound), 100);
            return self;
          }
          var loop = !!(sound._loop || self._sprite[sprite][2]);
          self._emit("end", sound._id);
          if (!self._webAudio && loop) {
            self.stop(sound._id, true).play(sound._id);
          }
          if (self._webAudio && loop) {
            self._emit("play", sound._id);
            sound._seek = sound._start || 0;
            sound._rateSeek = 0;
            sound._playStart = Howler2.ctx.currentTime;
            var timeout = (sound._stop - sound._start) * 1e3 / Math.abs(sound._rate);
            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);
          }
          if (self._webAudio && !loop) {
            sound._paused = true;
            sound._ended = true;
            sound._seek = sound._start || 0;
            sound._rateSeek = 0;
            self._clearTimer(sound._id);
            self._cleanBuffer(sound._node);
            Howler2._autoSuspend();
          }
          if (!self._webAudio && !loop) {
            self.stop(sound._id, true);
          }
          return self;
        },
        /**
         * Clear the end timer for a sound playback.
         * @param  {Number} id The sound ID.
         * @return {Howl}
         */
        _clearTimer: function(id) {
          var self = this;
          if (self._endTimers[id]) {
            if (typeof self._endTimers[id] !== "function") {
              clearTimeout(self._endTimers[id]);
            } else {
              var sound = self._soundById(id);
              if (sound && sound._node) {
                sound._node.removeEventListener("ended", self._endTimers[id], false);
              }
            }
            delete self._endTimers[id];
          }
          return self;
        },
        /**
         * Return the sound identified by this ID, or return null.
         * @param  {Number} id Sound ID
         * @return {Object}    Sound object or null.
         */
        _soundById: function(id) {
          var self = this;
          for (var i = 0; i < self._sounds.length; i++) {
            if (id === self._sounds[i]._id) {
              return self._sounds[i];
            }
          }
          return null;
        },
        /**
         * Return an inactive sound from the pool or create a new one.
         * @return {Sound} Sound playback object.
         */
        _inactiveSound: function() {
          var self = this;
          self._drain();
          for (var i = 0; i < self._sounds.length; i++) {
            if (self._sounds[i]._ended) {
              return self._sounds[i].reset();
            }
          }
          return new Sound2(self);
        },
        /**
         * Drain excess inactive sounds from the pool.
         */
        _drain: function() {
          var self = this;
          var limit = self._pool;
          var cnt = 0;
          var i = 0;
          if (self._sounds.length < limit) {
            return;
          }
          for (i = 0; i < self._sounds.length; i++) {
            if (self._sounds[i]._ended) {
              cnt++;
            }
          }
          for (i = self._sounds.length - 1; i >= 0; i--) {
            if (cnt <= limit) {
              return;
            }
            if (self._sounds[i]._ended) {
              if (self._webAudio && self._sounds[i]._node) {
                self._sounds[i]._node.disconnect(0);
              }
              self._sounds.splice(i, 1);
              cnt--;
            }
          }
        },
        /**
         * Get all ID's from the sounds pool.
         * @param  {Number} id Only return one ID if one is passed.
         * @return {Array}    Array of IDs.
         */
        _getSoundIds: function(id) {
          var self = this;
          if (typeof id === "undefined") {
            var ids = [];
            for (var i = 0; i < self._sounds.length; i++) {
              ids.push(self._sounds[i]._id);
            }
            return ids;
          } else {
            return [id];
          }
        },
        /**
         * Load the sound back into the buffer source.
         * @param  {Sound} sound The sound object to work with.
         * @return {Howl}
         */
        _refreshBuffer: function(sound) {
          var self = this;
          sound._node.bufferSource = Howler2.ctx.createBufferSource();
          sound._node.bufferSource.buffer = cache[self._src];
          if (sound._panner) {
            sound._node.bufferSource.connect(sound._panner);
          } else {
            sound._node.bufferSource.connect(sound._node);
          }
          sound._node.bufferSource.loop = sound._loop;
          if (sound._loop) {
            sound._node.bufferSource.loopStart = sound._start || 0;
            sound._node.bufferSource.loopEnd = sound._stop || 0;
          }
          sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler2.ctx.currentTime);
          return self;
        },
        /**
         * Prevent memory leaks by cleaning up the buffer source after playback.
         * @param  {Object} node Sound's audio node containing the buffer source.
         * @return {Howl}
         */
        _cleanBuffer: function(node) {
          var self = this;
          var isIOS = Howler2._navigator && Howler2._navigator.vendor.indexOf("Apple") >= 0;
          if (!node.bufferSource) {
            return self;
          }
          if (Howler2._scratchBuffer && node.bufferSource) {
            node.bufferSource.onended = null;
            node.bufferSource.disconnect(0);
            if (isIOS) {
              try {
                node.bufferSource.buffer = Howler2._scratchBuffer;
              } catch (e) {
              }
            }
          }
          node.bufferSource = null;
          return self;
        },
        /**
         * Set the source to a 0-second silence to stop any downloading (except in IE).
         * @param  {Object} node Audio node to clear.
         */
        _clearSound: function(node) {
          var checkIE = /MSIE |Trident\//.test(Howler2._navigator && Howler2._navigator.userAgent);
          if (!checkIE) {
            node.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA";
          }
        }
      };
      var Sound2 = function(howl) {
        this._parent = howl;
        this.init();
      };
      Sound2.prototype = {
        /**
         * Initialize a new Sound object.
         * @return {Sound}
         */
        init: function() {
          var self = this;
          var parent = self._parent;
          self._muted = parent._muted;
          self._loop = parent._loop;
          self._volume = parent._volume;
          self._rate = parent._rate;
          self._seek = 0;
          self._paused = true;
          self._ended = true;
          self._sprite = "__default";
          self._id = ++Howler2._counter;
          parent._sounds.push(self);
          self.create();
          return self;
        },
        /**
         * Create and setup a new sound object, whether HTML5 Audio or Web Audio.
         * @return {Sound}
         */
        create: function() {
          var self = this;
          var parent = self._parent;
          var volume = Howler2._muted || self._muted || self._parent._muted ? 0 : self._volume;
          if (parent._webAudio) {
            self._node = typeof Howler2.ctx.createGain === "undefined" ? Howler2.ctx.createGainNode() : Howler2.ctx.createGain();
            self._node.gain.setValueAtTime(volume, Howler2.ctx.currentTime);
            self._node.paused = true;
            self._node.connect(Howler2.masterGain);
          } else if (!Howler2.noAudio) {
            self._node = Howler2._obtainHtml5Audio();
            self._errorFn = self._errorListener.bind(self);
            self._node.addEventListener("error", self._errorFn, false);
            self._loadFn = self._loadListener.bind(self);
            self._node.addEventListener(Howler2._canPlayEvent, self._loadFn, false);
            self._endFn = self._endListener.bind(self);
            self._node.addEventListener("ended", self._endFn, false);
            self._node.src = parent._src;
            self._node.preload = parent._preload === true ? "auto" : parent._preload;
            self._node.volume = volume * Howler2.volume();
            self._node.load();
          }
          return self;
        },
        /**
         * Reset the parameters of this sound to the original state (for recycle).
         * @return {Sound}
         */
        reset: function() {
          var self = this;
          var parent = self._parent;
          self._muted = parent._muted;
          self._loop = parent._loop;
          self._volume = parent._volume;
          self._rate = parent._rate;
          self._seek = 0;
          self._rateSeek = 0;
          self._paused = true;
          self._ended = true;
          self._sprite = "__default";
          self._id = ++Howler2._counter;
          return self;
        },
        /**
         * HTML5 Audio error listener callback.
         */
        _errorListener: function() {
          var self = this;
          self._parent._emit("loaderror", self._id, self._node.error ? self._node.error.code : 0);
          self._node.removeEventListener("error", self._errorFn, false);
        },
        /**
         * HTML5 Audio canplaythrough listener callback.
         */
        _loadListener: function() {
          var self = this;
          var parent = self._parent;
          parent._duration = Math.ceil(self._node.duration * 10) / 10;
          if (Object.keys(parent._sprite).length === 0) {
            parent._sprite = { __default: [0, parent._duration * 1e3] };
          }
          if (parent._state !== "loaded") {
            parent._state = "loaded";
            parent._emit("load");
            parent._loadQueue();
          }
          self._node.removeEventListener(Howler2._canPlayEvent, self._loadFn, false);
        },
        /**
         * HTML5 Audio ended listener callback.
         */
        _endListener: function() {
          var self = this;
          var parent = self._parent;
          if (parent._duration === Infinity) {
            parent._duration = Math.ceil(self._node.duration * 10) / 10;
            if (parent._sprite.__default[1] === Infinity) {
              parent._sprite.__default[1] = parent._duration * 1e3;
            }
            parent._ended(self);
          }
          self._node.removeEventListener("ended", self._endFn, false);
        }
      };
      var cache = {};
      var loadBuffer = function(self) {
        var url = self._src;
        if (cache[url]) {
          self._duration = cache[url].duration;
          loadSound(self);
          return;
        }
        if (/^data:[^;]+;base64,/.test(url)) {
          var data = atob(url.split(",")[1]);
          var dataView = new Uint8Array(data.length);
          for (var i = 0; i < data.length; ++i) {
            dataView[i] = data.charCodeAt(i);
          }
          decodeAudioData(dataView.buffer, self);
        } else {
          var xhr = new XMLHttpRequest();
          xhr.open(self._xhr.method, url, true);
          xhr.withCredentials = self._xhr.withCredentials;
          xhr.responseType = "arraybuffer";
          if (self._xhr.headers) {
            Object.keys(self._xhr.headers).forEach(function(key) {
              xhr.setRequestHeader(key, self._xhr.headers[key]);
            });
          }
          xhr.onload = function() {
            var code = (xhr.status + "")[0];
            if (code !== "0" && code !== "2" && code !== "3") {
              self._emit("loaderror", null, "Failed loading audio file with status: " + xhr.status + ".");
              return;
            }
            decodeAudioData(xhr.response, self);
          };
          xhr.onerror = function() {
            if (self._webAudio) {
              self._html5 = true;
              self._webAudio = false;
              self._sounds = [];
              delete cache[url];
              self.load();
            }
          };
          safeXhrSend(xhr);
        }
      };
      var safeXhrSend = function(xhr) {
        try {
          xhr.send();
        } catch (e) {
          xhr.onerror();
        }
      };
      var decodeAudioData = function(arraybuffer, self) {
        var error = function() {
          self._emit("loaderror", null, "Decoding audio data failed.");
        };
        var success = function(buffer) {
          if (buffer && self._sounds.length > 0) {
            cache[self._src] = buffer;
            loadSound(self, buffer);
          } else {
            error();
          }
        };
        if (typeof Promise !== "undefined" && Howler2.ctx.decodeAudioData.length === 1) {
          Howler2.ctx.decodeAudioData(arraybuffer).then(success).catch(error);
        } else {
          Howler2.ctx.decodeAudioData(arraybuffer, success, error);
        }
      };
      var loadSound = function(self, buffer) {
        if (buffer && !self._duration) {
          self._duration = buffer.duration;
        }
        if (Object.keys(self._sprite).length === 0) {
          self._sprite = { __default: [0, self._duration * 1e3] };
        }
        if (self._state !== "loaded") {
          self._state = "loaded";
          self._emit("load");
          self._loadQueue();
        }
      };
      var setupAudioContext = function() {
        if (!Howler2.usingWebAudio) {
          return;
        }
        try {
          if (typeof AudioContext !== "undefined") {
            Howler2.ctx = new AudioContext();
          } else if (typeof webkitAudioContext !== "undefined") {
            Howler2.ctx = new webkitAudioContext();
          } else {
            Howler2.usingWebAudio = false;
          }
        } catch (e) {
          Howler2.usingWebAudio = false;
        }
        if (!Howler2.ctx) {
          Howler2.usingWebAudio = false;
        }
        var iOS = /iP(hone|od|ad)/.test(Howler2._navigator && Howler2._navigator.platform);
        var appVersion = Howler2._navigator && Howler2._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
        var version = appVersion ? parseInt(appVersion[1], 10) : null;
        if (iOS && version && version < 9) {
          var safari = /safari/.test(Howler2._navigator && Howler2._navigator.userAgent.toLowerCase());
          if (Howler2._navigator && !safari) {
            Howler2.usingWebAudio = false;
          }
        }
        if (Howler2.usingWebAudio) {
          Howler2.masterGain = typeof Howler2.ctx.createGain === "undefined" ? Howler2.ctx.createGainNode() : Howler2.ctx.createGain();
          Howler2.masterGain.gain.setValueAtTime(Howler2._muted ? 0 : Howler2._volume, Howler2.ctx.currentTime);
          Howler2.masterGain.connect(Howler2.ctx.destination);
        }
        Howler2._setup();
      };
      if (typeof define === "function" && define.amd) {
        define([], function() {
          return {
            Howler: Howler2,
            Howl: Howl3
          };
        });
      }
      if (typeof exports !== "undefined") {
        exports.Howler = Howler2;
        exports.Howl = Howl3;
      }
      if (typeof global !== "undefined") {
        global.HowlerGlobal = HowlerGlobal2;
        global.Howler = Howler2;
        global.Howl = Howl3;
        global.Sound = Sound2;
      } else if (typeof window !== "undefined") {
        window.HowlerGlobal = HowlerGlobal2;
        window.Howler = Howler2;
        window.Howl = Howl3;
        window.Sound = Sound2;
      }
    })();
    (function() {
      "use strict";
      HowlerGlobal.prototype._pos = [0, 0, 0];
      HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];
      HowlerGlobal.prototype.stereo = function(pan) {
        var self = this;
        if (!self.ctx || !self.ctx.listener) {
          return self;
        }
        for (var i = self._howls.length - 1; i >= 0; i--) {
          self._howls[i].stereo(pan);
        }
        return self;
      };
      HowlerGlobal.prototype.pos = function(x, y, z) {
        var self = this;
        if (!self.ctx || !self.ctx.listener) {
          return self;
        }
        y = typeof y !== "number" ? self._pos[1] : y;
        z = typeof z !== "number" ? self._pos[2] : z;
        if (typeof x === "number") {
          self._pos = [x, y, z];
          if (typeof self.ctx.listener.positionX !== "undefined") {
            self.ctx.listener.positionX.setTargetAtTime(self._pos[0], Howler.ctx.currentTime, 0.1);
            self.ctx.listener.positionY.setTargetAtTime(self._pos[1], Howler.ctx.currentTime, 0.1);
            self.ctx.listener.positionZ.setTargetAtTime(self._pos[2], Howler.ctx.currentTime, 0.1);
          } else {
            self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);
          }
        } else {
          return self._pos;
        }
        return self;
      };
      HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {
        var self = this;
        if (!self.ctx || !self.ctx.listener) {
          return self;
        }
        var or = self._orientation;
        y = typeof y !== "number" ? or[1] : y;
        z = typeof z !== "number" ? or[2] : z;
        xUp = typeof xUp !== "number" ? or[3] : xUp;
        yUp = typeof yUp !== "number" ? or[4] : yUp;
        zUp = typeof zUp !== "number" ? or[5] : zUp;
        if (typeof x === "number") {
          self._orientation = [x, y, z, xUp, yUp, zUp];
          if (typeof self.ctx.listener.forwardX !== "undefined") {
            self.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);
            self.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);
            self.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);
            self.ctx.listener.upX.setTargetAtTime(xUp, Howler.ctx.currentTime, 0.1);
            self.ctx.listener.upY.setTargetAtTime(yUp, Howler.ctx.currentTime, 0.1);
            self.ctx.listener.upZ.setTargetAtTime(zUp, Howler.ctx.currentTime, 0.1);
          } else {
            self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);
          }
        } else {
          return or;
        }
        return self;
      };
      Howl.prototype.init = function(_super) {
        return function(o) {
          var self = this;
          self._orientation = o.orientation || [1, 0, 0];
          self._stereo = o.stereo || null;
          self._pos = o.pos || null;
          self._pannerAttr = {
            coneInnerAngle: typeof o.coneInnerAngle !== "undefined" ? o.coneInnerAngle : 360,
            coneOuterAngle: typeof o.coneOuterAngle !== "undefined" ? o.coneOuterAngle : 360,
            coneOuterGain: typeof o.coneOuterGain !== "undefined" ? o.coneOuterGain : 0,
            distanceModel: typeof o.distanceModel !== "undefined" ? o.distanceModel : "inverse",
            maxDistance: typeof o.maxDistance !== "undefined" ? o.maxDistance : 1e4,
            panningModel: typeof o.panningModel !== "undefined" ? o.panningModel : "HRTF",
            refDistance: typeof o.refDistance !== "undefined" ? o.refDistance : 1,
            rolloffFactor: typeof o.rolloffFactor !== "undefined" ? o.rolloffFactor : 1
          };
          self._onstereo = o.onstereo ? [{ fn: o.onstereo }] : [];
          self._onpos = o.onpos ? [{ fn: o.onpos }] : [];
          self._onorientation = o.onorientation ? [{ fn: o.onorientation }] : [];
          return _super.call(this, o);
        };
      }(Howl.prototype.init);
      Howl.prototype.stereo = function(pan, id) {
        var self = this;
        if (!self._webAudio) {
          return self;
        }
        if (self._state !== "loaded") {
          self._queue.push({
            event: "stereo",
            action: function() {
              self.stereo(pan, id);
            }
          });
          return self;
        }
        var pannerType = typeof Howler.ctx.createStereoPanner === "undefined" ? "spatial" : "stereo";
        if (typeof id === "undefined") {
          if (typeof pan === "number") {
            self._stereo = pan;
            self._pos = [pan, 0, 0];
          } else {
            return self._stereo;
          }
        }
        var ids = self._getSoundIds(id);
        for (var i = 0; i < ids.length; i++) {
          var sound = self._soundById(ids[i]);
          if (sound) {
            if (typeof pan === "number") {
              sound._stereo = pan;
              sound._pos = [pan, 0, 0];
              if (sound._node) {
                sound._pannerAttr.panningModel = "equalpower";
                if (!sound._panner || !sound._panner.pan) {
                  setupPanner(sound, pannerType);
                }
                if (pannerType === "spatial") {
                  if (typeof sound._panner.positionX !== "undefined") {
                    sound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);
                    sound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);
                    sound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);
                  } else {
                    sound._panner.setPosition(pan, 0, 0);
                  }
                } else {
                  sound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);
                }
              }
              self._emit("stereo", sound._id);
            } else {
              return sound._stereo;
            }
          }
        }
        return self;
      };
      Howl.prototype.pos = function(x, y, z, id) {
        var self = this;
        if (!self._webAudio) {
          return self;
        }
        if (self._state !== "loaded") {
          self._queue.push({
            event: "pos",
            action: function() {
              self.pos(x, y, z, id);
            }
          });
          return self;
        }
        y = typeof y !== "number" ? 0 : y;
        z = typeof z !== "number" ? -0.5 : z;
        if (typeof id === "undefined") {
          if (typeof x === "number") {
            self._pos = [x, y, z];
          } else {
            return self._pos;
          }
        }
        var ids = self._getSoundIds(id);
        for (var i = 0; i < ids.length; i++) {
          var sound = self._soundById(ids[i]);
          if (sound) {
            if (typeof x === "number") {
              sound._pos = [x, y, z];
              if (sound._node) {
                if (!sound._panner || sound._panner.pan) {
                  setupPanner(sound, "spatial");
                }
                if (typeof sound._panner.positionX !== "undefined") {
                  sound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);
                  sound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);
                  sound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);
                } else {
                  sound._panner.setPosition(x, y, z);
                }
              }
              self._emit("pos", sound._id);
            } else {
              return sound._pos;
            }
          }
        }
        return self;
      };
      Howl.prototype.orientation = function(x, y, z, id) {
        var self = this;
        if (!self._webAudio) {
          return self;
        }
        if (self._state !== "loaded") {
          self._queue.push({
            event: "orientation",
            action: function() {
              self.orientation(x, y, z, id);
            }
          });
          return self;
        }
        y = typeof y !== "number" ? self._orientation[1] : y;
        z = typeof z !== "number" ? self._orientation[2] : z;
        if (typeof id === "undefined") {
          if (typeof x === "number") {
            self._orientation = [x, y, z];
          } else {
            return self._orientation;
          }
        }
        var ids = self._getSoundIds(id);
        for (var i = 0; i < ids.length; i++) {
          var sound = self._soundById(ids[i]);
          if (sound) {
            if (typeof x === "number") {
              sound._orientation = [x, y, z];
              if (sound._node) {
                if (!sound._panner) {
                  if (!sound._pos) {
                    sound._pos = self._pos || [0, 0, -0.5];
                  }
                  setupPanner(sound, "spatial");
                }
                if (typeof sound._panner.orientationX !== "undefined") {
                  sound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);
                  sound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);
                  sound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);
                } else {
                  sound._panner.setOrientation(x, y, z);
                }
              }
              self._emit("orientation", sound._id);
            } else {
              return sound._orientation;
            }
          }
        }
        return self;
      };
      Howl.prototype.pannerAttr = function() {
        var self = this;
        var args = arguments;
        var o, id, sound;
        if (!self._webAudio) {
          return self;
        }
        if (args.length === 0) {
          return self._pannerAttr;
        } else if (args.length === 1) {
          if (typeof args[0] === "object") {
            o = args[0];
            if (typeof id === "undefined") {
              if (!o.pannerAttr) {
                o.pannerAttr = {
                  coneInnerAngle: o.coneInnerAngle,
                  coneOuterAngle: o.coneOuterAngle,
                  coneOuterGain: o.coneOuterGain,
                  distanceModel: o.distanceModel,
                  maxDistance: o.maxDistance,
                  refDistance: o.refDistance,
                  rolloffFactor: o.rolloffFactor,
                  panningModel: o.panningModel
                };
              }
              self._pannerAttr = {
                coneInnerAngle: typeof o.pannerAttr.coneInnerAngle !== "undefined" ? o.pannerAttr.coneInnerAngle : self._coneInnerAngle,
                coneOuterAngle: typeof o.pannerAttr.coneOuterAngle !== "undefined" ? o.pannerAttr.coneOuterAngle : self._coneOuterAngle,
                coneOuterGain: typeof o.pannerAttr.coneOuterGain !== "undefined" ? o.pannerAttr.coneOuterGain : self._coneOuterGain,
                distanceModel: typeof o.pannerAttr.distanceModel !== "undefined" ? o.pannerAttr.distanceModel : self._distanceModel,
                maxDistance: typeof o.pannerAttr.maxDistance !== "undefined" ? o.pannerAttr.maxDistance : self._maxDistance,
                refDistance: typeof o.pannerAttr.refDistance !== "undefined" ? o.pannerAttr.refDistance : self._refDistance,
                rolloffFactor: typeof o.pannerAttr.rolloffFactor !== "undefined" ? o.pannerAttr.rolloffFactor : self._rolloffFactor,
                panningModel: typeof o.pannerAttr.panningModel !== "undefined" ? o.pannerAttr.panningModel : self._panningModel
              };
            }
          } else {
            sound = self._soundById(parseInt(args[0], 10));
            return sound ? sound._pannerAttr : self._pannerAttr;
          }
        } else if (args.length === 2) {
          o = args[0];
          id = parseInt(args[1], 10);
        }
        var ids = self._getSoundIds(id);
        for (var i = 0; i < ids.length; i++) {
          sound = self._soundById(ids[i]);
          if (sound) {
            var pa = sound._pannerAttr;
            pa = {
              coneInnerAngle: typeof o.coneInnerAngle !== "undefined" ? o.coneInnerAngle : pa.coneInnerAngle,
              coneOuterAngle: typeof o.coneOuterAngle !== "undefined" ? o.coneOuterAngle : pa.coneOuterAngle,
              coneOuterGain: typeof o.coneOuterGain !== "undefined" ? o.coneOuterGain : pa.coneOuterGain,
              distanceModel: typeof o.distanceModel !== "undefined" ? o.distanceModel : pa.distanceModel,
              maxDistance: typeof o.maxDistance !== "undefined" ? o.maxDistance : pa.maxDistance,
              refDistance: typeof o.refDistance !== "undefined" ? o.refDistance : pa.refDistance,
              rolloffFactor: typeof o.rolloffFactor !== "undefined" ? o.rolloffFactor : pa.rolloffFactor,
              panningModel: typeof o.panningModel !== "undefined" ? o.panningModel : pa.panningModel
            };
            var panner = sound._panner;
            if (!panner) {
              if (!sound._pos) {
                sound._pos = self._pos || [0, 0, -0.5];
              }
              setupPanner(sound, "spatial");
              panner = sound._panner;
            }
            panner.coneInnerAngle = pa.coneInnerAngle;
            panner.coneOuterAngle = pa.coneOuterAngle;
            panner.coneOuterGain = pa.coneOuterGain;
            panner.distanceModel = pa.distanceModel;
            panner.maxDistance = pa.maxDistance;
            panner.refDistance = pa.refDistance;
            panner.rolloffFactor = pa.rolloffFactor;
            panner.panningModel = pa.panningModel;
          }
        }
        return self;
      };
      Sound.prototype.init = function(_super) {
        return function() {
          var self = this;
          var parent = self._parent;
          self._orientation = parent._orientation;
          self._stereo = parent._stereo;
          self._pos = parent._pos;
          self._pannerAttr = parent._pannerAttr;
          _super.call(this);
          if (self._stereo) {
            parent.stereo(self._stereo);
          } else if (self._pos) {
            parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);
          }
        };
      }(Sound.prototype.init);
      Sound.prototype.reset = function(_super) {
        return function() {
          var self = this;
          var parent = self._parent;
          self._orientation = parent._orientation;
          self._stereo = parent._stereo;
          self._pos = parent._pos;
          self._pannerAttr = parent._pannerAttr;
          if (self._stereo) {
            parent.stereo(self._stereo);
          } else if (self._pos) {
            parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);
          } else if (self._panner) {
            self._panner.disconnect(0);
            self._panner = void 0;
            parent._refreshBuffer(self);
          }
          return _super.call(this);
        };
      }(Sound.prototype.reset);
      var setupPanner = function(sound, type) {
        type = type || "spatial";
        if (type === "spatial") {
          sound._panner = Howler.ctx.createPanner();
          sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;
          sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;
          sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;
          sound._panner.distanceModel = sound._pannerAttr.distanceModel;
          sound._panner.maxDistance = sound._pannerAttr.maxDistance;
          sound._panner.refDistance = sound._pannerAttr.refDistance;
          sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;
          sound._panner.panningModel = sound._pannerAttr.panningModel;
          if (typeof sound._panner.positionX !== "undefined") {
            sound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);
            sound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);
            sound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);
          } else {
            sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);
          }
          if (typeof sound._panner.orientationX !== "undefined") {
            sound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);
            sound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);
            sound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);
          } else {
            sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);
          }
        } else {
          sound._panner = Howler.ctx.createStereoPanner();
          sound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);
        }
        sound._panner.connect(sound._node);
        if (!sound._paused) {
          sound._parent.pause(sound._id, true).play(sound._id, true);
        }
      };
    })();
  }
});

// node_modules/eventemitter3/index.js
var require_eventemitter3 = __commonJS({
  "node_modules/eventemitter3/index.js"(exports, module) {
    "use strict";
    var has = Object.prototype.hasOwnProperty;
    var prefix = "~";
    function Events() {
    }
    if (Object.create) {
      Events.prototype = /* @__PURE__ */ Object.create(null);
      if (!new Events().__proto__)
        prefix = false;
    }
    function EE(fn, context, once) {
      this.fn = fn;
      this.context = context;
      this.once = once || false;
    }
    function addListener(emitter, event, fn, context, once) {
      if (typeof fn !== "function") {
        throw new TypeError("The listener must be a function");
      }
      var listener = new EE(fn, context || emitter, once), evt = prefix ? prefix + event : event;
      if (!emitter._events[evt])
        emitter._events[evt] = listener, emitter._eventsCount++;
      else if (!emitter._events[evt].fn)
        emitter._events[evt].push(listener);
      else
        emitter._events[evt] = [emitter._events[evt], listener];
      return emitter;
    }
    function clearEvent(emitter, evt) {
      if (--emitter._eventsCount === 0)
        emitter._events = new Events();
      else
        delete emitter._events[evt];
    }
    function EventEmitter2() {
      this._events = new Events();
      this._eventsCount = 0;
    }
    EventEmitter2.prototype.eventNames = function eventNames() {
      var names = [], events, name;
      if (this._eventsCount === 0)
        return names;
      for (name in events = this._events) {
        if (has.call(events, name))
          names.push(prefix ? name.slice(1) : name);
      }
      if (Object.getOwnPropertySymbols) {
        return names.concat(Object.getOwnPropertySymbols(events));
      }
      return names;
    };
    EventEmitter2.prototype.listeners = function listeners(event) {
      var evt = prefix ? prefix + event : event, handlers = this._events[evt];
      if (!handlers)
        return [];
      if (handlers.fn)
        return [handlers.fn];
      for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {
        ee[i] = handlers[i].fn;
      }
      return ee;
    };
    EventEmitter2.prototype.listenerCount = function listenerCount(event) {
      var evt = prefix ? prefix + event : event, listeners = this._events[evt];
      if (!listeners)
        return 0;
      if (listeners.fn)
        return 1;
      return listeners.length;
    };
    EventEmitter2.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {
      var evt = prefix ? prefix + event : event;
      if (!this._events[evt])
        return false;
      var listeners = this._events[evt], len = arguments.length, args, i;
      if (listeners.fn) {
        if (listeners.once)
          this.removeListener(event, listeners.fn, void 0, true);
        switch (len) {
          case 1:
            return listeners.fn.call(listeners.context), true;
          case 2:
            return listeners.fn.call(listeners.context, a1), true;
          case 3:
            return listeners.fn.call(listeners.context, a1, a2), true;
          case 4:
            return listeners.fn.call(listeners.context, a1, a2, a3), true;
          case 5:
            return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;
          case 6:
            return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;
        }
        for (i = 1, args = new Array(len - 1); i < len; i++) {
          args[i - 1] = arguments[i];
        }
        listeners.fn.apply(listeners.context, args);
      } else {
        var length = listeners.length, j;
        for (i = 0; i < length; i++) {
          if (listeners[i].once)
            this.removeListener(event, listeners[i].fn, void 0, true);
          switch (len) {
            case 1:
              listeners[i].fn.call(listeners[i].context);
              break;
            case 2:
              listeners[i].fn.call(listeners[i].context, a1);
              break;
            case 3:
              listeners[i].fn.call(listeners[i].context, a1, a2);
              break;
            case 4:
              listeners[i].fn.call(listeners[i].context, a1, a2, a3);
              break;
            default:
              if (!args)
                for (j = 1, args = new Array(len - 1); j < len; j++) {
                  args[j - 1] = arguments[j];
                }
              listeners[i].fn.apply(listeners[i].context, args);
          }
        }
      }
      return true;
    };
    EventEmitter2.prototype.on = function on(event, fn, context) {
      return addListener(this, event, fn, context, false);
    };
    EventEmitter2.prototype.once = function once(event, fn, context) {
      return addListener(this, event, fn, context, true);
    };
    EventEmitter2.prototype.removeListener = function removeListener(event, fn, context, once) {
      var evt = prefix ? prefix + event : event;
      if (!this._events[evt])
        return this;
      if (!fn) {
        clearEvent(this, evt);
        return this;
      }
      var listeners = this._events[evt];
      if (listeners.fn) {
        if (listeners.fn === fn && (!once || listeners.once) && (!context || listeners.context === context)) {
          clearEvent(this, evt);
        }
      } else {
        for (var i = 0, events = [], length = listeners.length; i < length; i++) {
          if (listeners[i].fn !== fn || once && !listeners[i].once || context && listeners[i].context !== context) {
            events.push(listeners[i]);
          }
        }
        if (events.length)
          this._events[evt] = events.length === 1 ? events[0] : events;
        else
          clearEvent(this, evt);
      }
      return this;
    };
    EventEmitter2.prototype.removeAllListeners = function removeAllListeners(event) {
      var evt;
      if (event) {
        evt = prefix ? prefix + event : event;
        if (this._events[evt])
          clearEvent(this, evt);
      } else {
        this._events = new Events();
        this._eventsCount = 0;
      }
      return this;
    };
    EventEmitter2.prototype.off = EventEmitter2.prototype.removeListener;
    EventEmitter2.prototype.addListener = EventEmitter2.prototype.on;
    EventEmitter2.prefixed = prefix;
    EventEmitter2.EventEmitter = EventEmitter2;
    if ("undefined" !== typeof module) {
      module.exports = EventEmitter2;
    }
  }
});

// packages/boot/Boot.js
function Boot(load) {
  window.onload = () => {
    load();
    window.focus();
    document.body.addEventListener("click", function() {
      window.focus();
    }, false);
  };
}

// packages/assets-store/Assets.js
var ASSETS = (() => {
  return {
    images: {},
    tileds: {},
    resources: {}
  };
})();

// packages/utils/misc.js
function getFileNameFromPath(path) {
  const fileName = path.split("/").pop();
  return fileName;
}
function getDivElementById(id) {
  return (
    /** @type {HTMLDivElement}*/
    document.getElementById(id)
  );
}
function getAnimFrames(name) {
  let animSheet = [];
  for (let key in ASSETS.images) {
    if (key.includes(name)) {
      animSheet.push(key);
    }
  }
  return animSheet;
}
function getAnimFrame(name) {
  return getAnimFrames(name)[0];
}
function toCSSPX(value) {
  return value + "px";
}
function distance(s1, s2) {
  const vx = s2.centerX() - s1.centerX(), vy = s2.centerY() - s1.centerY();
  return Math.sqrt(vx * vx + vy * vy);
}
function followConstant(follower, leader, speed, followX = true, followY = true) {
  var vx = leader.centerX() - follower.centerX(), vy = leader.centerY() - follower.centerY(), distance2 = Math.sqrt(vx * vx + vy * vy);
  if (distance2 >= speed) {
    if (followX) {
      follower.x += vx / distance2 * speed;
    }
    if (followY) {
      follower.y += vy / distance2 * speed;
    }
  }
}

// packages/canvas-layers/CanvasLayers.js
function CanvasLayers() {
  const layers = [];
  function add(id, width, height) {
    const canvas = document.createElement("canvas");
    canvas.setAttribute("width", toCSSPX(width));
    canvas.setAttribute("height", toCSSPX(height));
    canvas.setAttribute("id", id);
    const ctx = canvas.getContext("2d");
    ctx.imageSmoothingEnabled = false;
    const layer = { id, canvas, ctx };
    layers.push(layer);
    return layer;
  }
  function remove(id) {
    for (let i = 0; i < layers.length; i++) {
      const layer = layers[i];
      if (layer.id === id) {
        layers.splice(i, 1);
        return;
      }
    }
  }
  function get(id) {
    const layer = layers.filter((val) => val.id === id);
    return layer.length ? layer[0] : void 0;
  }
  return {
    add,
    remove,
    get
  };
}

// packages/displayObjects/DisplayObject.js
function DisplayObject() {
  let _alpha = 1;
  let o = {
    x: 0,
    y: 0,
    uid: uid(),
    width: 0,
    height: 0,
    scaleX: 1,
    scaleY: 1,
    pivotX: 0.5,
    pivotY: 0.5,
    rotation: 0,
    visible: true,
    children: [],
    addChild: (sprite) => {
      if (sprite.parent)
        sprite.parent.removeChild(sprite);
      sprite.parent = o;
      o.children.push(sprite);
    },
    removeChild: (sprite) => {
      if (sprite.parent.uid === o.uid) {
        const index = o.children.findIndex((v) => v.uid === sprite.uid);
        o.children.splice(index, 1);
        sprite.parent = void 0;
      }
    },
    removeChildren: () => {
      removeChildren();
    },
    gx: () => {
      return globalPos("x", "gx");
    },
    gy: () => {
      return globalPos("y", "gy");
    },
    alpha: _alpha,
    halfWidth: () => {
      return halfDimension("width");
    },
    halfHeight: () => {
      return halfDimension("height");
    },
    centerX: () => {
      return center("x", "halfWidth");
    },
    centerY: () => {
      return center("y", "halfHeight");
    },
    destroy: () => {
      if (o.children.length) {
        removeChildren(true);
      }
      if (o.parent) {
        o.parent.removeChild(o);
        o.destroyed = true;
      }
    }
  };
  Object.assign(o, {
    alpha: {
      get: () => {
        return o.parent ? o.parent.alpha * _alpha : _alpha;
      },
      /**
       * @param {number} value
       */
      set: (value) => {
        _alpha = value;
      }
    }
  });
  function removeChildren(isDestroy) {
    o.children.forEach((child) => {
      if (isDestroy) {
        child.destroy();
      } else {
        if (child.parent.uid === o.uid) {
          child.parent = void 0;
        }
      }
    });
    o.children.length = 0;
  }
  function uid() {
    return Math.floor(Math.random() * Date.now()).toString(16);
  }
  function globalPos(pos, gpos) {
    return o.parent ? o[pos] + o.parent[gpos]() : o[pos];
  }
  function halfDimension(type) {
    return o[type] / 2;
  }
  function center(pos, halfDimension2) {
    return o[pos] + o[halfDimension2]();
  }
  return o;
}

// packages/displayObjects/Sprite.js
function Sprite(src) {
  const o = DisplayObject();
  let props = {
    texture: src,
    type: "Sprite"
  };
  let self = (
    /** @type {TSprite} */
    Object.assign(o, props)
  );
  self.setTexture = (src2) => {
    self.tilesetFrame = ASSETS.images[src2];
    self._registerTexture(self.tilesetFrame);
  };
  self._registerTexture = (imgData) => {
    self.source = imgData.source;
    self.sourceX = imgData.frame ? imgData.frame.x : imgData.x;
    self.sourceY = imgData.frame ? imgData.frame.y : imgData.y;
    self.width = imgData.frame ? imgData.frame.w : imgData.w;
    self.height = imgData.frame ? imgData.frame.h : imgData.h;
    self.sourceWidth = self.width;
    self.sourceHeight = self.height;
  };
  self.render = (ctx) => {
    ctx.drawImage(
      self.source,
      self.sourceX,
      self.sourceY,
      self.sourceWidth,
      self.sourceHeight,
      -self.width * self.pivotX,
      -self.height * self.pivotY,
      self.width,
      self.height
    );
  };
  if (src)
    self.setTexture(src);
  return self;
}

// packages/displayObjects/AnimatedSprite.js
function AnimatedSprite(src) {
  let frameCounter = 0;
  let frames = src.map((_, i) => i);
  let sprite = Sprite();
  let accumulator = 0;
  let props = {
    fps: 8,
    loop: true,
    currentFrame: 0,
    playing: false
  };
  const self = (
    /** @type {TAnimatedSprite} */
    Object.assign(sprite, props)
  );
  self.setTexture = (src2) => {
    self.texture = src2;
    const imgData = ASSETS.images[src2[0]];
    self._registerTexture(imgData);
  };
  self.gotoAndStop = (frameNumber, reset) => {
    const framesData = ASSETS.images[self.texture[frameNumber]];
    if (framesData) {
      self._registerTexture(framesData);
    }
    self.currentFrame = frameNumber;
    if (reset)
      resetAnimation();
  };
  self.play = () => {
    if (!self.playing) {
      self.playing = true;
    }
  };
  self.stop = () => {
    resetAnimation();
    self.gotoAndStop(self.currentFrame);
  };
  self.animUpdate = (dt) => {
    if (!self.playing) {
      accumulator = 0;
      return;
    }
    accumulator += dt;
    while (accumulator * self.fps >= 1) {
      advanceFrame();
      accumulator -= 1 / self.fps;
    }
  };
  const _destroy = self.destroy;
  self.destroy = () => {
    self.onAnimComplete = void 0;
    self.onAnimUpdate = void 0;
    resetAnimation();
    _destroy();
  };
  function advanceFrame() {
    self.gotoAndStop(frames[frameCounter]);
    if (self.onAnimUpdate)
      self.onAnimUpdate(frameCounter);
    frameCounter += 1;
    if (frameCounter >= frames.length) {
      if (self.loop) {
        frameCounter = 0;
      } else {
        if (frameCounter >= frames.length + 1 && self.onAnimComplete) {
          self.onAnimComplete();
          self.stop();
        }
      }
    }
  }
  function resetAnimation() {
    accumulator = 0;
    frameCounter = 0;
    self.playing = false;
  }
  self.setTexture(src);
  return self;
}

// packages/displayObjects/Group.js
function Group() {
  let newWidth = 0;
  let newHeight = 0;
  const o = DisplayObject();
  const _addChild = o.addChild;
  const _removeChild = o.removeChild;
  let props = {
    calculateSize
  };
  let self = (
    /** @type {TGroup} */
    Object.assign(o, props)
  );
  self.addChild = (sprite) => {
    _addChild(sprite);
    calculateSize();
  };
  self.removeChild = (sprite) => {
    _removeChild(sprite);
    calculateSize();
  };
  function calculateSize() {
    if (self.children.length > 0) {
      newWidth = 0;
      newHeight = 0;
      self.children.forEach(function(child) {
        if (child.x + child.width > newWidth) {
          newWidth = child.x + child.width;
        }
        if (child.y + child.height > newHeight) {
          newHeight = child.y + child.height;
        }
      });
      self.width = newWidth;
      self.height = newHeight;
    }
  }
  return self;
}

// packages/displayObjects/MovieClip.js
function MovieClip(clips) {
  let parent;
  let currentAnim;
  let animations = {};
  let o = Group();
  let props = {
    addTo,
    play,
    stop
  };
  let self = (
    /** @type {TMovieClip}*/
    Object.assign(o, props)
  );
  const _destroy = self.destroy;
  self.destroy = () => {
    _destroy();
    animations = {};
  };
  if (clips)
    init();
  function init() {
    for (let name in clips) {
      const clip = clips[name];
      const anim = AnimatedSprite(clip.frames);
      animations[name] = anim;
      anim.name = name;
    }
  }
  function create(name) {
    if (currentAnim && parent) {
      currentAnim.destroy();
    }
    const clip = clips[name];
    currentAnim = animations[name];
    currentAnim.fps = clip.fps !== void 0 ? clip.fps : currentAnim.fps;
    currentAnim.loop = clip.loop !== void 0 ? clip.loop : currentAnim.loop;
    self.addChild(currentAnim);
    self.currentAnimName = name;
  }
  function play(name) {
    if (currentAnim && name === currentAnim.name) {
      return;
    }
    create(name);
    currentAnim.play();
    currentAnim.onAnimUpdate = () => {
      if (self.onAnimUpdate)
        self.onAnimUpdate(currentAnim.currentFrame, name);
    };
    currentAnim.onAnimComplete = () => {
      if (self.onAnimComplete)
        self.onAnimComplete(name);
    };
  }
  function stop() {
    if (!currentAnim) {
      return;
    }
    currentAnim.stop();
  }
  function addTo(_parent) {
    parent = _parent;
    parent.addChild(o);
  }
  return self;
}

// packages/displayObjects/Rectangle.js
function Rectangle(width = 1, height = 1, fillStyle = "red", strokeStyle = "none", lineWidth = 0, x = 0, y = 0) {
  const o = DisplayObject();
  let props = {
    width,
    height,
    fillStyle,
    strokeStyle,
    lineWidth,
    x,
    y
  };
  let self = (
    /** @type {TRect} */
    Object.assign(o, props)
  );
  self.render = function(ctx) {
    ctx.fillStyle = props.fillStyle;
    ctx.beginPath();
    ctx.rect(-self.width * self.pivotX, -self.height * self.pivotY, self.width, self.height);
    if (self.mask) {
      ctx.clip();
    } else {
      ctx.fill();
    }
  };
  return self;
}

// packages/displayObjects/Stage.js
function Stage(width, height) {
  let o = DisplayObject();
  let props = {
    stage: true
  };
  let self = (
    /** @type {TStage} */
    Object.assign(o, props)
  );
  self.width = width;
  self.height = height;
  self.name = "stage";
  return self;
}

// packages/inputs/Keyboard.js
function Keyboard(inputKeys) {
  window.addEventListener("keydown", onKeyDownHandler, false);
  window.addEventListener("keyup", onKeyUpHandler, false);
  function onKeyDownHandler(e) {
    setKeyPressState(e.key, true);
  }
  function onKeyUpHandler(e) {
    setKeyPressState(e.key, false);
  }
  function setKeyPressState(keyCode, isDown2) {
    const keys = Object.keys(inputKeys);
    keys.forEach((key) => {
      if (keyCode === inputKeys[key].code) {
        inputKeys[key].isDown = isDown2;
      }
    });
  }
  function isDown(key) {
    return Boolean(inputKeys[key].isDown);
  }
  return {
    isDown
  };
}

// packages/http-request/HttpRequest.js
function HttpRequest(source, onLoad) {
  const xhr = new XMLHttpRequest();
  xhr.open("GET", source, true);
  xhr.addEventListener("readystatechange", () => {
    if (xhr.status === 200 && xhr.readyState === 4) {
      ASSETS.resources[source] = JSON.parse(xhr.responseText);
      const file = JSON.parse(xhr.responseText);
      file.name = source;
      onLoad(file);
    }
  });
  xhr.send();
}

// packages/loader/SoundLoader.js
var import_howler = __toESM(require_howler(), 1);
function SoundLoader(source, onLoad) {
  HttpRequest(source, (file) => {
    if (!file.sprite) {
      return;
    }
    loadSound(file);
  });
  function loadSound(file) {
    const urls = file.urls;
    const src = urls.map((url) => `media/sounds/out/${getFileNameFromPath(url)}`);
    const sound = new import_howler.Howl({
      src,
      sprite: file.sprite
    });
    sound.on("load", () => {
      onLoad(sound);
    });
  }
}

// packages/loader/TiledLoader.js
function TiledLoader(sources, onLoad) {
  let loadedCount = 0;
  sources.forEach((source) => {
    HttpRequest(source, (file) => {
      loadTiled(file, source);
    });
  });
  function loadTiled(file, source) {
    const fileName = getFileNameFromPath(source);
    const name = fileName.split(".")[0];
    ASSETS.tileds[name] = file;
    loadedCount += 1;
    if (loadedCount >= sources.length) {
      onLoad();
    }
  }
}

// packages/loader/TPSImageLoader.js
function TPSImageLoader(sources, onLoad) {
  const images = {};
  let loadedCount = 0;
  sources.forEach((source) => {
    HttpRequest(source, (file) => {
      if (!file.frames) {
        return;
      }
      loadImage(file, source);
    });
  });
  function loadImage(json, source) {
    const baseUrl = source.replace(/[^\/]*$/, "");
    const image = new Image();
    image.src = baseUrl + json.meta.image;
    image.onload = () => {
      Object.keys(json.frames).forEach((src) => {
        images[src] = json.frames[src];
        images[src].source = image;
      });
      loadedCount += 1;
      if (loadedCount >= sources.length) {
        onLoad();
      }
    };
  }
  ASSETS.images = images;
}

// packages/loader/Loader.js
function Loader(props) {
  const total = [
    Boolean(props.tiledFiles),
    Boolean(props.soundSprite),
    Boolean(props.tiledFiles)
  ].filter((v) => v);
  let loadedCount = 0;
  if (props.tpsJSONFiles) {
    TPSImageLoader(props.tpsJSONFiles, () => {
      if (props.onLoadImages)
        props.onLoadImages();
      onLoad();
    });
  }
  if (props.soundSprite) {
    SoundLoader(props.soundSprite, (sound) => {
      if (props.onLoadSounds)
        props.onLoadSounds(sound);
      onLoad();
    });
  }
  if (props.tiledFiles) {
    TiledLoader(props.tiledFiles, () => {
      if (props.onLoadTileds)
        props.onLoadTileds();
      onLoad();
    });
  }
  function onLoad() {
    loadedCount += 1;
    if (loadedCount >= total.length) {
      props.onLoadComplete();
    }
  }
}

// packages/render/renderCanvasLayer.js
function renderCanvasLayer(canvasLayer, stage, dt) {
  const ctx = canvasLayer.ctx;
  const canvas = canvasLayer.canvas;
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  stage.children.forEach((child) => {
    display(child);
  });
  function display(dob) {
    if (dob.visible && dob.gx() < canvas.width + dob.width && dob.gx() + dob.width >= -dob.width && dob.gy() < canvas.height + dob.height && dob.gy() + dob.height >= -dob.height) {
      ctx.save();
      ctx.translate(
        dob.x + dob.width * dob.pivotX,
        dob.y + dob.height * dob.pivotY
      );
      ctx.globalAlpha = dob.alpha;
      ctx.scale(dob.scaleX, dob.scaleY);
      if (dob.render) {
        dob.render(ctx);
      }
      if (dob.animUpdate) {
        dob.animUpdate(dt);
      }
      if (dob.children && dob.children.length > 0) {
        ctx.translate(
          -dob.width * dob.pivotX,
          -dob.height * dob.pivotY
        );
        dob.children.forEach((child) => {
          display(child);
        });
      }
      ctx.restore();
    }
  }
}

// packages/resizer/Resizer.js
function Resizer(dimension, root) {
  function resize() {
    const innerHeight = window.innerHeight;
    const innerWidth = window.innerWidth;
    const ratioWidth = innerWidth / dimension.width;
    const top = -(dimension.height - innerHeight) / 2;
    const left = -(dimension.width - innerWidth) / 2;
    root.style.transform = "scale(" + ratioWidth + ")";
    root.style.top = top.toString() + "px";
    root.style.left = left.toString() + "px";
  }
  resize();
  window.onresize = resize;
}

// packages/ticker/Ticker.js
function Ticker(props) {
  const fps = props && props.fps ? props.fps : 60;
  let startTime = performance.now();
  let accumulator = 0;
  let totalUpdatersUID = 0;
  let totalRenderersUID = 0;
  let delta = 1e3 / fps;
  let step = 1 / fps;
  let elapsed = 0;
  let focused = true;
  let updaters = {};
  let renderers = {};
  window.addEventListener("focus", () => {
    onVisibilityChange(true);
  });
  window.addEventListener("blur", () => {
    onVisibilityChange(false);
  });
  function onVisibilityChange(visible) {
    focused = visible;
    if (props && props.onVisibilityChange)
      props.onVisibilityChange(visible);
  }
  tick();
  function tick() {
    requestAnimationFrame(tick);
    if (!focused) {
      return;
    }
    const current = performance.now();
    elapsed = current - startTime;
    startTime = current;
    if (elapsed > 1e3) {
      return;
    }
    accumulator += elapsed;
    while (accumulator >= delta) {
      update(step);
      accumulator -= delta;
    }
    render(step);
  }
  function update(dt) {
    for (let id in updaters) {
      updaters[id](dt);
    }
  }
  function render(dt) {
    for (let id in renderers) {
      renderers[id](dt);
    }
  }
  function add(type, callback) {
    let total = type === "update" ? totalUpdatersUID : totalRenderersUID;
    const obj = type === "update" ? updaters : renderers;
    total += 1;
    if (!obj[total]) {
      obj[total] = callback;
    }
    if (type === "update") {
      totalUpdatersUID = total;
    } else {
      totalRenderersUID = total;
    }
    return total;
  }
  function remove(id, type) {
    const obj = type === "update" ? updaters : renderers;
    if (obj[id]) {
      delete obj[id];
    }
  }
  return {
    add,
    remove
  };
}

// packages/timer/Timer.js
function Timer() {
  const timeouts = {};
  const chainedTimeouts = {};
  let totalTimeoutsUID = 0;
  let totalCTimeoutsUID = 0;
  let paused = false;
  function update() {
    paused = false;
    updateTimeouts();
    updateChainedTimeouts();
  }
  function updateTimeouts() {
    for (let i in timeouts) {
      const t = timeouts[i];
      const currentTime = Date.now();
      const elapsed = currentTime - t.startTime;
      if (t.onStart)
        t.onStart();
      if (elapsed >= t.time) {
        killWait(Number(i));
        t.onComplete();
      }
    }
  }
  function updateChainedTimeouts() {
    for (let i in chainedTimeouts) {
      const timers = chainedTimeouts[i];
      Object.values(timers).forEach((t) => {
        if (t.ended) {
          return;
        }
        const currentTime = Date.now();
        const elapsed = currentTime - t.startTime;
        if (t.onStart)
          t.onStart();
        if (elapsed >= t.time) {
          t.onComplete();
          t.ended = true;
        }
      });
      const hasEnded = Object.values(timers).every((v) => v.ended);
      if (hasEnded)
        killChain(Number(i));
    }
  }
  function pause(time) {
    if (paused) {
      updatePausedTimeouts(time);
      updatePausedChainedTimeouts(time);
      return;
    }
    paused = true;
    pauseTimeouts();
    pauseChainedTimeouts();
  }
  function updatePausedTimeouts(time) {
    for (let i in timeouts) {
      const t = timeouts[i];
      t.startTime = time;
    }
  }
  function updatePausedChainedTimeouts(time) {
    for (let i in chainedTimeouts) {
      const timers = chainedTimeouts[i];
      Object.values(timers).forEach((t) => {
        if (t.ended) {
          return;
        }
        t.startTime = time;
      });
    }
  }
  function pauseTimeouts() {
    for (let i in timeouts) {
      const t = timeouts[i];
      const elapsed = Date.now() - t.startTime;
      let dt = t.time;
      dt -= elapsed;
      t.time = dt;
    }
  }
  function pauseChainedTimeouts() {
    for (let i in chainedTimeouts) {
      const timers = chainedTimeouts[i];
      Object.values(timers).forEach((t) => {
        if (t.ended) {
          return;
        }
        const elapsed = Date.now() - t.startTime;
        let dt = t.time;
        dt -= elapsed;
        t.time = dt;
      });
    }
  }
  function wait(options) {
    totalTimeoutsUID += 1;
    if (timeouts[totalTimeoutsUID]) {
      return;
    }
    timeouts[totalTimeoutsUID] = {
      startTime: Date.now(),
      time: options.time,
      onStart: options.onStart,
      onComplete: options.onComplete
    };
    return totalTimeoutsUID;
  }
  function chain(timers) {
    totalCTimeoutsUID += 1;
    if (chainedTimeouts[totalCTimeoutsUID]) {
      return;
    }
    chainedTimeouts[totalCTimeoutsUID] = {};
    timers.forEach((props, i) => {
      const time = timers.filter((_, _i) => _i <= i).reduce((n, { time: time2 }) => n + time2, 0);
      chainedTimeouts[totalCTimeoutsUID][i] = {
        startTime: Date.now(),
        time,
        onStart: props.onStart,
        onComplete: props.onComplete
      };
    });
    return totalCTimeoutsUID;
  }
  function killWait(id) {
    if (timeouts[id]) {
      delete timeouts[id];
      return;
    }
  }
  function killChain(id) {
    if (chainedTimeouts[id]) {
      removeChainedTimeouts(id);
      return;
    }
  }
  function removeChainedTimeouts(key) {
    const timers = chainedTimeouts[key];
    for (let _id in timers) {
      delete timers[_id];
    }
    delete chainedTimeouts[key];
  }
  function kill() {
    for (let t in timeouts) {
      delete timeouts[t];
    }
    for (let t in chainedTimeouts) {
      removeChainedTimeouts(Number(t));
    }
  }
  return {
    wait,
    chain,
    kill,
    killWait,
    killChain,
    update,
    pause
  };
}

// packages/utils/math.js
function randomInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}
function getArrayRandomValue(array) {
  return array[Math.floor(Math.random() * array.length)];
}

// src/Events.js
var PLAYER_EVENTS = {
  ENTRY_LANDED: "PLAYER_EVENTS.ENTRY_LANDED"
};

// packages/debug/Debug.js
function Debug() {
  const data = {};
  function add(name, value) {
    data[name] = value;
  }
  window["_debug"] = data;
  return {
    add
  };
}

// node_modules/eventemitter3/index.mjs
var import_index = __toESM(require_eventemitter3(), 1);
var eventemitter3_default = import_index.default;

// src/types/game.types.js
var Emitter = eventemitter3_default;

// src/Game.js
var Game = (() => {
  return {
    debug: Debug(),
    emitter: new Emitter()
  };
})();

// packages/collisions/collision.js
function hitTest(target, source) {
  const r1 = target;
  const r2 = source;
  const dx = r1.x + r1.halfWidth() - (r2.x + r2.halfWidth());
  const dy = r1.y + r1.halfHeight() - (r2.y + r2.halfHeight());
  const dwidth = (r1.width + r2.width) / 2;
  const dheight = (r1.height + r2.height) / 2;
  const crossWidth = dwidth * dy;
  const crossHeight = dheight * dx;
  const collision = {
    hit: false,
    side: "none"
  };
  if (Math.abs(dx) <= dwidth && Math.abs(dy) <= dheight) {
    if (crossWidth > crossHeight) {
      collision.side = crossWidth > -crossHeight ? "bottom" : "left";
    } else {
      collision.side = crossWidth > -crossHeight ? "right" : "top";
    }
  }
  collision.hit = Boolean(
    r1.x < r2.x + r2.width && r1.x + r1.width > r2.x && r1.y < r2.y + r2.height && r1.y + r1.height > r2.y
  );
  return collision;
}

// src/gameObjects/ArrowsBundle.js
function ArrowsBundle(x = 0, y = 0) {
  const world = Game.root.playerGroup;
  const src = getAnimFrames("arrows_bundle");
  const o = AnimatedSprite(src);
  o.x = x;
  o.y = y;
  o.fps = 12;
  o.loop = true;
  o.play();
  world.addChild(o);
  let defaultGravity = 0.4;
  let gravity = defaultGravity;
  let vy = 0;
  let ay = 0;
  let ax = 0;
  let vx = 0;
  let grounded = false;
  let falling = false;
  let jumping = false;
  let jumpForce = 6;
  const updateId = Game.ticker.add("update", update.bind(this));
  const _destroy = o.destroy;
  jump();
  o.destroy = () => {
    _destroy();
    Game.ticker.remove(updateId, "update");
  };
  function update() {
    vx += ax;
    o.x += vx;
    vy += ay;
    vy += gravity;
    o.y += vy;
    if (vy > 0) {
      falling = true;
    }
    vsGround();
    vsPlayer();
  }
  function jump() {
    const upForce = jumpForce;
    vy = -upForce;
    grounded = false;
    jumping = true;
  }
  function updateOnGround() {
    gravity = defaultGravity;
    grounded = true;
    falling = false;
    jumping = false;
  }
  function vsGround() {
    const colliders = Game.root.platforms;
    for (let i = 0; i < colliders.length; i++) {
      const platform = colliders[i];
      const test = hitTest(platform, o);
      if (test.hit) {
        if (test.side === "bottom" && vy >= 0) {
          updateOnGround();
          o.y = platform.y - o.height;
          vy = -gravity;
        } else if (test.side === "top" && vy <= 0) {
          vy = 0;
        } else if (test.side === "right" && vx >= 0) {
          o.x = platform.x - o.width;
          vx = 0;
        } else if (test.side === "left" && vx <= 0) {
          o.x = platform.x + platform.width;
          vx = 0;
        }
        if (test.side !== "bottom" && vy > 0) {
          grounded = false;
        }
      }
    }
  }
  function vsPlayer() {
    const player = Game.root.player;
    const test = hitTest(player.body, o);
    if (test.hit && player.health) {
      o.destroy();
      Game.root.setArrows(10);
    }
  }
}

// src/gameObjects/actor/Actor.js
function Actor(props) {
  const world = props.world || Game.root.world;
  const skin = MovieClip(props.animations);
  const body = Rectangle(
    props.body.width || 5,
    props.body.height || 16,
    props.body.color || "red",
    "none",
    0,
    0,
    0
  );
  skin.addTo(world);
  world.addChild(body);
  const o = {
    gravity: props.gravity || 0.4,
    health: 10,
    damage: 1,
    speedX: 2,
    speedY: 1,
    vy: 0,
    ax: 0,
    ay: 0,
    jumpForce: 6
  };
  o.skin = skin;
  o.body = body;
  o.vx = o.speedX;
  o.update = update;
  o.updateSkinBody = updateSkinToBody;
  o.updateGravity = updateGravity;
  o.updateVelocity = updateVelocity;
  o.updateOnGround = updateOnGround;
  o.vsPlatforms = vsPlatforms;
  o.flip = flip;
  o.isFlipH = isFlipH;
  o.flipHValue = flipHValue;
  o.jump = jump;
  o.receiveDamage = receiveDamage;
  o.kill = kill;
  o.destroy = destroy;
  o.showAttackHitArea = showAttackHitArea;
  o.removeAttackHitArea = removeAttackHitArea;
  o.attackHitArea = props.attackHitArea || Rectangle(16, 16, "red", "", 0, 0, 0);
  function update() {
    o.updateSkinBody();
    o.updateGravity();
    o.updateVelocity();
  }
  function updateGravity() {
    o.vy += o.ay;
    o.vy += o.gravity;
    body.y += o.vy;
  }
  function updateVelocity() {
    o.vx += o.ax;
    body.x += o.vx;
  }
  function updateOnGround() {
    o.gravity = props.gravity;
    o.grounded = true;
    o.falling = false;
    o.jumping = false;
  }
  function updateSkinToBody() {
    if (skin) {
      skin.x = body.x - skin.halfWidth() + body.halfWidth();
      skin.y = body.y - body.height;
    }
  }
  function jump(force) {
    const upForce = force || o.jumpForce;
    o.vy = -upForce;
    o.grounded = false;
    o.jumping = true;
  }
  function receiveDamage(amount, from) {
    amount = amount || o.damage;
    if (o.dead) {
      return;
    }
    if (o.onReceiveDamage)
      o.onReceiveDamage(amount, from);
    o.health -= amount;
    if (o.health <= 0) {
      o.health = 0;
      o.kill();
    }
  }
  function kill() {
    o.dead = true;
  }
  function destroy() {
    o.skin.destroy();
    o.body.destroy();
    o.attackHitArea.destroy();
    o.health = 0;
    o.destroyed = true;
    kill();
  }
  function vsPlatforms(colliders) {
    for (let i = 0; i < colliders.length; i++) {
      const platform = colliders[i];
      const test = hitTest(platform, body);
      if (test.hit) {
        if (test.side === "bottom" && this.vy >= 0) {
          o.updateOnGround();
          body.y = platform.y - body.height;
          o.vy = -o.gravity;
        } else if (test.side === "top" && o.vy <= 0) {
          o.vy = 0;
        } else if (test.side === "right" && o.vx >= 0) {
          o.body.x = platform.x - o.body.width;
          o.vx = 0;
        } else if (test.side === "left" && o.vx <= 0) {
          o.body.x = platform.x + platform.width;
          o.vx = 0;
        }
        if (test.side !== "bottom" && o.vy > 0) {
          o.grounded = false;
        }
      }
    }
  }
  function showAttackHitArea(p) {
    if (o.attackHitArea.parent) {
      return;
    }
    o.attackHitArea.width = p.w || o.attackHitArea.width;
    o.attackHitArea.height = p.h || o.attackHitArea.height;
    world.addChild(o.attackHitArea);
    o.attackHitArea.x = !o.isFlipH() ? p.x : p.flipX;
    o.attackHitArea.y = p.y;
  }
  function removeAttackHitArea() {
    if (o.attackHitArea.parent) {
      world.removeChild(o.attackHitArea);
      o.attackHitArea.width = 16;
      o.attackHitArea.width = 16;
    }
  }
  function isFlipH() {
    return o.flipH === "left";
  }
  function flip(side) {
    o.flipH = side;
    if (side === "right") {
      if (skin.scaleX < 0) {
        skin.scaleX *= -1;
      }
    } else {
      if (skin.scaleX > 0) {
        skin.scaleX *= -1;
      }
    }
  }
  function flipHValue() {
    return o.flipH === "right" ? 1 : -1;
  }
  return (
    /** @type {TActor} */
    o
  );
}

// src/gameObjects/actor/Enemy.js
var ENEMY_ACTIONS = (
  /** @type {TEnemyActions[]}*/
  ["chase", "run-away", "stand", "attack", "none"]
);
function Enemy(options) {
  const world = Game.root.enemiesGroup;
  const timer = Game.timer;
  const enemyNature = options ? options.enemyNature || "none" : "none";
  const enemyType = options ? options.enemyType || "e1" : "e1";
  const o = Actor({
    world,
    gravity: 0.4,
    body: {
      width: 5,
      height: 16,
      color: "red"
    },
    animations: {
      "idle": {
        frames: getAnimFrames(`${enemyType}/idle/`),
        fps: 12
      },
      "run": {
        frames: getAnimFrames(`${enemyType}/run`),
        fps: 12
      },
      "attack": {
        frames: getAnimFrames(`${enemyType}/attack`),
        loop: false,
        fps: 12
      },
      "dieFall": {
        frames: [
          `${enemyType}/die/die1.png`
        ],
        loop: false
      },
      "dieLand": {
        frames: [
          `${enemyType}/die/die2.png`
        ],
        loop: false
      },
      "jump": {
        frames: [
          `${enemyType}/run/run1.png`
        ],
        loop: false
      },
      "gotHit": {
        frames: getAnimFrames(`${enemyType}/got_hit/`),
        fps: 12,
        loop: false
      }
      // 'test': {
      // 	frames: /** @type {string[]} */([getAnimSheet('arrow_attack_0000')]),
      // 	loop: true
      // },
    }
  });
  let props = {
    name: "enemy",
    action: "chase"
  };
  let self = (
    /** @type {TEnemy} */
    Object.assign(o, props)
  );
  self.body.name = `${props.name}-body`;
  self.skin.name = `${props.name}-skin`;
  self.body.x = 10;
  self.body.y = 0;
  self.flipH = "right";
  self.body.alpha = 0;
  self.skin.alpha = 1;
  self.skin.play("idle");
  self.speedX = 1;
  self.scorePoint = 1;
  self.health = 3;
  self.attackHitArea.alpha = 0;
  const _update = self.update;
  const _kill = self.kill;
  const _receiveDamage = self.receiveDamage;
  const _destroy = self.destroy;
  const timers = [];
  self.skin.onAnimUpdate = (frameNumber, name) => {
    if (name === "attack") {
      if (enemyType === "e1") {
        showEenemy1AttackHitArea(frameNumber);
      }
      if (enemyType === "e2") {
        showEenemy2AttackHitArea(frameNumber);
      }
      if (enemyType === "e3") {
        showEenemy3AttackHitArea(frameNumber);
      }
    }
  };
  self.skin.onAnimComplete = (name) => {
    const isAttack2 = name.includes("attack");
    const isGotHit = name.includes("gotHit");
    if (isAttack2) {
      self.attacking = false;
      self.removeAttackHitArea();
      resetAction();
      autoDetectActions("stand");
    }
    if (isGotHit) {
      self.gotHit = false;
      resetAction();
      autoDetectActions("stand");
    }
  };
  self.update = () => {
    _update();
    if (!self.dead) {
      if (isDetectActions()) {
        autoDetectActions();
      } else {
        updateActions();
      }
      updateMovement();
    }
    vsWalls();
    vsAttackPlayer();
    self.vsPlatforms(Game.root.platforms);
    updateOnDie();
  };
  self.kill = () => {
    if (!self.dead) {
      const spawnArrows = getArrayRandomValue([0, 1, 0, 0, 1, 0]);
      if (spawnArrows) {
        ArrowsBundle(self.body.x, self.body.y);
      }
      Game.root.setScore(self.scorePoint);
    }
    _kill();
    Game.sound.playSFX("die");
    self.skin.play("dieFall");
    self.jump(3);
    self.vx = -self.flipHValue() * 1;
  };
  self.receiveDamage = (amount, from) => {
    if (self.attacking) {
      self.disableGotHit = false;
      self.gotHit = false;
      self.vx = 0;
      self.removeAttackHitArea();
      resetAction();
      return;
    }
    if (self.gotHit) {
      return;
    }
    _receiveDamage(amount, from);
  };
  self.onReceiveDamage = () => {
    if (!self.gotHit && self.skin.currentAnimName !== "gotHit") {
      self.gotHit = true;
      self.skin.play("gotHit");
      self.vx = 0;
      if (isBehindPlayer()) {
        if (self.isFlipH()) {
          self.flip("right");
        }
      } else {
        if (!self.isFlipH()) {
          self.flip("left");
        }
      }
      self.jump(3);
      self.vx = -self.flipHValue() * 0.5;
      killTimers();
    }
  };
  self.updateSkinBody = () => {
    const skin = self.skin;
    const body = self.body;
    if (skin) {
      skin.x = body.x - skin.halfWidth() + body.halfWidth();
      skin.y = body.y - skin.height + body.height;
    }
  };
  self.destroy = () => {
    _destroy();
    killTimers();
  };
  function updateOnDie() {
    if (self.dead) {
      if (self.grounded) {
        self.vx = 0;
        self.skin.play("dieLand");
        const t = timer.wait({
          time: 1e3,
          onComplete: () => {
            self.destroy();
          }
        });
        timers.push(t);
      }
    }
  }
  function showEenemy1AttackHitArea(frameNumber) {
    const y = self.attackHitArea.y = self.body.y - self.body.halfHeight() + 5;
    if (frameNumber === 1) {
      self.showAttackHitArea({
        x: self.body.x + self.attackHitArea.halfWidth() - 5,
        flipX: self.body.x - self.attackHitArea.width,
        y
      });
    }
    if (frameNumber === 3) {
      self.removeAttackHitArea();
    }
    if (frameNumber === 6) {
      self.showAttackHitArea({
        x: self.body.x + self.attackHitArea.halfWidth() - 5,
        flipX: self.body.x - self.attackHitArea.width,
        y
      });
    }
    if (frameNumber === 7) {
      self.removeAttackHitArea();
    }
  }
  function showEenemy2AttackHitArea(frameNumber) {
    const y = self.attackHitArea.y = self.body.y - self.body.halfHeight() + 5;
    if (frameNumber === 2) {
      self.showAttackHitArea({
        x: self.body.x + self.attackHitArea.halfWidth(),
        flipX: self.body.x - self.attackHitArea.width - 5,
        y
      });
    }
    if (frameNumber === 4) {
      self.removeAttackHitArea();
    }
    if (frameNumber === 6) {
      self.showAttackHitArea({
        x: self.body.x + self.attackHitArea.halfWidth(),
        flipX: self.body.x - self.attackHitArea.width - 5,
        y
      });
    }
    if (frameNumber === 7) {
      self.removeAttackHitArea();
    }
  }
  function showEenemy3AttackHitArea(frameNumber) {
    const y = self.attackHitArea.y = self.body.y - self.body.height;
    const w = 30;
    const h = 30;
    if (frameNumber === 2) {
      self.showAttackHitArea({
        x: self.body.x + self.attackHitArea.halfWidth() - 5,
        flipX: self.body.x - self.attackHitArea.width - 12,
        y,
        w,
        h
      });
    }
    if (frameNumber === 4) {
      self.removeAttackHitArea();
    }
    if (frameNumber === 5) {
      self.showAttackHitArea({
        x: self.body.x + self.attackHitArea.halfWidth() - 5,
        flipX: self.body.x - self.attackHitArea.width - 12,
        y,
        w,
        h
      });
    }
    if (frameNumber === 7) {
      self.removeAttackHitArea();
    }
  }
  function updateMovement() {
    if (self.vy > 0) {
      self.falling = true;
    }
  }
  function updateActions() {
    if (self.gotHit) {
      return;
    }
    switch (self.action) {
      case "chase":
        actionChase();
        break;
      case "attack":
        actionAttack();
        break;
      case "run-away":
        actionRunAway();
        break;
      case "stand":
        actionStand();
        break;
    }
  }
  function autoDetectActions(forcedAction) {
    if (self.gotHit) {
      return;
    }
    let actions = ENEMY_ACTIONS;
    if (enemyNature === "attacker") {
      actions = ENEMY_ACTIONS.filter((a) => a !== "run-away");
    }
    let action = forcedAction || getArrayRandomValue(actions);
    if (!isWithinTargetRange() && action === "attack") {
      action = getArrayRandomValue(actions.filter((a) => a !== "attack"));
    }
    middlewareOnDetectActions(action);
    self.prevAction = self.action;
    self.action = action;
  }
  function middlewareOnDetectActions(action) {
    if (self.action === "none") {
      if (action === "stand") {
        const t = Game.timer.wait({
          time: 1e3,
          onComplete: () => {
            resetAction();
          }
        });
        timers.push(t);
      }
      if (action === "run-away") {
        const flipSides = (
          /** @type {TFlipHSide[]} */
          ["left", "right"]
        );
        const randSide = getArrayRandomValue(flipSides);
        self.flip(randSide);
        const t = Game.timer.wait({
          time: 3e3,
          onComplete: () => {
            resetAction();
          }
        });
        timers.push(t);
      }
    }
  }
  function actionChase() {
    if (self.grounded) {
      self.skin.play("run");
    }
    if (isBehindPlayer()) {
      self.flip("right");
    } else {
      self.flip("left");
    }
    if (!isWithinTargetRange()) {
      self.vx = self.flipHValue() * self.speedX;
      followConstant(self.body, Game.root.player.body, self.speedX, true, false);
    } else {
      resetAction();
      autoDetectActions("attack");
    }
  }
  function actionAttack() {
    if (isAttack()) {
      if (self.grounded) {
        attack();
        self.skin.play("attack");
      }
    }
  }
  function actionRunAway() {
    if (self.grounded) {
      self.skin.play("run");
    }
    self.vx = self.flipHValue() * self.speedX;
  }
  function actionStand() {
    self.vx *= 0.3;
    if (self.grounded) {
      self.skin.play("idle");
    }
  }
  function attack() {
    self.attacking = true;
    self.vx = 0;
  }
  function vsWalls() {
    for (let i = 0; i < Game.root.walls.length; i++) {
      const wall = Game.root.walls[i];
      const test = hitTest(wall, self.body);
      if (test.hit) {
        if (test.side === "right" && self.vx >= 0) {
          self.flip("left");
        } else if (test.side === "left" && self.vx <= 0) {
          self.flip("right");
        }
      }
    }
  }
  function vsAttackPlayer() {
    const player = Game.root.player;
    if (!player || !self.attackHitArea.parent) {
      return;
    }
    const test = hitTest(player.body, self.attackHitArea);
    if (test.hit && player.health) {
      player.receiveDamage(1, self);
    }
  }
  function killTimers() {
    timers.forEach((t) => {
      Game.timer.killWait(t);
    });
    timers.length = 0;
  }
  function getOppositeFlipH() {
    const side = self.flipH === "left" ? "right" : "left";
    return side;
  }
  function resetAction() {
    self.action = "none";
    self.attacking = false;
    killTimers();
  }
  function isAttack() {
    return !self.attacking;
  }
  function isJump() {
    return !self.jumping;
  }
  function isBehindPlayer() {
    return Boolean(self.body.x <= Game.root.player.body.x);
  }
  function isDetectActions() {
    return self.action === "none";
  }
  function isWithinTargetRange(range = 20) {
    const d = distance(self.body, Game.root.player.body);
    return Boolean(d <= range);
  }
  return self;
}

// src/gameObjects/Arrow.js
function Arrow(x, y, direction) {
  const world = Game.root.playerGroup;
  const src = getAnimFrames("arrow.")[0];
  const o = Sprite(src);
  o.x = x;
  o.y = y;
  world.addChild(o);
  let speedX = 4;
  let vx = speedX;
  let ax = 0;
  Game.debug.add("arrow", o);
  const updateId = Game.ticker.add("update", update.bind(this));
  function update() {
    vx += ax;
    o.x += vx * direction;
    vsWalls();
    vsEnemies();
  }
  function vsWalls() {
    const walls = Game.root.walls;
    for (let i = 0; i < walls.length; i++) {
      const wall = walls[i];
      const test = hitTest(wall, o);
      if (test.hit) {
        destroy();
      }
    }
  }
  function vsEnemies() {
    const enemies = Game.root.enemies;
    for (let i = 0; i < enemies.length; i++) {
      const e = enemies[i];
      const test = hitTest(e.body, o);
      if (test.hit && e.health) {
        destroy();
        e.receiveDamage();
      }
    }
  }
  function vsActor(actor) {
    const test = hitTest(actor.body, o);
    if (test.hit) {
      destroy();
    }
  }
  function destroy() {
    o.destroy();
    Game.ticker.remove(updateId, "update");
  }
  return {
    vsWalls,
    vsActor,
    update,
    destroy
  };
}

// src/gameObjects/actor/Player.js
function Player() {
  const world = Game.root.playerGroup;
  const timer = Game.timer;
  const idle1Sheet = "player/idle1/idle";
  const idle2Sheet = "player/idle2/idle";
  const dieSheet = "player/die/die";
  const runSheet = "player/run/run";
  const gotHitSheet = "player/got_hit/";
  const swordAttack1Sheet = "player/sword_attack1/sword_attack";
  const swordAttack2Sheet = "player/sword_attack2/sword_attack";
  const swordAttack3Sheet = "player/sword_attack3/sword_attack";
  const arrowAttackSheet = "player/arrow_attack/arrow_attack";
  const idleAnimName = "idle1";
  const o = Actor({
    world,
    gravity: 0.4,
    body: {
      width: 5,
      height: 16,
      color: "red"
    },
    animations: {
      "idle1": {
        frames: getAnimFrames(idle1Sheet + 1),
        fps: 4
      },
      "idle2": {
        frames: getAnimFrames(idle2Sheet + 2),
        fps: 4
      },
      "run": {
        frames: getAnimFrames(runSheet)
      },
      "swordAttack1": {
        frames: getAnimFrames(swordAttack1Sheet + 1).concat(idle2Sheet + 2),
        loop: false,
        fps: 12
      },
      "swordAttack2": {
        frames: getAnimFrames(swordAttack2Sheet + 2).concat(idle2Sheet + 2),
        loop: false,
        fps: 12
      },
      "swordAttack3": {
        frames: getAnimFrames(swordAttack3Sheet + 3).concat(idle2Sheet + 2),
        loop: false,
        fps: 12
      },
      "arrowAttack": {
        frames: getAnimFrames(arrowAttackSheet).concat(arrowAttackSheet + "_0001"),
        loop: false,
        fps: 10
      },
      "dieFall": {
        frames: getAnimFrames(dieSheet + "_0000"),
        loop: false
      },
      "dieLand": {
        frames: getAnimFrames(dieSheet + "_0001"),
        loop: false
      },
      "jump": {
        frames: getAnimFrames(runSheet + "_0001"),
        loop: false
      },
      "entryFall": {
        frames: [
          "player/sky_fall/sky_fall_1.png",
          "player/sky_fall/sky_fall_2.png",
          "player/sky_fall/sky_fall_3.png"
        ],
        fps: 12,
        loop: false
      },
      "entryLand": {
        frames: [
          "player/sky_fall/sky_fall_4.png",
          "player/sky_fall/sky_fall_5.png",
          "player/sky_fall/sky_fall_6.png",
          "player/sky_fall/sky_fall_7.png",
          "player/sky_fall/sky_fall_8.png",
          "player/sky_fall/sky_fall_9.png"
        ],
        fps: 12,
        loop: false
      },
      "gotHit": {
        frames: getAnimFrames(gotHitSheet),
        fps: 12,
        loop: false
      }
      // 'test': {
      // 	frames: /** @type {string[]} */([getAnimFrames('arrow_attack_0000')]),
      // 	loop: true
      // },
    }
  });
  let swordAttackType = 1;
  let props = {
    name: "player"
  };
  let self = (
    /** @type {TPlayer} */
    Object.assign(o, props)
  );
  self.body.name = `${props.name}-body`;
  self.skin.name = `${props.name}-skin`;
  self.body.x = 464 / 2;
  self.body.y = 0;
  self.flipH = "right";
  self.body.alpha = 0;
  self.skin.alpha = 0;
  self.health = 5;
  self.skin.play(idleAnimName);
  const indicator = Rectangle(2, 4, "#9f183a", "", 0, 0, 0);
  indicator.alpha = 0;
  world.addChild(indicator);
  self.attackHitArea.alpha = 0;
  Game.root.setHealth(self.health);
  const _update = self.update;
  const _kill = self.kill;
  const _receiveDamage = self.receiveDamage;
  const _destroy = self.destroy;
  const timers = [];
  let isEntryFall = true;
  let isEntryLand = false;
  self.skin.onAnimUpdate = (frameNumber, name) => {
    const isArrowAttack = name.includes("arrow");
    if (isArrowAttack && frameNumber === 1 && Game.root.arrows() > 0) {
      spawnArrow();
    }
    if (name.includes("swordAttack")) {
      showAttack1HitArea(frameNumber);
    }
  };
  self.skin.onAnimComplete = (name) => {
    const isSwordAttack = name.includes("sword");
    const isArrowAttack = name.includes("arrow");
    const fall = name.includes("entryFall");
    const land = name.includes("entryLand");
    const isGotHit = name.includes("gotHit");
    if (isSwordAttack || isArrowAttack) {
      self.attacking = false;
      self.removeAttackHitArea();
    }
    if (isSwordAttack) {
      updateSwordAttackType();
    }
    if (fall) {
      isEntryFall = false;
      isEntryLand = true;
      self.skin.play("entryLand");
      Game.emitter.emit(PLAYER_EVENTS.ENTRY_LANDED);
    }
    if (land && isEntryLand) {
      isEntryLand = false;
      self.skin.play(idleAnimName);
    }
    if (isGotHit) {
      self.gotHit = false;
      killTimers();
      const t = timer.chain([
        {
          time: 100,
          onComplete: () => {
            self.skin.alpha = 0;
          }
        },
        {
          time: 100,
          onComplete: () => {
            self.skin.alpha = 1;
          }
        },
        {
          time: 100,
          onComplete: () => {
            self.skin.alpha = 0;
          }
        },
        {
          time: 100,
          onComplete: () => {
            self.skin.alpha = 1;
            self.disableGotHit = false;
          }
        }
      ]);
      timers.push(t);
    }
  };
  self.update = () => {
    if (isEntryFall) {
      self.skin.alpha = 1;
      self.skin.play("entryFall");
    }
    _update();
    if (!self.dead && !self.gotHit) {
      if (Game.root.enemies && Game.root.enemies.length >= 3) {
        indicator.alpha = 1;
      }
      updateMovement();
      updateAttack();
      if (self.attacking) {
        swordsVsEnemies();
      }
    }
    updateIndicator();
    self.vsPlatforms(Game.root.platforms);
    updateOnDie();
  };
  self.kill = () => {
    _kill();
    Game.sound.playSFX("die");
    self.skin.play("dieFall");
    self.jump(3);
    self.vx = -self.flipHValue() * 1;
  };
  self.receiveDamage = (amount, from) => {
    if (self.attacking) {
      self.disableGotHit = false;
      self.gotHit = false;
      self.vx = 0;
      self.removeAttackHitArea();
      return;
    }
    if (self.disableGotHit) {
      return;
    }
    _receiveDamage(amount, from);
    Game.root.setHealth(o.health);
  };
  self.onReceiveDamage = (amount, from) => {
    if (!self.gotHit && self.skin.currentAnimName !== "gotHit") {
      self.gotHit = true;
      self.disableGotHit = true;
      self.skin.play("gotHit");
      self.vx = 0;
      if (isBehindEnemy(from)) {
        if (self.isFlipH()) {
          self.flip("right");
        }
      } else {
        if (!self.isFlipH()) {
          self.flip("left");
        }
      }
      self.jump(3);
      self.vx = -self.flipHValue() * 0.5;
      killTimers();
    }
  };
  self.destroy = () => {
    _destroy();
    killTimers();
    indicator.destroy();
  };
  function updateOnDie() {
    if (self.dead) {
      if (self.grounded) {
        self.vx = 0;
        self.skin.play("dieLand");
        const t = timer.wait({
          time: 1e3,
          onComplete: () => {
            Game.root.setGameOver(true);
            self.destroy();
          }
        });
        timers.push(t);
      }
    }
  }
  function updateSwordAttackType() {
    if (isAttack()) {
      swordAttackType += 1;
      if (swordAttackType > 3) {
        swordAttackType = 1;
      }
    } else {
      swordAttackType = 1;
    }
  }
  function updateIndicator() {
    indicator.x = !self.isFlipH() ? self.body.x + indicator.halfWidth() : self.body.x + indicator.width;
    indicator.y = self.body.y - self.body.height;
  }
  function spawnArrow() {
    const x = !self.isFlipH() ? self.body.x + 3 : self.body.x - 10;
    Arrow(x, self.body.y + 2, self.flipHValue());
    Game.root.setArrows(-1);
  }
  function updateMovement() {
    if (self.vy > 0) {
      self.falling = true;
    }
    if (isEntryFall || isEntryLand) {
      self.vx = 0;
      return;
    }
    if (!self.attacking) {
      if (isMove()) {
        if (self.grounded) {
          self.skin.play("run");
        }
        self.vx = self.flipHValue() * self.speedX;
      }
      if (isMove("right")) {
        self.flip("right");
      } else if (isMove("left")) {
        self.flip("left");
      } else {
        self.vx *= 0.3;
        if (self.grounded) {
          self.skin.play(idleAnimName);
        }
      }
    }
    if (isJump()) {
      if (self.grounded && !self.attacking) {
        self.jump();
        self.skin.play("jump");
      }
    }
  }
  function updateAttack() {
    if (isAttack()) {
      if (self.grounded) {
        attack();
        if (isSlash()) {
          swordAttack();
        } else {
          arrowAttack();
        }
      }
    }
  }
  function attack() {
    self.attacking = true;
    self.vx = 0;
  }
  function swordAttack() {
    Game.sound.playSFX("slash");
    self.skin.play("swordAttack" + swordAttackType);
  }
  function arrowAttack() {
    Game.sound.playSFX("shoot");
    self.skin.play("arrowAttack");
  }
  function swordsVsEnemies() {
    if (!self.attackHitArea.parent) {
      return;
    }
    const enemies = Game.root.enemies;
    for (let i = 0; i < enemies.length; i++) {
      const e = enemies[i];
      const test = hitTest(e.body, self.attackHitArea);
      if (test.hit) {
        e.receiveDamage();
      }
    }
  }
  function showAttack1HitArea(frameNumber) {
    const y = self.attackHitArea.y = self.body.y - self.body.halfHeight() + 5;
    if (frameNumber === 1) {
      self.showAttackHitArea({
        x: self.body.x + self.attackHitArea.halfWidth() - 5,
        flipX: self.body.x - self.attackHitArea.width,
        y
      });
    }
    if (frameNumber === 2) {
      self.removeAttackHitArea();
    }
  }
  function killTimers() {
    timers.forEach((t) => {
      Game.timer.killWait(t);
    });
    timers.length = 0;
  }
  function isMove(side) {
    if (side) {
      return Game.key.isDown(side);
    }
    return Game.key.isDown("right") || Game.key.isDown("left");
  }
  function isAttack() {
    return !self.attacking && (isShoot() || isSlash());
  }
  function isShoot() {
    return Game.key.isDown("shoot");
  }
  function isSlash() {
    return Game.key.isDown("slash");
  }
  function isJump() {
    return !self.jumping && Game.key.isDown("jump");
  }
  function isBehindEnemy(enemy) {
    return Boolean(self.body.x <= enemy.body.x);
  }
  return self;
}

// src/gameObjects/Background.js
function Background(worlds) {
  const bg2Container = Group();
  const bg1Container = Group();
  bg1Container.name = "fg";
  bg2Container.name = "bg";
  worlds[0].addChild(bg2Container);
  worlds[1].addChild(bg1Container);
  createTrees("bg", 50, 3, 20, bg2Container);
  function createTrees(type, total, rand, xOffset, container) {
    for (let i = 0; i < total; i++) {
      const index = randomInt(1, rand);
      const src = getAnimFrame(`tree/tree${index}_${type}`);
      const tree = Sprite(src);
      tree.x = i * xOffset;
      container.addChild(tree);
    }
  }
  function updatePosition(displayObject, distance2, x, y) {
    displayObject.x = x / distance2 - 50;
  }
  function update(player) {
    updatePosition(bg1Container, 4, -player.body.x, -player.body.y);
    updatePosition(bg2Container, 8, -player.body.x, -player.body.y);
  }
  return {
    update
  };
}

// src/gameObjects/Grass.js
function Grass(world) {
  const grassContainer = Group();
  grassContainer.name = "grasses";
  world.addChild(grassContainer);
  create();
  function create() {
    for (let i = 0; i < 30; i++) {
      const index = randomInt(1, 2);
      const src = getAnimFrame(`grass/grass${index}`);
      const grass = Sprite(src);
      grass.x = i * 16;
      grassContainer.addChild(grass);
    }
    grassContainer.y = 65;
  }
  function update(player) {
    grassContainer.x = -player.body.x + 100;
    grassContainer.y = -player.body.y + 120;
  }
  return {
    update
  };
}

// src/gameObjects/Platforms.js
function Platforms(world) {
  const width = 464;
  const height = 120;
  const ground = Rectangle(width, 200, "blue", "", 0, 0, 80);
  ground.name = "ground";
  ground.alpha = 0;
  const wall1 = Rectangle(10, height, "black", "", 0, 0, 0);
  wall1.name = "wall1";
  wall1.alpha = 1;
  const wall2X = ground.x + ground.width;
  const wall2 = Rectangle(10, height, "black", "", 0, wall2X, 0);
  wall2.name = "wall2";
  wall1.alpha = 1;
  const colliders = [ground, wall1, wall2];
  const walls = [wall1, wall2];
  const w1 = {
    x: wall1.x,
    ax: 0,
    vx: 0,
    speedX: 2
  };
  const w2 = {
    x: wall2.x,
    ax: 0,
    vx: 0,
    speedX: 2
  };
  colliders.forEach((collider) => {
    collider.visible = true;
    world.addChild(collider);
  });
  function resetWallsPos() {
    wall1.x = ground.x - 10;
    wall2.x = wall2X;
  }
  function moveWalls(w1Dir = 1, w2Dir = -1) {
    w1.vx += w1.ax;
    w2.vx += w2.ax;
    w1.x += w1.vx;
    w2.x += w2.vx;
    w1.vx = w1Dir * w1.speedX;
    w2.vx = w2Dir * w2.speedX;
    wall1.x = w1.x;
    wall2.x = w2.x;
  }
  return {
    colliders,
    walls,
    resetWallsPos,
    moveWalls
  };
}

// src/GameSound.js
function GameSound(sound) {
  let music = 0;
  return {
    playMusic() {
      if (music && sound.playing(music)) {
        return;
      }
      music = sound.play("music");
      sound.loop(true, music);
    },
    playSFX(name) {
      sound.play(name);
    },
    pause(enable) {
      if (enable && music) {
        sound.play(music);
      } else {
        sound.pause(music);
      }
    }
  };
}

// src/utils.js
function zoom(id) {
  const div = getDivElementById(id);
  if (div.classList.contains("zoom")) {
    return;
  }
  div.classList.add("zoom");
  Game.timer.wait({
    time: 100,
    onComplete: () => {
      div.classList.remove("zoom");
    }
  });
}
function shakeScreen(id) {
  const type = "v-shake";
  const div = getDivElementById(id);
  if (div.classList.contains(type)) {
    return;
  }
  div.classList.add(type);
  Game.timer.wait({
    time: 300,
    onComplete: () => {
      div.classList.remove(type);
    }
  });
}

// src/main.js
Resizer({ width: 464, height: 120 }, getDivElementById("root"));
Boot(() => {
  Loader({
    tpsJSONFiles: [
      "media/images/game-images0.json"
    ],
    soundSprite: "media/sounds/out/game-sounds.json",
    tiledFiles: [
      "media/tiled/level1.json"
    ],
    onLoadSounds: (sound) => {
      Game.sound = GameSound(sound);
    },
    onLoadComplete: () => {
      getDivElementById("loader").style.display = "none";
      onload();
    }
  });
  Game.timer = Timer();
  Game.key = Keyboard({
    // TODO refactor KEyboard types
    "jump": { code: "k" },
    "left": { code: "a" },
    "right": { code: "d" },
    "slash": { code: "j" },
    "shoot": { code: "h" },
    "ok": { code: " " }
  });
  Game.ticker = Ticker({
    onVisibilityChange: (visible) => {
      Game.timer.pause(Date.now());
      if (Game.root) {
        Game.root.paused = visible;
      }
      if (Game.sound) {
        Game.sound.pause(visible);
      }
    }
  });
  Game.layers = CanvasLayers();
  const gameDiv = getDivElementById("game");
  const gameLayer = Game.layers.add("game-canvas", 464, 120);
  gameDiv.appendChild(gameLayer.canvas);
  function onload() {
    const totalArrows = 10;
    let score = 0;
    let arrows = 0;
    let gameStarted = false;
    let gameOver = false;
    let stage = Stage(464, 120);
    let world = Group();
    let playerGroup = Group();
    let enemiesGroup = Group();
    stage.addChild(world);
    const background = Background([world, world]);
    const grass = Grass(world);
    world.addChild(enemiesGroup);
    world.addChild(playerGroup);
    const platforms = Platforms(world);
    let player = null;
    let enemies = [];
    let enemySpawntimers = [];
    let enemiesInEachWaves = [0, 5, 10, 10, 8, 5];
    let totalKillsInEachWaves = enemiesInEachWaves.map(() => 0);
    let isMoveWalls = false;
    document.body.addEventListener("mousedown", onDown, false);
    Game.ticker.add("update", update.bind(this));
    Game.ticker.add("render", render.bind(this));
    Game.root = {
      wave: 0,
      paused: false,
      world,
      walls: platforms.walls,
      platforms: platforms.colliders,
      playerGroup,
      enemiesGroup,
      enemies,
      gameOver: () => {
        return gameOver;
      },
      gameStarted: () => {
        return gameStarted;
      },
      arrows: () => {
        return arrows;
      },
      score: () => {
        return score;
      },
      setGameOver: (over) => {
        gameOver = over;
        displayGameOver();
        killEnemySpawnTimers();
      },
      setScore: (value, replace) => {
        const ui = getDivElementById("score");
        score = replace ? value : score + value;
        ui.innerHTML = "kills: " + score;
        zoom("score");
        if (!value) {
          return;
        }
        if (Game.root.wave >= enemiesInEachWaves.length - 1) {
          Game.timer.wait({
            time: 3e3,
            onComplete: () => {
              gameOver = true;
              displayGameWin();
              killEnemySpawnTimers();
            }
          });
          return;
        }
        updateKills();
        const isUpgradeWave = enemiesInEachWaves[Game.root.wave] === totalKillsInEachWaves[Game.root.wave];
        if (isUpgradeWave) {
          moveWalls();
          upgradeWaves();
          initSpawnEnemies();
        }
      },
      setHealth: (value) => {
        const ui = getDivElementById("health-text");
        ui.innerHTML = "x " + value;
        zoom("health-item");
      },
      setArrows: (value, replace) => {
        const ui = getDivElementById("arrows-text");
        let newArrows = arrows + value;
        if (newArrows >= totalArrows) {
          newArrows = totalArrows;
        }
        arrows = replace ? value : newArrows;
        ui.innerHTML = "x " + arrows;
        zoom("arrows-item");
      }
    };
    Game.emitter.on(PLAYER_EVENTS.ENTRY_LANDED, () => {
      shakeScreen("game");
    });
    reset();
    function updateKills() {
      const wave = Game.root.wave;
      totalKillsInEachWaves[wave] = totalKillsInEachWaves[wave] + 1;
    }
    function upgradeWaves(time = 3e3) {
      Game.root.wave += 1;
      const wavesDiv = getDivElementById("waves");
      wavesDiv.style.display = "block";
      wavesDiv.innerHTML = "wave " + Game.root.wave;
      Game.timer.wait({
        time,
        onComplete: () => {
          wavesDiv.style.display = "none";
        }
      });
    }
    function initWaves() {
      Game.timer.wait({
        time: 1e3,
        onComplete: () => {
          upgradeWaves();
          initSpawnEnemies();
        }
      });
    }
    function hideHelp(time = 8e3) {
      Game.timer.wait({
        time,
        onComplete: () => {
          getDivElementById("bottom-bar").style.display = "none";
        }
      });
    }
    function displayGameOver() {
      getDivElementById("game-over").style.display = "block";
      const title = getDivElementById("go-title");
      title.innerHTML = "Game Over";
      hideHelp(0);
      const scoreUI = getDivElementById("go-score");
      scoreUI.innerHTML = "kills: " + score;
    }
    function displayGameWin() {
      const overDiv = getDivElementById("game-over");
      overDiv.style.display = "block";
      const title = getDivElementById("go-title");
      title.innerHTML = "You Win!";
    }
    function onDown() {
      if (!gameStarted) {
        getDivElementById("intro").style.display = "none";
        hideHelp();
        initWaves();
        Game.sound.playMusic();
        gameStarted = true;
      }
      if (gameOver) {
        destroyAll();
        reset();
        initWaves();
      }
    }
    function reset() {
      getDivElementById("game-over").style.display = "none";
      gameOver = false;
      Game.root.setArrows(totalArrows, true);
      Game.root.setScore(0, true);
      player = Player();
      Game.root.player = player;
      Game.root.wave = 0;
      totalKillsInEachWaves = totalKillsInEachWaves.map(() => 0);
      isMoveWalls = false;
      platforms.resetWallsPos();
    }
    function initSpawnEnemies(time = 2e3) {
      Game.timer.wait({
        time,
        onComplete: () => {
          spawnEnemies();
        }
      });
    }
    function spawnEnemies() {
      const walls = platforms.walls;
      const pt1 = walls[0].x + walls[0].width;
      const pt2 = walls[1].x - walls[1].width;
      const y1 = 0;
      const y2 = walls[0].halfHeight();
      for (let i = 0; i < enemiesInEachWaves[Game.root.wave]; i++) {
        const randTime = randomInt(1e3, 4e3);
        const t = Game.timer.wait({
          time: randTime * i,
          onComplete: () => {
            spawnEnemy(i);
          }
        });
        enemySpawntimers.push(t);
      }
      function spawnEnemy(index) {
        const x = getArrayRandomValue([pt1, pt2]);
        const y = getArrayRandomValue([y1, y2]);
        const eType = getArrayRandomValue(["e1", "e2", "e3"]);
        const eNature = getArrayRandomValue(["attacker", "none"]);
        const e = Enemy({ enemyType: eType, enemyNature: eNature });
        e.name = e.name + index;
        e.body.x = x;
        e.body.y = y;
        if (x === pt2) {
          e.flip("left");
        }
        enemies.push(e);
      }
    }
    function moveWalls() {
      if (isMoveWalls) {
        return;
      }
      isMoveWalls = true;
      Game.timer.wait({
        time: 300,
        onComplete: () => {
          isMoveWalls = false;
        }
      });
    }
    function killEnemySpawnTimers() {
      enemySpawntimers.forEach((t) => {
        Game.timer.killWait(t);
      });
      enemySpawntimers.length = 0;
    }
    function destroyAll() {
      if (player) {
        player.destroy();
        player = null;
      }
      enemies.forEach((e) => {
        e.destroy();
      });
      enemies.length = 0;
      killEnemySpawnTimers();
      Game.timer.kill();
      playerGroup.children.forEach((e) => {
        e.destroy();
      });
      enemiesGroup.children.forEach((e) => {
        e.destroy();
      });
    }
    function update(dt) {
      Game.timer.update();
      if (!gameStarted || gameOver) {
        return;
      }
      if (player) {
        player.update();
        background.update(player);
      }
      enemies.forEach((enemy, i) => {
        if (enemy.destroyed) {
          enemies.splice(i, 1);
        }
        enemy.update();
      });
      if (isMoveWalls) {
        platforms.moveWalls();
      }
    }
    function render(dt) {
      renderCanvasLayer(gameLayer, stage, dt);
    }
  }
});
/*! Bundled license information:

howler/dist/howler.js:
  (*!
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   *)
  (*!
   *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
   *  
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL2hvd2xlci9kaXN0L2hvd2xlci5qcyIsICJub2RlX21vZHVsZXMvZXZlbnRlbWl0dGVyMy9pbmRleC5qcyIsICJwYWNrYWdlcy9ib290L0Jvb3QuanMiLCAicGFja2FnZXMvYXNzZXRzLXN0b3JlL0Fzc2V0cy5qcyIsICJwYWNrYWdlcy91dGlscy9taXNjLmpzIiwgInBhY2thZ2VzL2NhbnZhcy1sYXllcnMvQ2FudmFzTGF5ZXJzLmpzIiwgInBhY2thZ2VzL2Rpc3BsYXlPYmplY3RzL0Rpc3BsYXlPYmplY3QuanMiLCAicGFja2FnZXMvZGlzcGxheU9iamVjdHMvU3ByaXRlLmpzIiwgInBhY2thZ2VzL2Rpc3BsYXlPYmplY3RzL0FuaW1hdGVkU3ByaXRlLmpzIiwgInBhY2thZ2VzL2Rpc3BsYXlPYmplY3RzL0dyb3VwLmpzIiwgInBhY2thZ2VzL2Rpc3BsYXlPYmplY3RzL01vdmllQ2xpcC5qcyIsICJwYWNrYWdlcy9kaXNwbGF5T2JqZWN0cy9SZWN0YW5nbGUuanMiLCAicGFja2FnZXMvZGlzcGxheU9iamVjdHMvU3RhZ2UuanMiLCAicGFja2FnZXMvaW5wdXRzL0tleWJvYXJkLmpzIiwgInBhY2thZ2VzL2h0dHAtcmVxdWVzdC9IdHRwUmVxdWVzdC5qcyIsICJwYWNrYWdlcy9sb2FkZXIvU291bmRMb2FkZXIuanMiLCAicGFja2FnZXMvbG9hZGVyL1RpbGVkTG9hZGVyLmpzIiwgInBhY2thZ2VzL2xvYWRlci9UUFNJbWFnZUxvYWRlci5qcyIsICJwYWNrYWdlcy9sb2FkZXIvTG9hZGVyLmpzIiwgInBhY2thZ2VzL3JlbmRlci9yZW5kZXJDYW52YXNMYXllci5qcyIsICJwYWNrYWdlcy9yZXNpemVyL1Jlc2l6ZXIuanMiLCAicGFja2FnZXMvdGlja2VyL1RpY2tlci5qcyIsICJwYWNrYWdlcy90aW1lci9UaW1lci5qcyIsICJwYWNrYWdlcy91dGlscy9tYXRoLmpzIiwgInNyYy9FdmVudHMuanMiLCAicGFja2FnZXMvZGVidWcvRGVidWcuanMiLCAibm9kZV9tb2R1bGVzL2V2ZW50ZW1pdHRlcjMvaW5kZXgubWpzIiwgInNyYy90eXBlcy9nYW1lLnR5cGVzLmpzIiwgInNyYy9HYW1lLmpzIiwgInBhY2thZ2VzL2NvbGxpc2lvbnMvY29sbGlzaW9uLmpzIiwgInNyYy9nYW1lT2JqZWN0cy9BcnJvd3NCdW5kbGUuanMiLCAic3JjL2dhbWVPYmplY3RzL2FjdG9yL0FjdG9yLmpzIiwgInNyYy9nYW1lT2JqZWN0cy9hY3Rvci9FbmVteS5qcyIsICJzcmMvZ2FtZU9iamVjdHMvQXJyb3cuanMiLCAic3JjL2dhbWVPYmplY3RzL2FjdG9yL1BsYXllci5qcyIsICJzcmMvZ2FtZU9iamVjdHMvQmFja2dyb3VuZC5qcyIsICJzcmMvZ2FtZU9iamVjdHMvR3Jhc3MuanMiLCAic3JjL2dhbWVPYmplY3RzL1BsYXRmb3Jtcy5qcyIsICJzcmMvR2FtZVNvdW5kLmpzIiwgInNyYy91dGlscy5qcyIsICJzcmMvbWFpbi5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLyohXG4gKiAgaG93bGVyLmpzIHYyLjIuNFxuICogIGhvd2xlcmpzLmNvbVxuICpcbiAqICAoYykgMjAxMy0yMDIwLCBKYW1lcyBTaW1wc29uIG9mIEdvbGRGaXJlIFN0dWRpb3NcbiAqICBnb2xkZmlyZXN0dWRpb3MuY29tXG4gKlxuICogIE1JVCBMaWNlbnNlXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICAvKiogR2xvYmFsIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgZ2xvYmFsIGNvbnRyb2xsZXIuIEFsbCBjb250YWluZWQgbWV0aG9kcyBhbmQgcHJvcGVydGllcyBhcHBseVxuICAgKiB0byBhbGwgc291bmRzIHRoYXQgYXJlIGN1cnJlbnRseSBwbGF5aW5nIG9yIHdpbGwgYmUgaW4gdGhlIGZ1dHVyZS5cbiAgICovXG4gIHZhciBIb3dsZXJHbG9iYWwgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmluaXQoKTtcbiAgfTtcbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBnbG9iYWwgSG93bGVyIG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBDcmVhdGUgYSBnbG9iYWwgSUQgY291bnRlci5cbiAgICAgIHNlbGYuX2NvdW50ZXIgPSAxMDAwO1xuXG4gICAgICAvLyBQb29sIG9mIHVubG9ja2VkIEhUTUw1IEF1ZGlvIG9iamVjdHMuXG4gICAgICBzZWxmLl9odG1sNUF1ZGlvUG9vbCA9IFtdO1xuICAgICAgc2VsZi5odG1sNVBvb2xTaXplID0gMTA7XG5cbiAgICAgIC8vIEludGVybmFsIHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9jb2RlY3MgPSB7fTtcbiAgICAgIHNlbGYuX2hvd2xzID0gW107XG4gICAgICBzZWxmLl9tdXRlZCA9IGZhbHNlO1xuICAgICAgc2VsZi5fdm9sdW1lID0gMTtcbiAgICAgIHNlbGYuX2NhblBsYXlFdmVudCA9ICdjYW5wbGF5dGhyb3VnaCc7XG4gICAgICBzZWxmLl9uYXZpZ2F0b3IgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lm5hdmlnYXRvcikgPyB3aW5kb3cubmF2aWdhdG9yIDogbnVsbDtcblxuICAgICAgLy8gUHVibGljIHByb3BlcnRpZXMuXG4gICAgICBzZWxmLm1hc3RlckdhaW4gPSBudWxsO1xuICAgICAgc2VsZi5ub0F1ZGlvID0gZmFsc2U7XG4gICAgICBzZWxmLnVzaW5nV2ViQXVkaW8gPSB0cnVlO1xuICAgICAgc2VsZi5hdXRvU3VzcGVuZCA9IHRydWU7XG4gICAgICBzZWxmLmN0eCA9IG51bGw7XG5cbiAgICAgIC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHRoZSBhdXRvIGF1ZGlvIHVubG9ja2VyLlxuICAgICAgc2VsZi5hdXRvVW5sb2NrID0gdHJ1ZTtcblxuICAgICAgLy8gU2V0dXAgdGhlIHZhcmlvdXMgc3RhdGUgdmFsdWVzIGZvciBnbG9iYWwgdHJhY2tpbmcuXG4gICAgICBzZWxmLl9zZXR1cCgpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgZ2xvYmFsIHZvbHVtZSBmb3IgYWxsIHNvdW5kcy5cbiAgICAgKiBAcGFyYW0gIHtGbG9hdH0gdm9sIFZvbHVtZSBmcm9tIDAuMCB0byAxLjAuXG4gICAgICogQHJldHVybiB7SG93bGVyL0Zsb2F0fSAgICAgUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgdm9sdW1lLlxuICAgICAqL1xuICAgIHZvbHVtZTogZnVuY3Rpb24odm9sKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuICAgICAgdm9sID0gcGFyc2VGbG9hdCh2b2wpO1xuXG4gICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGFuIEF1ZGlvQ29udGV4dCBjcmVhdGVkIHlldCwgcnVuIHRoZSBzZXR1cC5cbiAgICAgIGlmICghc2VsZi5jdHgpIHtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB2b2wgIT09ICd1bmRlZmluZWQnICYmIHZvbCA+PSAwICYmIHZvbCA8PSAxKSB7XG4gICAgICAgIHNlbGYuX3ZvbHVtZSA9IHZvbDtcblxuICAgICAgICAvLyBEb24ndCB1cGRhdGUgYW55IG9mIHRoZSBub2RlcyBpZiB3ZSBhcmUgbXV0ZWQuXG4gICAgICAgIGlmIChzZWxmLl9tdXRlZCkge1xuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2hlbiB1c2luZyBXZWIgQXVkaW8sIHdlIGp1c3QgbmVlZCB0byBhZGp1c3QgdGhlIG1hc3RlciBnYWluLlxuICAgICAgICBpZiAoc2VsZi51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgICAgc2VsZi5tYXN0ZXJHYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbmQgY2hhbmdlIHZvbHVtZSBmb3IgYWxsIEhUTUw1IGF1ZGlvIG5vZGVzLlxuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoIXNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgLy8gR2V0IGFsbCBvZiB0aGUgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgICAgICAgIHZhciBpZHMgPSBzZWxmLl9ob3dsc1tpXS5fZ2V0U291bmRJZHMoKTtcblxuICAgICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIGNoYW5nZSB0aGUgdm9sdW1lcy5cbiAgICAgICAgICAgIGZvciAodmFyIGo9MDsgajxpZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5faG93bHNbaV0uX3NvdW5kQnlJZChpZHNbal0pO1xuXG4gICAgICAgICAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnZvbHVtZSA9IHNvdW5kLl92b2x1bWUgKiB2b2w7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGYuX3ZvbHVtZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIG11dGluZyBhbmQgdW5tdXRpbmcgZ2xvYmFsbHkuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gbXV0ZWQgSXMgbXV0ZWQgb3Igbm90LlxuICAgICAqL1xuICAgIG11dGU6IGZ1bmN0aW9uKG11dGVkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGFuIEF1ZGlvQ29udGV4dCBjcmVhdGVkIHlldCwgcnVuIHRoZSBzZXR1cC5cbiAgICAgIGlmICghc2VsZi5jdHgpIHtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgc2VsZi5fbXV0ZWQgPSBtdXRlZDtcblxuICAgICAgLy8gV2l0aCBXZWIgQXVkaW8sIHdlIGp1c3QgbmVlZCB0byBtdXRlIHRoZSBtYXN0ZXIgZ2Fpbi5cbiAgICAgIGlmIChzZWxmLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgc2VsZi5tYXN0ZXJHYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUobXV0ZWQgPyAwIDogc2VsZi5fdm9sdW1lLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGFuZCBtdXRlIGFsbCBIVE1MNSBBdWRpbyBub2Rlcy5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIXNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xuICAgICAgICAgIC8vIEdldCBhbGwgb2YgdGhlIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2hvd2xzW2ldLl9nZXRTb3VuZElkcygpO1xuXG4gICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIG1hcmsgdGhlIGF1ZGlvIG5vZGUgYXMgbXV0ZWQuXG4gICAgICAgICAgZm9yICh2YXIgaj0wOyBqPGlkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5faG93bHNbaV0uX3NvdW5kQnlJZChpZHNbal0pO1xuXG4gICAgICAgICAgICBpZiAoc291bmQgJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUubXV0ZWQgPSAobXV0ZWQpID8gdHJ1ZSA6IHNvdW5kLl9tdXRlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBzdG9wcGluZyBhbGwgc291bmRzIGdsb2JhbGx5LlxuICAgICAqL1xuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBIb3dscyBhbmQgc3RvcCB0aGVtLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNlbGYuX2hvd2xzW2ldLnN0b3AoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVubG9hZCBhbmQgZGVzdHJveSBhbGwgY3VycmVudGx5IGxvYWRlZCBIb3dsIG9iamVjdHMuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIHVubG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICBmb3IgKHZhciBpPXNlbGYuX2hvd2xzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgc2VsZi5faG93bHNbaV0udW5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBBdWRpb0NvbnRleHQgdG8gbWFrZSBzdXJlIGl0IGlzIGZ1bGx5IHJlc2V0LlxuICAgICAgaWYgKHNlbGYudXNpbmdXZWJBdWRpbyAmJiBzZWxmLmN0eCAmJiB0eXBlb2Ygc2VsZi5jdHguY2xvc2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNlbGYuY3R4LmNsb3NlKCk7XG4gICAgICAgIHNlbGYuY3R4ID0gbnVsbDtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGZvciBjb2RlYyBzdXBwb3J0IG9mIHNwZWNpZmljIGV4dGVuc2lvbi5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGV4dCBBdWRpbyBmaWxlIGV4dGVudGlvbi5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIGNvZGVjczogZnVuY3Rpb24oZXh0KSB7XG4gICAgICByZXR1cm4gKHRoaXMgfHwgSG93bGVyKS5fY29kZWNzW2V4dC5yZXBsYWNlKC9eeC0vLCAnJyldO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXR1cCB2YXJpb3VzIHN0YXRlIHZhbHVlcyBmb3IgZ2xvYmFsIHRyYWNraW5nLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfc2V0dXA6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gS2VlcHMgdHJhY2sgb2YgdGhlIHN1c3BlbmQvcmVzdW1lIHN0YXRlIG9mIHRoZSBBdWRpb0NvbnRleHQuXG4gICAgICBzZWxmLnN0YXRlID0gc2VsZi5jdHggPyBzZWxmLmN0eC5zdGF0ZSB8fCAnc3VzcGVuZGVkJyA6ICdzdXNwZW5kZWQnO1xuXG4gICAgICAvLyBBdXRvbWF0aWNhbGx5IGJlZ2luIHRoZSAzMC1zZWNvbmQgc3VzcGVuZCBwcm9jZXNzXG4gICAgICBzZWxmLl9hdXRvU3VzcGVuZCgpO1xuXG4gICAgICAvLyBDaGVjayBpZiBhdWRpbyBpcyBhdmFpbGFibGUuXG4gICAgICBpZiAoIXNlbGYudXNpbmdXZWJBdWRpbykge1xuICAgICAgICAvLyBObyBhdWRpbyBpcyBhdmFpbGFibGUgb24gdGhpcyBzeXN0ZW0gaWYgbm9BdWRpbyBpcyBzZXQgdG8gdHJ1ZS5cbiAgICAgICAgaWYgKHR5cGVvZiBBdWRpbyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHRlc3QgPSBuZXcgQXVkaW8oKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNhbnBsYXl0aHJvdWdoIGV2ZW50IGlzIGF2YWlsYWJsZS5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGVzdC5vbmNhbnBsYXl0aHJvdWdoID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBzZWxmLl9jYW5QbGF5RXZlbnQgPSAnY2FucGxheSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICBzZWxmLm5vQXVkaW8gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLm5vQXVkaW8gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRlc3QgdG8gbWFrZSBzdXJlIGF1ZGlvIGlzbid0IGRpc2FibGVkIGluIEludGVybmV0IEV4cGxvcmVyLlxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHRlc3QgPSBuZXcgQXVkaW8oKTtcbiAgICAgICAgaWYgKHRlc3QubXV0ZWQpIHtcbiAgICAgICAgICBzZWxmLm5vQXVkaW8gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgICAvLyBDaGVjayBmb3Igc3VwcG9ydGVkIGNvZGVjcy5cbiAgICAgIGlmICghc2VsZi5ub0F1ZGlvKSB7XG4gICAgICAgIHNlbGYuX3NldHVwQ29kZWNzKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBmb3IgYnJvd3NlciBzdXBwb3J0IGZvciB2YXJpb3VzIGNvZGVjcyBhbmQgY2FjaGUgdGhlIHJlc3VsdHMuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9zZXR1cENvZGVjczogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuICAgICAgdmFyIGF1ZGlvVGVzdCA9IG51bGw7XG5cbiAgICAgIC8vIE11c3Qgd3JhcCBpbiBhIHRyeS9jYXRjaCBiZWNhdXNlIElFMTEgaW4gc2VydmVyIG1vZGUgdGhyb3dzIGFuIGVycm9yLlxuICAgICAgdHJ5IHtcbiAgICAgICAgYXVkaW9UZXN0ID0gKHR5cGVvZiBBdWRpbyAhPT0gJ3VuZGVmaW5lZCcpID8gbmV3IEF1ZGlvKCkgOiBudWxsO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWF1ZGlvVGVzdCB8fCB0eXBlb2YgYXVkaW9UZXN0LmNhblBsYXlUeXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICB2YXIgbXBlZ1Rlc3QgPSBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wZWc7JykucmVwbGFjZSgvXm5vJC8sICcnKTtcblxuICAgICAgLy8gT3BlcmEgdmVyc2lvbiA8MzMgaGFzIG1peGVkIE1QMyBzdXBwb3J0LCBzbyB3ZSBuZWVkIHRvIGNoZWNrIGZvciBhbmQgYmxvY2sgaXQuXG4gICAgICB2YXIgdWEgPSBzZWxmLl9uYXZpZ2F0b3IgPyBzZWxmLl9uYXZpZ2F0b3IudXNlckFnZW50IDogJyc7XG4gICAgICB2YXIgY2hlY2tPcGVyYSA9IHVhLm1hdGNoKC9PUFJcXC8oXFxkKykvZyk7XG4gICAgICB2YXIgaXNPbGRPcGVyYSA9IChjaGVja09wZXJhICYmIHBhcnNlSW50KGNoZWNrT3BlcmFbMF0uc3BsaXQoJy8nKVsxXSwgMTApIDwgMzMpO1xuICAgICAgdmFyIGNoZWNrU2FmYXJpID0gdWEuaW5kZXhPZignU2FmYXJpJykgIT09IC0xICYmIHVhLmluZGV4T2YoJ0Nocm9tZScpID09PSAtMTtcbiAgICAgIHZhciBzYWZhcmlWZXJzaW9uID0gdWEubWF0Y2goL1ZlcnNpb25cXC8oLio/KSAvKTtcbiAgICAgIHZhciBpc09sZFNhZmFyaSA9IChjaGVja1NhZmFyaSAmJiBzYWZhcmlWZXJzaW9uICYmIHBhcnNlSW50KHNhZmFyaVZlcnNpb25bMV0sIDEwKSA8IDE1KTtcblxuICAgICAgc2VsZi5fY29kZWNzID0ge1xuICAgICAgICBtcDM6ICEhKCFpc09sZE9wZXJhICYmIChtcGVnVGVzdCB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wMzsnKS5yZXBsYWNlKC9ebm8kLywgJycpKSksXG4gICAgICAgIG1wZWc6ICEhbXBlZ1Rlc3QsXG4gICAgICAgIG9wdXM6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cIm9wdXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG9nZzogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL29nZzsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBvZ2E6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgd2F2OiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3dhdjsgY29kZWNzPVwiMVwiJykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93YXYnKSkucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgYWFjOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIGNhZjogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtY2FmOycpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG00YTogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LW00YTsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL200YTsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2FhYzsnKSkucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgbTRiOiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtbTRiOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbTRiOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBtcDQ6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1tcDQ7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcDQ7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIHdlYmE6ICEhKCFpc09sZFNhZmFyaSAmJiBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3dlYm07IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSksXG4gICAgICAgIHdlYm06ICEhKCFpc09sZFNhZmFyaSAmJiBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3dlYm07IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSksXG4gICAgICAgIGRvbGJ5OiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXA0OyBjb2RlY3M9XCJlYy0zXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBmbGFjOiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtZmxhYzsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2ZsYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJylcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTb21lIGJyb3dzZXJzL2RldmljZXMgd2lsbCBvbmx5IGFsbG93IGF1ZGlvIHRvIGJlIHBsYXllZCBhZnRlciBhIHVzZXIgaW50ZXJhY3Rpb24uXG4gICAgICogQXR0ZW1wdCB0byBhdXRvbWF0aWNhbGx5IHVubG9jayBhdWRpbyBvbiB0aGUgZmlyc3QgdXNlciBpbnRlcmFjdGlvbi5cbiAgICAgKiBDb25jZXB0IGZyb206IGh0dHA6Ly9wYXVsYmFrYXVzLmNvbS90dXRvcmlhbHMvaHRtbDUvd2ViLWF1ZGlvLW9uLWlvcy9cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX3VubG9ja0F1ZGlvOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIE9ubHkgcnVuIHRoaXMgaWYgV2ViIEF1ZGlvIGlzIHN1cHBvcnRlZCBhbmQgaXQgaGFzbid0IGFscmVhZHkgYmVlbiB1bmxvY2tlZC5cbiAgICAgIGlmIChzZWxmLl9hdWRpb1VubG9ja2VkIHx8ICFzZWxmLmN0eCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlbGYuX2F1ZGlvVW5sb2NrZWQgPSBmYWxzZTtcbiAgICAgIHNlbGYuYXV0b1VubG9jayA9IGZhbHNlO1xuXG4gICAgICAvLyBTb21lIG1vYmlsZSBkZXZpY2VzL3BsYXRmb3JtcyBoYXZlIGRpc3RvcnRpb24gaXNzdWVzIHdoZW4gb3BlbmluZy9jbG9zaW5nIHRhYnMgYW5kL29yIHdlYiB2aWV3cy5cbiAgICAgIC8vIEJ1Z3MgaW4gdGhlIGJyb3dzZXIgKGVzcGVjaWFsbHkgTW9iaWxlIFNhZmFyaSkgY2FuIGNhdXNlIHRoZSBzYW1wbGVSYXRlIHRvIGNoYW5nZSBmcm9tIDQ0MTAwIHRvIDQ4MDAwLlxuICAgICAgLy8gQnkgY2FsbGluZyBIb3dsZXIudW5sb2FkKCksIHdlIGNyZWF0ZSBhIG5ldyBBdWRpb0NvbnRleHQgd2l0aCB0aGUgY29ycmVjdCBzYW1wbGVSYXRlLlxuICAgICAgaWYgKCFzZWxmLl9tb2JpbGVVbmxvYWRlZCAmJiBzZWxmLmN0eC5zYW1wbGVSYXRlICE9PSA0NDEwMCkge1xuICAgICAgICBzZWxmLl9tb2JpbGVVbmxvYWRlZCA9IHRydWU7XG4gICAgICAgIHNlbGYudW5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNjcmF0Y2ggYnVmZmVyIGZvciBlbmFibGluZyBpT1MgdG8gZGlzcG9zZSBvZiB3ZWIgYXVkaW8gYnVmZmVycyBjb3JyZWN0bHksIGFzIHBlcjpcbiAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjQxMTk2ODRcbiAgICAgIHNlbGYuX3NjcmF0Y2hCdWZmZXIgPSBzZWxmLmN0eC5jcmVhdGVCdWZmZXIoMSwgMSwgMjIwNTApO1xuXG4gICAgICAvLyBDYWxsIHRoaXMgbWV0aG9kIG9uIHRvdWNoIHN0YXJ0IHRvIGNyZWF0ZSBhbmQgcGxheSBhIGJ1ZmZlcixcbiAgICAgIC8vIHRoZW4gY2hlY2sgaWYgdGhlIGF1ZGlvIGFjdHVhbGx5IHBsYXllZCB0byBkZXRlcm1pbmUgaWZcbiAgICAgIC8vIGF1ZGlvIGhhcyBub3cgYmVlbiB1bmxvY2tlZCBvbiBpT1MsIEFuZHJvaWQsIGV0Yy5cbiAgICAgIHZhciB1bmxvY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhIHBvb2wgb2YgdW5sb2NrZWQgSFRNTDUgQXVkaW8gb2JqZWN0cyB0aGF0IGNhblxuICAgICAgICAvLyBiZSB1c2VkIGZvciBwbGF5aW5nIHNvdW5kcyB3aXRob3V0IHVzZXIgaW50ZXJhY3Rpb24uIEhUTUw1XG4gICAgICAgIC8vIEF1ZGlvIG9iamVjdHMgbXVzdCBiZSBpbmRpdmlkdWFsbHkgdW5sb2NrZWQsIGFzIG9wcG9zZWRcbiAgICAgICAgLy8gdG8gdGhlIFdlYkF1ZGlvIEFQSSB3aGljaCBvbmx5IG5lZWRzIGEgc2luZ2xlIGFjdGl2YXRpb24uXG4gICAgICAgIC8vIFRoaXMgbXVzdCBvY2N1ciBiZWZvcmUgV2ViQXVkaW8gc2V0dXAgb3IgdGhlIHNvdXJjZS5vbmVuZGVkXG4gICAgICAgIC8vIGV2ZW50IHdpbGwgbm90IGZpcmUuXG4gICAgICAgIHdoaWxlIChzZWxmLl9odG1sNUF1ZGlvUG9vbC5sZW5ndGggPCBzZWxmLmh0bWw1UG9vbFNpemUpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGF1ZGlvTm9kZSA9IG5ldyBBdWRpbygpO1xuXG4gICAgICAgICAgICAvLyBNYXJrIHRoaXMgQXVkaW8gb2JqZWN0IGFzIHVubG9ja2VkIHRvIGVuc3VyZSBpdCBjYW4gZ2V0IHJldHVybmVkXG4gICAgICAgICAgICAvLyB0byB0aGUgdW5sb2NrZWQgcG9vbCB3aGVuIHJlbGVhc2VkLlxuICAgICAgICAgICAgYXVkaW9Ob2RlLl91bmxvY2tlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIEFkZCB0aGUgYXVkaW8gbm9kZSB0byB0aGUgcG9vbC5cbiAgICAgICAgICAgIHNlbGYuX3JlbGVhc2VIdG1sNUF1ZGlvKGF1ZGlvTm9kZSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgc2VsZi5ub0F1ZGlvID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbnkgYXNzaWduZWQgYXVkaW8gbm9kZXMgYW5kIHVubG9jayB0aGVtLlxuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoIXNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgLy8gR2V0IGFsbCBvZiB0aGUgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgICAgICAgIHZhciBpZHMgPSBzZWxmLl9ob3dsc1tpXS5fZ2V0U291bmRJZHMoKTtcblxuICAgICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIHVubG9jayB0aGUgYXVkaW8gbm9kZXMuXG4gICAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8aWRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX2hvd2xzW2ldLl9zb3VuZEJ5SWQoaWRzW2pdKTtcblxuICAgICAgICAgICAgICBpZiAoc291bmQgJiYgc291bmQuX25vZGUgJiYgIXNvdW5kLl9ub2RlLl91bmxvY2tlZCkge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLl91bmxvY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUubG9hZCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRml4IEFuZHJvaWQgY2FuIG5vdCBwbGF5IGluIHN1c3BlbmQgc3RhdGUuXG4gICAgICAgIHNlbGYuX2F1dG9SZXN1bWUoKTtcblxuICAgICAgICAvLyBDcmVhdGUgYW4gZW1wdHkgYnVmZmVyLlxuICAgICAgICB2YXIgc291cmNlID0gc2VsZi5jdHguY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgICAgIHNvdXJjZS5idWZmZXIgPSBzZWxmLl9zY3JhdGNoQnVmZmVyO1xuICAgICAgICBzb3VyY2UuY29ubmVjdChzZWxmLmN0eC5kZXN0aW5hdGlvbik7XG5cbiAgICAgICAgLy8gUGxheSB0aGUgZW1wdHkgYnVmZmVyLlxuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZS5zdGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzb3VyY2Uubm90ZU9uKDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNvdXJjZS5zdGFydCgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhbGxpbmcgcmVzdW1lKCkgb24gYSBzdGFjayBpbml0aWF0ZWQgYnkgdXNlciBnZXN0dXJlIGlzIHdoYXQgYWN0dWFsbHkgdW5sb2NrcyB0aGUgYXVkaW8gb24gQW5kcm9pZCBDaHJvbWUgPj0gNTUuXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZi5jdHgucmVzdW1lID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgc2VsZi5jdHgucmVzdW1lKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXR1cCBhIHRpbWVvdXQgdG8gY2hlY2sgdGhhdCB3ZSBhcmUgdW5sb2NrZWQgb24gdGhlIG5leHQgZXZlbnQgbG9vcC5cbiAgICAgICAgc291cmNlLm9uZW5kZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzb3VyY2UuZGlzY29ubmVjdCgwKTtcblxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdW5sb2NrZWQgc3RhdGUgYW5kIHByZXZlbnQgdGhpcyBjaGVjayBmcm9tIGhhcHBlbmluZyBhZ2Fpbi5cbiAgICAgICAgICBzZWxmLl9hdWRpb1VubG9ja2VkID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFJlbW92ZSB0aGUgdG91Y2ggc3RhcnQgbGlzdGVuZXIuXG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHVubG9jaywgdHJ1ZSk7XG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB1bmxvY2ssIHRydWUpO1xuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdW5sb2NrLCB0cnVlKTtcbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdW5sb2NrLCB0cnVlKTtcblxuICAgICAgICAgIC8vIExldCBhbGwgc291bmRzIGtub3cgdGhhdCBhdWRpbyBoYXMgYmVlbiB1bmxvY2tlZC5cbiAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHNlbGYuX2hvd2xzW2ldLl9lbWl0KCd1bmxvY2snKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICAvLyBTZXR1cCBhIHRvdWNoIHN0YXJ0IGxpc3RlbmVyIHRvIGF0dGVtcHQgYW4gdW5sb2NrIGluLlxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHVubG9jaywgdHJ1ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHVubG9jaywgdHJ1ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHVubG9jaywgdHJ1ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdW5sb2NrLCB0cnVlKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBhbiB1bmxvY2tlZCBIVE1MNSBBdWRpbyBvYmplY3QgZnJvbSB0aGUgcG9vbC4gSWYgbm9uZSBhcmUgbGVmdCxcbiAgICAgKiByZXR1cm4gYSBuZXcgQXVkaW8gb2JqZWN0IGFuZCB0aHJvdyBhIHdhcm5pbmcuXG4gICAgICogQHJldHVybiB7QXVkaW99IEhUTUw1IEF1ZGlvIG9iamVjdC5cbiAgICAgKi9cbiAgICBfb2J0YWluSHRtbDVBdWRpbzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBSZXR1cm4gdGhlIG5leHQgb2JqZWN0IGZyb20gdGhlIHBvb2wgaWYgb25lIGV4aXN0cy5cbiAgICAgIGlmIChzZWxmLl9odG1sNUF1ZGlvUG9vbC5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX2h0bWw1QXVkaW9Qb29sLnBvcCgpO1xuICAgICAgfVxuXG4gICAgICAvLy5DaGVjayBpZiB0aGUgYXVkaW8gaXMgbG9ja2VkIGFuZCB0aHJvdyBhIHdhcm5pbmcuXG4gICAgICB2YXIgdGVzdFBsYXkgPSBuZXcgQXVkaW8oKS5wbGF5KCk7XG4gICAgICBpZiAodGVzdFBsYXkgJiYgdHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmICh0ZXN0UGxheSBpbnN0YW5jZW9mIFByb21pc2UgfHwgdHlwZW9mIHRlc3RQbGF5LnRoZW4gPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgIHRlc3RQbGF5LmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignSFRNTDUgQXVkaW8gcG9vbCBleGhhdXN0ZWQsIHJldHVybmluZyBwb3RlbnRpYWxseSBsb2NrZWQgYXVkaW8gb2JqZWN0LicpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBBdWRpbygpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gYWN0aXZhdGVkIEhUTUw1IEF1ZGlvIG9iamVjdCB0byB0aGUgcG9vbC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX3JlbGVhc2VIdG1sNUF1ZGlvOiBmdW5jdGlvbihhdWRpbykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gRG9uJ3QgYWRkIGF1ZGlvIHRvIHRoZSBwb29sIGlmIHdlIGRvbid0IGtub3cgaWYgaXQgaGFzIGJlZW4gdW5sb2NrZWQuXG4gICAgICBpZiAoYXVkaW8uX3VubG9ja2VkKSB7XG4gICAgICAgIHNlbGYuX2h0bWw1QXVkaW9Qb29sLnB1c2goYXVkaW8pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQXV0b21hdGljYWxseSBzdXNwZW5kIHRoZSBXZWIgQXVkaW8gQXVkaW9Db250ZXh0IGFmdGVyIG5vIHNvdW5kIGhhcyBwbGF5ZWQgZm9yIDMwIHNlY29uZHMuXG4gICAgICogVGhpcyBzYXZlcyBwcm9jZXNzaW5nL2VuZXJneSBhbmQgZml4ZXMgdmFyaW91cyBicm93c2VyLXNwZWNpZmljIGJ1Z3Mgd2l0aCBhdWRpbyBnZXR0aW5nIHN0dWNrLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfYXV0b1N1c3BlbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoIXNlbGYuYXV0b1N1c3BlbmQgfHwgIXNlbGYuY3R4IHx8IHR5cGVvZiBzZWxmLmN0eC5zdXNwZW5kID09PSAndW5kZWZpbmVkJyB8fCAhSG93bGVyLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiBhbnkgc291bmRzIGFyZSBwbGF5aW5nLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzZWxmLl9ob3dsc1tpXS5fd2ViQXVkaW8pIHtcbiAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8c2VsZi5faG93bHNbaV0uX3NvdW5kcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKCFzZWxmLl9ob3dsc1tpXS5fc291bmRzW2pdLl9wYXVzZWQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzZWxmLl9zdXNwZW5kVGltZXIpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX3N1c3BlbmRUaW1lcik7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIHNvdW5kIGhhcyBwbGF5ZWQgYWZ0ZXIgMzAgc2Vjb25kcywgc3VzcGVuZCB0aGUgY29udGV4dC5cbiAgICAgIHNlbGYuX3N1c3BlbmRUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghc2VsZi5hdXRvU3VzcGVuZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuX3N1c3BlbmRUaW1lciA9IG51bGw7XG4gICAgICAgIHNlbGYuc3RhdGUgPSAnc3VzcGVuZGluZyc7XG5cbiAgICAgICAgLy8gSGFuZGxlIHVwZGF0aW5nIHRoZSBzdGF0ZSBvZiB0aGUgYXVkaW8gY29udGV4dCBhZnRlciBzdXNwZW5kaW5nLlxuICAgICAgICB2YXIgaGFuZGxlU3VzcGVuc2lvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuc3RhdGUgPSAnc3VzcGVuZGVkJztcblxuICAgICAgICAgIGlmIChzZWxmLl9yZXN1bWVBZnRlclN1c3BlbmQpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzZWxmLl9yZXN1bWVBZnRlclN1c3BlbmQ7XG4gICAgICAgICAgICBzZWxmLl9hdXRvUmVzdW1lKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEVpdGhlciB0aGUgc3RhdGUgZ2V0cyBzdXNwZW5kZWQgb3IgaXQgaXMgaW50ZXJydXB0ZWQuXG4gICAgICAgIC8vIEVpdGhlciB3YXksIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSBzdGF0ZSB0byBzdXNwZW5kZWQuXG4gICAgICAgIHNlbGYuY3R4LnN1c3BlbmQoKS50aGVuKGhhbmRsZVN1c3BlbnNpb24sIGhhbmRsZVN1c3BlbnNpb24pO1xuICAgICAgfSwgMzAwMDApO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQXV0b21hdGljYWxseSByZXN1bWUgdGhlIFdlYiBBdWRpbyBBdWRpb0NvbnRleHQgd2hlbiBhIG5ldyBzb3VuZCBpcyBwbGF5ZWQuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9hdXRvUmVzdW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKCFzZWxmLmN0eCB8fCB0eXBlb2Ygc2VsZi5jdHgucmVzdW1lID09PSAndW5kZWZpbmVkJyB8fCAhSG93bGVyLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2VsZi5zdGF0ZSA9PT0gJ3J1bm5pbmcnICYmIHNlbGYuY3R4LnN0YXRlICE9PSAnaW50ZXJydXB0ZWQnICYmIHNlbGYuX3N1c3BlbmRUaW1lcikge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcbiAgICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5zdGF0ZSA9PT0gJ3N1c3BlbmRlZCcgfHwgc2VsZi5zdGF0ZSA9PT0gJ3J1bm5pbmcnICYmIHNlbGYuY3R4LnN0YXRlID09PSAnaW50ZXJydXB0ZWQnKSB7XG4gICAgICAgIHNlbGYuY3R4LnJlc3VtZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5zdGF0ZSA9ICdydW5uaW5nJztcblxuICAgICAgICAgIC8vIEVtaXQgdG8gYWxsIEhvd2xzIHRoYXQgdGhlIGF1ZGlvIGhhcyByZXN1bWVkLlxuICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc2VsZi5faG93bHNbaV0uX2VtaXQoJ3Jlc3VtZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHNlbGYuX3N1c3BlbmRUaW1lcikge1xuICAgICAgICAgIGNsZWFyVGltZW91dChzZWxmLl9zdXNwZW5kVGltZXIpO1xuICAgICAgICAgIHNlbGYuX3N1c3BlbmRUaW1lciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5zdGF0ZSA9PT0gJ3N1c3BlbmRpbmcnKSB7XG4gICAgICAgIHNlbGYuX3Jlc3VtZUFmdGVyU3VzcGVuZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cbiAgfTtcblxuICAvLyBTZXR1cCB0aGUgZ2xvYmFsIGF1ZGlvIGNvbnRyb2xsZXIuXG4gIHZhciBIb3dsZXIgPSBuZXcgSG93bGVyR2xvYmFsKCk7XG5cbiAgLyoqIEdyb3VwIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBhdWRpbyBncm91cCBjb250cm9sbGVyLlxuICAgKiBAcGFyYW0ge09iamVjdH0gbyBQYXNzZWQgaW4gcHJvcGVydGllcyBmb3IgdGhpcyBncm91cC5cbiAgICovXG4gIHZhciBIb3dsID0gZnVuY3Rpb24obykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFRocm93IGFuIGVycm9yIGlmIG5vIHNvdXJjZSBpcyBwcm92aWRlZC5cbiAgICBpZiAoIW8uc3JjIHx8IG8uc3JjLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5lcnJvcignQW4gYXJyYXkgb2Ygc291cmNlIGZpbGVzIG11c3QgYmUgcGFzc2VkIHdpdGggYW55IG5ldyBIb3dsLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNlbGYuaW5pdChvKTtcbiAgfTtcbiAgSG93bC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIG5ldyBIb3dsIGdyb3VwIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IG8gUGFzc2VkIGluIHByb3BlcnRpZXMgZm9yIHRoaXMgZ3JvdXAuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYW4gQXVkaW9Db250ZXh0IGNyZWF0ZWQgeWV0LCBydW4gdGhlIHNldHVwLlxuICAgICAgaWYgKCFIb3dsZXIuY3R4KSB7XG4gICAgICAgIHNldHVwQXVkaW9Db250ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldHVwIHVzZXItZGVmaW5lZCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9hdXRvcGxheSA9IG8uYXV0b3BsYXkgfHwgZmFsc2U7XG4gICAgICBzZWxmLl9mb3JtYXQgPSAodHlwZW9mIG8uZm9ybWF0ICE9PSAnc3RyaW5nJykgPyBvLmZvcm1hdCA6IFtvLmZvcm1hdF07XG4gICAgICBzZWxmLl9odG1sNSA9IG8uaHRtbDUgfHwgZmFsc2U7XG4gICAgICBzZWxmLl9tdXRlZCA9IG8ubXV0ZSB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX2xvb3AgPSBvLmxvb3AgfHwgZmFsc2U7XG4gICAgICBzZWxmLl9wb29sID0gby5wb29sIHx8IDU7XG4gICAgICBzZWxmLl9wcmVsb2FkID0gKHR5cGVvZiBvLnByZWxvYWQgPT09ICdib29sZWFuJyB8fCBvLnByZWxvYWQgPT09ICdtZXRhZGF0YScpID8gby5wcmVsb2FkIDogdHJ1ZTtcbiAgICAgIHNlbGYuX3JhdGUgPSBvLnJhdGUgfHwgMTtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9IG8uc3ByaXRlIHx8IHt9O1xuICAgICAgc2VsZi5fc3JjID0gKHR5cGVvZiBvLnNyYyAhPT0gJ3N0cmluZycpID8gby5zcmMgOiBbby5zcmNdO1xuICAgICAgc2VsZi5fdm9sdW1lID0gby52b2x1bWUgIT09IHVuZGVmaW5lZCA/IG8udm9sdW1lIDogMTtcbiAgICAgIHNlbGYuX3hociA9IHtcbiAgICAgICAgbWV0aG9kOiBvLnhociAmJiBvLnhoci5tZXRob2QgPyBvLnhoci5tZXRob2QgOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczogby54aHIgJiYgby54aHIuaGVhZGVycyA/IG8ueGhyLmhlYWRlcnMgOiBudWxsLFxuICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IG8ueGhyICYmIG8ueGhyLndpdGhDcmVkZW50aWFscyA/IG8ueGhyLndpdGhDcmVkZW50aWFscyA6IGZhbHNlLFxuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgYWxsIG90aGVyIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX2R1cmF0aW9uID0gMDtcbiAgICAgIHNlbGYuX3N0YXRlID0gJ3VubG9hZGVkJztcbiAgICAgIHNlbGYuX3NvdW5kcyA9IFtdO1xuICAgICAgc2VsZi5fZW5kVGltZXJzID0ge307XG4gICAgICBzZWxmLl9xdWV1ZSA9IFtdO1xuICAgICAgc2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcblxuICAgICAgLy8gU2V0dXAgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgc2VsZi5fb25lbmQgPSBvLm9uZW5kID8gW3tmbjogby5vbmVuZH1dIDogW107XG4gICAgICBzZWxmLl9vbmZhZGUgPSBvLm9uZmFkZSA/IFt7Zm46IG8ub25mYWRlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ubG9hZCA9IG8ub25sb2FkID8gW3tmbjogby5vbmxvYWR9XSA6IFtdO1xuICAgICAgc2VsZi5fb25sb2FkZXJyb3IgPSBvLm9ubG9hZGVycm9yID8gW3tmbjogby5vbmxvYWRlcnJvcn1dIDogW107XG4gICAgICBzZWxmLl9vbnBsYXllcnJvciA9IG8ub25wbGF5ZXJyb3IgPyBbe2ZuOiBvLm9ucGxheWVycm9yfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucGF1c2UgPSBvLm9ucGF1c2UgPyBbe2ZuOiBvLm9ucGF1c2V9XSA6IFtdO1xuICAgICAgc2VsZi5fb25wbGF5ID0gby5vbnBsYXkgPyBbe2ZuOiBvLm9ucGxheX1dIDogW107XG4gICAgICBzZWxmLl9vbnN0b3AgPSBvLm9uc3RvcCA/IFt7Zm46IG8ub25zdG9wfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ubXV0ZSA9IG8ub25tdXRlID8gW3tmbjogby5vbm11dGV9XSA6IFtdO1xuICAgICAgc2VsZi5fb252b2x1bWUgPSBvLm9udm9sdW1lID8gW3tmbjogby5vbnZvbHVtZX1dIDogW107XG4gICAgICBzZWxmLl9vbnJhdGUgPSBvLm9ucmF0ZSA/IFt7Zm46IG8ub25yYXRlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29uc2VlayA9IG8ub25zZWVrID8gW3tmbjogby5vbnNlZWt9XSA6IFtdO1xuICAgICAgc2VsZi5fb251bmxvY2sgPSBvLm9udW5sb2NrID8gW3tmbjogby5vbnVubG9ja31dIDogW107XG4gICAgICBzZWxmLl9vbnJlc3VtZSA9IFtdO1xuXG4gICAgICAvLyBXZWIgQXVkaW8gb3IgSFRNTDUgQXVkaW8/XG4gICAgICBzZWxmLl93ZWJBdWRpbyA9IEhvd2xlci51c2luZ1dlYkF1ZGlvICYmICFzZWxmLl9odG1sNTtcblxuICAgICAgLy8gQXV0b21hdGljYWxseSB0cnkgdG8gZW5hYmxlIGF1ZGlvLlxuICAgICAgaWYgKHR5cGVvZiBIb3dsZXIuY3R4ICE9PSAndW5kZWZpbmVkJyAmJiBIb3dsZXIuY3R4ICYmIEhvd2xlci5hdXRvVW5sb2NrKSB7XG4gICAgICAgIEhvd2xlci5fdW5sb2NrQXVkaW8oKTtcbiAgICAgIH1cblxuICAgICAgLy8gS2VlcCB0cmFjayBvZiB0aGlzIEhvd2wgZ3JvdXAgaW4gdGhlIGdsb2JhbCBjb250cm9sbGVyLlxuICAgICAgSG93bGVyLl9ob3dscy5wdXNoKHNlbGYpO1xuXG4gICAgICAvLyBJZiB0aGV5IHNlbGVjdGVkIGF1dG9wbGF5LCBhZGQgYSBwbGF5IGV2ZW50IHRvIHRoZSBsb2FkIHF1ZXVlLlxuICAgICAgaWYgKHNlbGYuX2F1dG9wbGF5KSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAncGxheScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYucGxheSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIExvYWQgdGhlIHNvdXJjZSBmaWxlIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICAgICAgaWYgKHNlbGYuX3ByZWxvYWQgJiYgc2VsZi5fcHJlbG9hZCAhPT0gJ25vbmUnKSB7XG4gICAgICAgIHNlbGYubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgYXVkaW8gZmlsZS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgbG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgdXJsID0gbnVsbDtcblxuICAgICAgLy8gSWYgbm8gYXVkaW8gaXMgYXZhaWxhYmxlLCBxdWl0IGltbWVkaWF0ZWx5LlxuICAgICAgaWYgKEhvd2xlci5ub0F1ZGlvKSB7XG4gICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdObyBhdWRpbyBzdXBwb3J0LicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSBvdXIgc291cmNlIGlzIGluIGFuIGFycmF5LlxuICAgICAgaWYgKHR5cGVvZiBzZWxmLl9zcmMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHNlbGYuX3NyYyA9IFtzZWxmLl9zcmNdO1xuICAgICAgfVxuXG4gICAgICAvLyBMb29wIHRocm91Z2ggdGhlIHNvdXJjZXMgYW5kIHBpY2sgdGhlIGZpcnN0IG9uZSB0aGF0IGlzIGNvbXBhdGlibGUuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc3JjLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBleHQsIHN0cjtcblxuICAgICAgICBpZiAoc2VsZi5fZm9ybWF0ICYmIHNlbGYuX2Zvcm1hdFtpXSkge1xuICAgICAgICAgIC8vIElmIGFuIGV4dGVuc2lvbiB3YXMgc3BlY2lmaWVkLCB1c2UgdGhhdCBpbnN0ZWFkLlxuICAgICAgICAgIGV4dCA9IHNlbGYuX2Zvcm1hdFtpXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHNvdXJjZSBpcyBhIHN0cmluZy5cbiAgICAgICAgICBzdHIgPSBzZWxmLl9zcmNbaV07XG4gICAgICAgICAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnTm9uLXN0cmluZyBmb3VuZCBpbiBzZWxlY3RlZCBhdWRpbyBzb3VyY2VzIC0gaWdub3JpbmcuJyk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBmaWxlIGV4dGVuc2lvbiBmcm9tIHRoZSBVUkwgb3IgYmFzZTY0IGRhdGEgVVJJLlxuICAgICAgICAgIGV4dCA9IC9eZGF0YTphdWRpb1xcLyhbXjssXSspOy9pLmV4ZWMoc3RyKTtcbiAgICAgICAgICBpZiAoIWV4dCkge1xuICAgICAgICAgICAgZXh0ID0gL1xcLihbXi5dKykkLy5leGVjKHN0ci5zcGxpdCgnPycsIDEpWzBdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZXh0KSB7XG4gICAgICAgICAgICBleHQgPSBleHRbMV0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb2cgYSB3YXJuaW5nIGlmIG5vIGV4dGVuc2lvbiB3YXMgZm91bmQuXG4gICAgICAgIGlmICghZXh0KSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdObyBmaWxlIGV4dGVuc2lvbiB3YXMgZm91bmQuIENvbnNpZGVyIHVzaW5nIHRoZSBcImZvcm1hdFwiIHByb3BlcnR5IG9yIHNwZWNpZnkgYW4gZXh0ZW5zaW9uLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBleHRlbnNpb24gaXMgYXZhaWxhYmxlLlxuICAgICAgICBpZiAoZXh0ICYmIEhvd2xlci5jb2RlY3MoZXh0KSkge1xuICAgICAgICAgIHVybCA9IHNlbGYuX3NyY1tpXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXVybCkge1xuICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnTm8gY29kZWMgc3VwcG9ydCBmb3Igc2VsZWN0ZWQgYXVkaW8gc291cmNlcy4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9zcmMgPSB1cmw7XG4gICAgICBzZWxmLl9zdGF0ZSA9ICdsb2FkaW5nJztcblxuICAgICAgLy8gSWYgdGhlIGhvc3RpbmcgcGFnZSBpcyBIVFRQUyBhbmQgdGhlIHNvdXJjZSBpc24ndCxcbiAgICAgIC8vIGRyb3AgZG93biB0byBIVE1MNSBBdWRpbyB0byBhdm9pZCBNaXhlZCBDb250ZW50IGVycm9ycy5cbiAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonICYmIHVybC5zbGljZSgwLCA1KSA9PT0gJ2h0dHA6Jykge1xuICAgICAgICBzZWxmLl9odG1sNSA9IHRydWU7XG4gICAgICAgIHNlbGYuX3dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBzb3VuZCBvYmplY3QgYW5kIGFkZCBpdCB0byB0aGUgcG9vbC5cbiAgICAgIG5ldyBTb3VuZChzZWxmKTtcblxuICAgICAgLy8gTG9hZCBhbmQgZGVjb2RlIHRoZSBhdWRpbyBkYXRhIGZvciBwbGF5YmFjay5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICBsb2FkQnVmZmVyKHNlbGYpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUGxheSBhIHNvdW5kIG9yIHJlc3VtZSBwcmV2aW91cyBwbGF5YmFjay5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmcvTnVtYmVyfSBzcHJpdGUgICBTcHJpdGUgbmFtZSBmb3Igc3ByaXRlIHBsYXliYWNrIG9yIHNvdW5kIGlkIHRvIGNvbnRpbnVlIHByZXZpb3VzLlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IGludGVybmFsIEludGVybmFsIFVzZTogdHJ1ZSBwcmV2ZW50cyBldmVudCBmaXJpbmcuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSAgICAgICAgICBTb3VuZCBJRC5cbiAgICAgKi9cbiAgICBwbGF5OiBmdW5jdGlvbihzcHJpdGUsIGludGVybmFsKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgaWQgPSBudWxsO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgaWYgYSBzcHJpdGUsIHNvdW5kIGlkIG9yIG5vdGhpbmcgd2FzIHBhc3NlZFxuICAgICAgaWYgKHR5cGVvZiBzcHJpdGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlkID0gc3ByaXRlO1xuICAgICAgICBzcHJpdGUgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc3ByaXRlID09PSAnc3RyaW5nJyAmJiBzZWxmLl9zdGF0ZSA9PT0gJ2xvYWRlZCcgJiYgIXNlbGYuX3Nwcml0ZVtzcHJpdGVdKSB7XG4gICAgICAgIC8vIElmIHRoZSBwYXNzZWQgc3ByaXRlIGRvZXNuJ3QgZXhpc3QsIGRvIG5vdGhpbmcuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc3ByaXRlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBVc2UgdGhlIGRlZmF1bHQgc291bmQgc3ByaXRlIChwbGF5cyB0aGUgZnVsbCBhdWRpbyBsZW5ndGgpLlxuICAgICAgICBzcHJpdGUgPSAnX19kZWZhdWx0JztcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHNpbmdsZSBwYXVzZWQgc291bmQgdGhhdCBpc24ndCBlbmRlZC5cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMsIHBsYXkgdGhhdCBzb3VuZC4gSWYgbm90LCBjb250aW51ZSBhcyB1c3VhbC5cbiAgICAgICAgaWYgKCFzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICAgIHZhciBudW0gPSAwO1xuICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX3BhdXNlZCAmJiAhc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xuICAgICAgICAgICAgICBudW0rKztcbiAgICAgICAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbaV0uX2lkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChudW0gPT09IDEpIHtcbiAgICAgICAgICAgIHNwcml0ZSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlkID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHRoZSBzZWxlY3RlZCBub2RlLCBvciBnZXQgb25lIGZyb20gdGhlIHBvb2wuXG4gICAgICB2YXIgc291bmQgPSBpZCA/IHNlbGYuX3NvdW5kQnlJZChpZCkgOiBzZWxmLl9pbmFjdGl2ZVNvdW5kKCk7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBkb2Vzbid0IGV4aXN0LCBkbyBub3RoaW5nLlxuICAgICAgaWYgKCFzb3VuZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gU2VsZWN0IHRoZSBzcHJpdGUgZGVmaW5pdGlvbi5cbiAgICAgIGlmIChpZCAmJiAhc3ByaXRlKSB7XG4gICAgICAgIHNwcml0ZSA9IHNvdW5kLl9zcHJpdGUgfHwgJ19fZGVmYXVsdCc7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCB3ZSBtdXN0IHdhaXQgdG8gZ2V0IHRoZSBhdWRpbydzIGR1cmF0aW9uLlxuICAgICAgLy8gV2UgYWxzbyBuZWVkIHRvIHdhaXQgdG8gbWFrZSBzdXJlIHdlIGRvbid0IHJ1biBpbnRvIHJhY2UgY29uZGl0aW9ucyB3aXRoXG4gICAgICAvLyB0aGUgb3JkZXIgb2YgZnVuY3Rpb24gY2FsbHMuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgIC8vIFNldCB0aGUgc3ByaXRlIHZhbHVlIG9uIHRoaXMgc291bmQuXG4gICAgICAgIHNvdW5kLl9zcHJpdGUgPSBzcHJpdGU7XG5cbiAgICAgICAgLy8gTWFyayB0aGlzIHNvdW5kIGFzIG5vdCBlbmRlZCBpbiBjYXNlIGFub3RoZXIgc291bmQgaXMgcGxheWVkIGJlZm9yZSB0aGlzIG9uZSBsb2Fkcy5cbiAgICAgICAgc291bmQuX2VuZGVkID0gZmFsc2U7XG5cbiAgICAgICAgLy8gQWRkIHRoZSBzb3VuZCB0byB0aGUgcXVldWUgdG8gYmUgcGxheWVkIG9uIGxvYWQuXG4gICAgICAgIHZhciBzb3VuZElkID0gc291bmQuX2lkO1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3BsYXknLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnBsYXkoc291bmRJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc291bmRJZDtcbiAgICAgIH1cblxuICAgICAgLy8gRG9uJ3QgcGxheSB0aGUgc291bmQgaWYgYW4gaWQgd2FzIHBhc3NlZCBhbmQgaXQgaXMgYWxyZWFkeSBwbGF5aW5nLlxuICAgICAgaWYgKGlkICYmICFzb3VuZC5fcGF1c2VkKSB7XG4gICAgICAgIC8vIFRyaWdnZXIgdGhlIHBsYXkgZXZlbnQsIGluIG9yZGVyIHRvIGtlZXAgaXRlcmF0aW5nIHRocm91Z2ggcXVldWUuXG4gICAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICBzZWxmLl9sb2FkUXVldWUoJ3BsYXknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzb3VuZC5faWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgQXVkaW9Db250ZXh0IGlzbid0IHN1c3BlbmRlZCwgYW5kIHJlc3VtZSBpdCBpZiBpdCBpcy5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICBIb3dsZXIuX2F1dG9SZXN1bWUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGV0ZXJtaW5lIGhvdyBsb25nIHRvIHBsYXkgZm9yIGFuZCB3aGVyZSB0byBzdGFydCBwbGF5aW5nLlxuICAgICAgdmFyIHNlZWsgPSBNYXRoLm1heCgwLCBzb3VuZC5fc2VlayA+IDAgPyBzb3VuZC5fc2VlayA6IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdIC8gMTAwMCk7XG4gICAgICB2YXIgZHVyYXRpb24gPSBNYXRoLm1heCgwLCAoKHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdICsgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMV0pIC8gMTAwMCkgLSBzZWVrKTtcbiAgICAgIHZhciB0aW1lb3V0ID0gKGR1cmF0aW9uICogMTAwMCkgLyBNYXRoLmFicyhzb3VuZC5fcmF0ZSk7XG4gICAgICB2YXIgc3RhcnQgPSBzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSAvIDEwMDA7XG4gICAgICB2YXIgc3RvcCA9IChzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSArIHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzFdKSAvIDEwMDA7XG4gICAgICBzb3VuZC5fc3ByaXRlID0gc3ByaXRlO1xuXG4gICAgICAvLyBNYXJrIHRoZSBzb3VuZCBhcyBlbmRlZCBpbnN0YW50bHkgc28gdGhhdCB0aGlzIGFzeW5jIHBsYXliYWNrXG4gICAgICAvLyBkb2Vzbid0IGdldCBncmFiYmVkIGJ5IGFub3RoZXIgY2FsbCB0byBwbGF5IHdoaWxlIHRoaXMgb25lIHdhaXRzIHRvIHN0YXJ0LlxuICAgICAgc291bmQuX2VuZGVkID0gZmFsc2U7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgcGFyYW1ldGVycyBvZiB0aGUgc291bmQuXG4gICAgICB2YXIgc2V0UGFyYW1zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNvdW5kLl9wYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgc291bmQuX3NlZWsgPSBzZWVrO1xuICAgICAgICBzb3VuZC5fc3RhcnQgPSBzdGFydDtcbiAgICAgICAgc291bmQuX3N0b3AgPSBzdG9wO1xuICAgICAgICBzb3VuZC5fbG9vcCA9ICEhKHNvdW5kLl9sb29wIHx8IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzJdKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIEVuZCB0aGUgc291bmQgaW5zdGFudGx5IGlmIHNlZWsgaXMgYXQgdGhlIGVuZC5cbiAgICAgIGlmIChzZWVrID49IHN0b3ApIHtcbiAgICAgICAgc2VsZi5fZW5kZWQoc291bmQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEJlZ2luIHRoZSBhY3R1YWwgcGxheWJhY2suXG4gICAgICB2YXIgbm9kZSA9IHNvdW5kLl9ub2RlO1xuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgIC8vIEZpcmUgdGhpcyB3aGVuIHRoZSBzb3VuZCBpcyByZWFkeSB0byBwbGF5IHRvIGJlZ2luIFdlYiBBdWRpbyBwbGF5YmFjay5cbiAgICAgICAgdmFyIHBsYXlXZWJBdWRpbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gZmFsc2U7XG4gICAgICAgICAgc2V0UGFyYW1zKCk7XG4gICAgICAgICAgc2VsZi5fcmVmcmVzaEJ1ZmZlcihzb3VuZCk7XG5cbiAgICAgICAgICAvLyBTZXR1cCB0aGUgcGxheWJhY2sgcGFyYW1zLlxuICAgICAgICAgIHZhciB2b2wgPSAoc291bmQuX211dGVkIHx8IHNlbGYuX211dGVkKSA/IDAgOiBzb3VuZC5fdm9sdW1lO1xuICAgICAgICAgIG5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2wsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgIHNvdW5kLl9wbGF5U3RhcnQgPSBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lO1xuXG4gICAgICAgICAgLy8gUGxheSB0aGUgc291bmQgdXNpbmcgdGhlIHN1cHBvcnRlZCBtZXRob2QuXG4gICAgICAgICAgaWYgKHR5cGVvZiBub2RlLmJ1ZmZlclNvdXJjZS5zdGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHNvdW5kLl9sb29wID8gbm9kZS5idWZmZXJTb3VyY2Uubm90ZUdyYWluT24oMCwgc2VlaywgODY0MDApIDogbm9kZS5idWZmZXJTb3VyY2Uubm90ZUdyYWluT24oMCwgc2VlaywgZHVyYXRpb24pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzb3VuZC5fbG9vcCA/IG5vZGUuYnVmZmVyU291cmNlLnN0YXJ0KDAsIHNlZWssIDg2NDAwKSA6IG5vZGUuYnVmZmVyU291cmNlLnN0YXJ0KDAsIHNlZWssIGR1cmF0aW9uKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTdGFydCBhIG5ldyB0aW1lciBpZiBub25lIGlzIHByZXNlbnQuXG4gICAgICAgICAgaWYgKHRpbWVvdXQgIT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSA9IHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIHRpbWVvdXQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICAgICAgICBzZWxmLl9sb2FkUXVldWUoKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoSG93bGVyLnN0YXRlID09PSAncnVubmluZycgJiYgSG93bGVyLmN0eC5zdGF0ZSAhPT0gJ2ludGVycnVwdGVkJykge1xuICAgICAgICAgIHBsYXlXZWJBdWRpbygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSBhdWRpbyBjb250ZXh0IHRvIHJlc3VtZSBiZWZvcmUgcGxheWluZy5cbiAgICAgICAgICBzZWxmLm9uY2UoJ3Jlc3VtZScsIHBsYXlXZWJBdWRpbyk7XG5cbiAgICAgICAgICAvLyBDYW5jZWwgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kLl9pZCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZpcmUgdGhpcyB3aGVuIHRoZSBzb3VuZCBpcyByZWFkeSB0byBwbGF5IHRvIGJlZ2luIEhUTUw1IEF1ZGlvIHBsYXliYWNrLlxuICAgICAgICB2YXIgcGxheUh0bWw1ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbm9kZS5jdXJyZW50VGltZSA9IHNlZWs7XG4gICAgICAgICAgbm9kZS5tdXRlZCA9IHNvdW5kLl9tdXRlZCB8fCBzZWxmLl9tdXRlZCB8fCBIb3dsZXIuX211dGVkIHx8IG5vZGUubXV0ZWQ7XG4gICAgICAgICAgbm9kZS52b2x1bWUgPSBzb3VuZC5fdm9sdW1lICogSG93bGVyLnZvbHVtZSgpO1xuICAgICAgICAgIG5vZGUucGxheWJhY2tSYXRlID0gc291bmQuX3JhdGU7XG5cbiAgICAgICAgICAvLyBTb21lIGJyb3dzZXJzIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgdGhpcyBpcyBjYWxsZWQgd2l0aG91dCB1c2VyIGludGVyYWN0aW9uLlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgcGxheSA9IG5vZGUucGxheSgpO1xuXG4gICAgICAgICAgICAvLyBTdXBwb3J0IG9sZGVyIGJyb3dzZXJzIHRoYXQgZG9uJ3Qgc3VwcG9ydCBwcm9taXNlcywgYW5kIHRodXMgZG9uJ3QgaGF2ZSB0aGlzIGlzc3VlLlxuICAgICAgICAgICAgaWYgKHBsYXkgJiYgdHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmIChwbGF5IGluc3RhbmNlb2YgUHJvbWlzZSB8fCB0eXBlb2YgcGxheS50aGVuID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgICAgICAvLyBJbXBsZW1lbnRzIGEgbG9jayB0byBwcmV2ZW50IERPTUV4Y2VwdGlvbjogVGhlIHBsYXkoKSByZXF1ZXN0IHdhcyBpbnRlcnJ1cHRlZCBieSBhIGNhbGwgdG8gcGF1c2UoKS5cbiAgICAgICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSB0cnVlO1xuXG4gICAgICAgICAgICAgIC8vIFNldCBwYXJhbSB2YWx1ZXMgaW1tZWRpYXRlbHkuXG4gICAgICAgICAgICAgIHNldFBhcmFtcygpO1xuXG4gICAgICAgICAgICAgIC8vIFJlbGVhc2VzIHRoZSBsb2NrIGFuZCBleGVjdXRlcyBxdWV1ZWQgYWN0aW9ucy5cbiAgICAgICAgICAgICAgcGxheVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIG5vZGUuX3VubG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9sb2FkUXVldWUoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5ZXJyb3InLCBzb3VuZC5faWQsICdQbGF5YmFjayB3YXMgdW5hYmxlIHRvIHN0YXJ0LiBUaGlzIGlzIG1vc3QgY29tbW9ubHkgYW4gaXNzdWUgJyArXG4gICAgICAgICAgICAgICAgICAgICdvbiBtb2JpbGUgZGV2aWNlcyBhbmQgQ2hyb21lIHdoZXJlIHBsYXliYWNrIHdhcyBub3Qgd2l0aGluIGEgdXNlciBpbnRlcmFjdGlvbi4nKTtcblxuICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIGVuZGVkIGFuZCBwYXVzZWQgdmFsdWVzLlxuICAgICAgICAgICAgICAgICAgc291bmQuX2VuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgc2V0UGFyYW1zKCk7XG4gICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZXR0aW5nIHJhdGUgYmVmb3JlIHBsYXlpbmcgd29uJ3Qgd29yayBpbiBJRSwgc28gd2Ugc2V0IGl0IGFnYWluIGhlcmUuXG4gICAgICAgICAgICBub2RlLnBsYXliYWNrUmF0ZSA9IHNvdW5kLl9yYXRlO1xuXG4gICAgICAgICAgICAvLyBJZiB0aGUgbm9kZSBpcyBzdGlsbCBwYXVzZWQsIHRoZW4gd2UgY2FuIGFzc3VtZSB0aGVyZSB3YXMgYSBwbGF5YmFjayBpc3N1ZS5cbiAgICAgICAgICAgIGlmIChub2RlLnBhdXNlZCkge1xuICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5ZXJyb3InLCBzb3VuZC5faWQsICdQbGF5YmFjayB3YXMgdW5hYmxlIHRvIHN0YXJ0LiBUaGlzIGlzIG1vc3QgY29tbW9ubHkgYW4gaXNzdWUgJyArXG4gICAgICAgICAgICAgICAgJ29uIG1vYmlsZSBkZXZpY2VzIGFuZCBDaHJvbWUgd2hlcmUgcGxheWJhY2sgd2FzIG5vdCB3aXRoaW4gYSB1c2VyIGludGVyYWN0aW9uLicpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNldHVwIHRoZSBlbmQgdGltZXIgb24gc3ByaXRlcyBvciBsaXN0ZW4gZm9yIHRoZSBlbmRlZCBldmVudC5cbiAgICAgICAgICAgIGlmIChzcHJpdGUgIT09ICdfX2RlZmF1bHQnIHx8IHNvdW5kLl9sb29wKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vIEZpcmUgZW5kZWQgb24gdGhpcyBhdWRpbyBub2RlLlxuICAgICAgICAgICAgICAgIHNlbGYuX2VuZGVkKHNvdW5kKTtcblxuICAgICAgICAgICAgICAgIC8vIENsZWFyIHRoaXMgbGlzdGVuZXIuXG4gICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmRlZCcsIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdLCBmYWxzZSk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheWVycm9yJywgc291bmQuX2lkLCBlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJZiB0aGlzIGlzIHN0cmVhbWluZyBhdWRpbywgbWFrZSBzdXJlIHRoZSBzcmMgaXMgc2V0IGFuZCBsb2FkIGFnYWluLlxuICAgICAgICBpZiAobm9kZS5zcmMgPT09ICdkYXRhOmF1ZGlvL3dhdjtiYXNlNjQsVWtsR1JpZ0FBQUJYUVZaRlptMTBJQklBQUFBQkFBRUFSS3dBQUloWUFRQUNBQkFBQUFCa1lYUmhBZ0FBQUFFQScpIHtcbiAgICAgICAgICBub2RlLnNyYyA9IHNlbGYuX3NyYztcbiAgICAgICAgICBub2RlLmxvYWQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBsYXkgaW1tZWRpYXRlbHkgaWYgcmVhZHksIG9yIHdhaXQgZm9yIHRoZSAnY2FucGxheXRocm91Z2gnZSB2ZW50LlxuICAgICAgICB2YXIgbG9hZGVkTm9SZWFkeVN0YXRlID0gKHdpbmRvdyAmJiB3aW5kb3cuZWplY3RhKSB8fCAoIW5vZGUucmVhZHlTdGF0ZSAmJiBIb3dsZXIuX25hdmlnYXRvci5pc0NvY29vbkpTKTtcbiAgICAgICAgaWYgKG5vZGUucmVhZHlTdGF0ZSA+PSAzIHx8IGxvYWRlZE5vUmVhZHlTdGF0ZSkge1xuICAgICAgICAgIHBsYXlIdG1sNSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLl9zdGF0ZSA9ICdsb2FkaW5nJztcblxuICAgICAgICAgIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5fc3RhdGUgPSAnbG9hZGVkJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQmVnaW4gcGxheWJhY2suXG4gICAgICAgICAgICBwbGF5SHRtbDUoKTtcblxuICAgICAgICAgICAgLy8gQ2xlYXIgdGhpcyBsaXN0ZW5lci5cbiAgICAgICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcblxuICAgICAgICAgIC8vIENhbmNlbCB0aGUgZW5kIHRpbWVyLlxuICAgICAgICAgIHNlbGYuX2NsZWFyVGltZXIoc291bmQuX2lkKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc291bmQuX2lkO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQYXVzZSBwbGF5YmFjayBhbmQgc2F2ZSBjdXJyZW50IHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIElEIChlbXB0eSB0byBwYXVzZSBhbGwgaW4gZ3JvdXApLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgcGF1c2U6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkIG9yIGEgcGxheSgpIHByb21pc2UgaXMgcGVuZGluZywgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIHBhdXNlIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdwYXVzZScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYucGF1c2UoaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIHBhdXNlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZHNbaV0pO1xuXG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCAmJiAhc291bmQuX3BhdXNlZCkge1xuICAgICAgICAgIC8vIFJlc2V0IHRoZSBzZWVrIHBvc2l0aW9uLlxuICAgICAgICAgIHNvdW5kLl9zZWVrID0gc2VsZi5zZWVrKGlkc1tpXSk7XG4gICAgICAgICAgc291bmQuX3JhdGVTZWVrID0gMDtcbiAgICAgICAgICBzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFN0b3AgY3VycmVudGx5IHJ1bm5pbmcgZmFkZXMuXG4gICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRzW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgc291bmQgaGFzIGJlZW4gY3JlYXRlZC5cbiAgICAgICAgICAgICAgaWYgKCFzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLm5vdGVPZmYoMCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AoMCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgICAgICAgICAgc2VsZi5fY2xlYW5CdWZmZXIoc291bmQuX25vZGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNOYU4oc291bmQuX25vZGUuZHVyYXRpb24pIHx8IHNvdW5kLl9ub2RlLmR1cmF0aW9uID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5wYXVzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpcmUgdGhlIHBhdXNlIGV2ZW50LCB1bmxlc3MgYHRydWVgIGlzIHBhc3NlZCBhcyB0aGUgMm5kIGFyZ3VtZW50LlxuICAgICAgICBpZiAoIWFyZ3VtZW50c1sxXSkge1xuICAgICAgICAgIHNlbGYuX2VtaXQoJ3BhdXNlJywgc291bmQgPyBzb3VuZC5faWQgOiBudWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3RvcCBwbGF5YmFjayBhbmQgcmVzZXQgdG8gc3RhcnQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgSUQgKGVtcHR5IHRvIHN0b3AgYWxsIGluIGdyb3VwKS5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBpbnRlcm5hbCBJbnRlcm5hbCBVc2U6IHRydWUgcHJldmVudHMgZXZlbnQgZmlyaW5nLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgc3RvcDogZnVuY3Rpb24oaWQsIGludGVybmFsKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gc3RvcCB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnIHx8IHNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnc3RvcCcsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuc3RvcChpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgc3RvcHBlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZHNbaV0pO1xuXG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIC8vIFJlc2V0IHRoZSBzZWVrIHBvc2l0aW9uLlxuICAgICAgICAgIHNvdW5kLl9zZWVrID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgICAgc291bmQuX3JhdGVTZWVrID0gMDtcbiAgICAgICAgICBzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICBzb3VuZC5fZW5kZWQgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gU3RvcCBjdXJyZW50bHkgcnVubmluZyBmYWRlcy5cbiAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZHNbaV0pO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBzb3VuZCdzIEF1ZGlvQnVmZmVyU291cmNlTm9kZSBoYXMgYmVlbiBjcmVhdGVkLlxuICAgICAgICAgICAgICBpZiAoc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uuc3RvcCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5ub3RlT2ZmKDApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uuc3RvcCgwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgICAgICAgICAgICBzZWxmLl9jbGVhbkJ1ZmZlcihzb3VuZC5fbm9kZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKHNvdW5kLl9ub2RlLmR1cmF0aW9uKSB8fCBzb3VuZC5fbm9kZS5kdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuY3VycmVudFRpbWUgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUucGF1c2UoKTtcblxuICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgbGl2ZSBzdHJlYW0sIHN0b3AgZG93bmxvYWQgb25jZSB0aGUgYXVkaW8gaXMgc3RvcHBlZC5cbiAgICAgICAgICAgICAgaWYgKHNvdW5kLl9ub2RlLmR1cmF0aW9uID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgICAgIHNlbGYuX2NsZWFyU291bmQoc291bmQuX25vZGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgc2VsZi5fZW1pdCgnc3RvcCcsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNdXRlL3VubXV0ZSBhIHNpbmdsZSBzb3VuZCBvciBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBtdXRlZCBTZXQgdG8gdHJ1ZSB0byBtdXRlIGFuZCBmYWxzZSB0byB1bm11dGUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAgICBUaGUgc291bmQgSUQgdG8gdXBkYXRlIChvbWl0IHRvIG11dGUvdW5tdXRlIGFsbCkuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBtdXRlOiBmdW5jdGlvbihtdXRlZCwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBtdXRlIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCd8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ211dGUnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLm11dGUobXV0ZWQsIGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBhcHBseWluZyBtdXRlL3VubXV0ZSB0byBhbGwgc291bmRzLCB1cGRhdGUgdGhlIGdyb3VwJ3MgdmFsdWUuXG4gICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIG11dGVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICBzZWxmLl9tdXRlZCA9IG11dGVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzZWxmLl9tdXRlZDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBtdXRlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgc291bmQuX211dGVkID0gbXV0ZWQ7XG5cbiAgICAgICAgICAvLyBDYW5jZWwgYWN0aXZlIGZhZGUgYW5kIHNldCB0aGUgdm9sdW1lIHRvIHRoZSBlbmQgdmFsdWUuXG4gICAgICAgICAgaWYgKHNvdW5kLl9pbnRlcnZhbCkge1xuICAgICAgICAgICAgc2VsZi5fc3RvcEZhZGUoc291bmQuX2lkKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUobXV0ZWQgPyAwIDogc291bmQuX3ZvbHVtZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUubXV0ZWQgPSBIb3dsZXIuX211dGVkID8gdHJ1ZSA6IG11dGVkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ211dGUnLCBzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSB2b2x1bWUgb2YgdGhpcyBzb3VuZCBvciBvZiB0aGUgSG93bCBncm91cC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgdm9sdW1lKCkgLT4gUmV0dXJucyB0aGUgZ3JvdXAncyB2b2x1bWUgdmFsdWUuXG4gICAgICogICB2b2x1bWUoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgY3VycmVudCB2b2x1bWUuXG4gICAgICogICB2b2x1bWUodm9sKSAtPiBTZXRzIHRoZSB2b2x1bWUgb2YgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogICB2b2x1bWUodm9sLCBpZCkgLT4gU2V0cyB0aGUgdm9sdW1lIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgdm9sdW1lLlxuICAgICAqL1xuICAgIHZvbHVtZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciB2b2wsIGlkO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gUmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGUgZ3JvdXBzJyB2b2x1bWUuXG4gICAgICAgIHJldHVybiBzZWxmLl92b2x1bWU7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxIHx8IGFyZ3MubGVuZ3RoID09PSAyICYmIHR5cGVvZiBhcmdzWzFdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGlzIGlzIGFuIElELCBhbmQgaWYgbm90LCBhc3N1bWUgaXQgaXMgYSBuZXcgdm9sdW1lLlxuICAgICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gaWRzLmluZGV4T2YoYXJnc1swXSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzBdLCAxMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm9sID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIHZvbCA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIHZvbHVtZSBvciByZXR1cm4gdGhlIGN1cnJlbnQgdm9sdW1lLlxuICAgICAgdmFyIHNvdW5kO1xuICAgICAgaWYgKHR5cGVvZiB2b2wgIT09ICd1bmRlZmluZWQnICYmIHZvbCA+PSAwICYmIHZvbCA8PSAxKSB7XG4gICAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHZvbHVtZSB3aGVuIGNhcGFibGUuXG4gICAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCd8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgZXZlbnQ6ICd2b2x1bWUnLFxuICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgc2VsZi52b2x1bWUuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdXAgdm9sdW1lLlxuICAgICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNlbGYuX3ZvbHVtZSA9IHZvbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBvbmUgb3IgYWxsIHZvbHVtZXMuXG4gICAgICAgIGlkID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8aWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgICAgc291bmQuX3ZvbHVtZSA9IHZvbDtcblxuICAgICAgICAgICAgLy8gU3RvcCBjdXJyZW50bHkgcnVubmluZyBmYWRlcy5cbiAgICAgICAgICAgIGlmICghYXJnc1syXSkge1xuICAgICAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZFtpXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiAhc291bmQuX211dGVkKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc291bmQuX25vZGUgJiYgIXNvdW5kLl9tdXRlZCkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS52b2x1bWUgPSB2b2wgKiBIb3dsZXIudm9sdW1lKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3ZvbHVtZScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZCA9IGlkID8gc2VsZi5fc291bmRCeUlkKGlkKSA6IHNlbGYuX3NvdW5kc1swXTtcbiAgICAgICAgcmV0dXJuIHNvdW5kID8gc291bmQuX3ZvbHVtZSA6IDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBGYWRlIGEgY3VycmVudGx5IHBsYXlpbmcgc291bmQgYmV0d2VlbiB0d28gdm9sdW1lcyAoaWYgbm8gaWQgaXMgcGFzc2VkLCBhbGwgc291bmRzIHdpbGwgZmFkZSkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBmcm9tIFRoZSB2YWx1ZSB0byBmYWRlIGZyb20gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gdG8gICBUaGUgdm9sdW1lIHRvIGZhZGUgdG8gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gbGVuICBUaW1lIGluIG1pbGxpc2Vjb25kcyB0byBmYWRlLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICBUaGUgc291bmQgaWQgKG9taXQgdG8gZmFkZSBhbGwgc291bmRzKS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIGZhZGU6IGZ1bmN0aW9uKGZyb20sIHRvLCBsZW4sIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gZmFkZSB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnIHx8IHNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnZmFkZScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuZmFkZShmcm9tLCB0bywgbGVuLCBpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIHRoZSB0by9mcm9tL2xlbiB2YWx1ZXMgYXJlIG51bWJlcnMuXG4gICAgICBmcm9tID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgcGFyc2VGbG9hdChmcm9tKSksIDEpO1xuICAgICAgdG8gPSBNYXRoLm1pbihNYXRoLm1heCgwLCBwYXJzZUZsb2F0KHRvKSksIDEpO1xuICAgICAgbGVuID0gcGFyc2VGbG9hdChsZW4pO1xuXG4gICAgICAvLyBTZXQgdGhlIHZvbHVtZSB0byB0aGUgc3RhcnQgcG9zaXRpb24uXG4gICAgICBzZWxmLnZvbHVtZShmcm9tLCBpZCk7XG5cbiAgICAgIC8vIEZhZGUgdGhlIHZvbHVtZSBvZiBvbmUgb3IgYWxsIHNvdW5kcy5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIGxpbmVhciBmYWRlIG9yIGZhbGwgYmFjayB0byB0aW1lb3V0cyB3aXRoIEhUTUw1IEF1ZGlvLlxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAvLyBTdG9wIHRoZSBwcmV2aW91cyBmYWRlIGlmIG5vIHNwcml0ZSBpcyBiZWluZyB1c2VkIChvdGhlcndpc2UsIHZvbHVtZSBoYW5kbGVzIHRoaXMpLlxuICAgICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkc1tpXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSWYgd2UgYXJlIHVzaW5nIFdlYiBBdWRpbywgbGV0IHRoZSBuYXRpdmUgbWV0aG9kcyBkbyB0aGUgYWN0dWFsIGZhZGUuXG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmICFzb3VuZC5fbXV0ZWQpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50VGltZSA9IEhvd2xlci5jdHguY3VycmVudFRpbWU7XG4gICAgICAgICAgICB2YXIgZW5kID0gY3VycmVudFRpbWUgKyAobGVuIC8gMTAwMCk7XG4gICAgICAgICAgICBzb3VuZC5fdm9sdW1lID0gZnJvbTtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUoZnJvbSwgY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh0bywgZW5kKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9zdGFydEZhZGVJbnRlcnZhbChzb3VuZCwgZnJvbSwgdG8sIGxlbiwgaWRzW2ldLCB0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSBpbnRlcm5hbCBpbnRlcnZhbCB0byBmYWRlIGEgc291bmQuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBzb3VuZCBSZWZlcmVuY2UgdG8gc291bmQgdG8gZmFkZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGZyb20gVGhlIHZhbHVlIHRvIGZhZGUgZnJvbSAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSB0byAgIFRoZSB2b2x1bWUgdG8gZmFkZSB0byAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBsZW4gIFRpbWUgaW4gbWlsbGlzZWNvbmRzIHRvIGZhZGUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAgIFRoZSBzb3VuZCBpZCB0byBmYWRlLlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IGlzR3JvdXAgICBJZiB0cnVlLCBzZXQgdGhlIHZvbHVtZSBvbiB0aGUgZ3JvdXAuXG4gICAgICovXG4gICAgX3N0YXJ0RmFkZUludGVydmFsOiBmdW5jdGlvbihzb3VuZCwgZnJvbSwgdG8sIGxlbiwgaWQsIGlzR3JvdXApIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciB2b2wgPSBmcm9tO1xuICAgICAgdmFyIGRpZmYgPSB0byAtIGZyb207XG4gICAgICB2YXIgc3RlcHMgPSBNYXRoLmFicyhkaWZmIC8gMC4wMSk7XG4gICAgICB2YXIgc3RlcExlbiA9IE1hdGgubWF4KDQsIChzdGVwcyA+IDApID8gbGVuIC8gc3RlcHMgOiBsZW4pO1xuICAgICAgdmFyIGxhc3RUaWNrID0gRGF0ZS5ub3coKTtcblxuICAgICAgLy8gU3RvcmUgdGhlIHZhbHVlIGJlaW5nIGZhZGVkIHRvLlxuICAgICAgc291bmQuX2ZhZGVUbyA9IHRvO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHZvbHVtZSB2YWx1ZSBvbiBlYWNoIGludGVydmFsIHRpY2suXG4gICAgICBzb3VuZC5faW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSB2b2x1bWUgYmFzZWQgb24gdGhlIHRpbWUgc2luY2UgdGhlIGxhc3QgdGljay5cbiAgICAgICAgdmFyIHRpY2sgPSAoRGF0ZS5ub3coKSAtIGxhc3RUaWNrKSAvIGxlbjtcbiAgICAgICAgbGFzdFRpY2sgPSBEYXRlLm5vdygpO1xuICAgICAgICB2b2wgKz0gZGlmZiAqIHRpY2s7XG5cbiAgICAgICAgLy8gUm91bmQgdG8gd2l0aGluIDIgZGVjaW1hbCBwb2ludHMuXG4gICAgICAgIHZvbCA9IE1hdGgucm91bmQodm9sICogMTAwKSAvIDEwMDtcblxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHZvbHVtZSBpcyBpbiB0aGUgcmlnaHQgYm91bmRzLlxuICAgICAgICBpZiAoZGlmZiA8IDApIHtcbiAgICAgICAgICB2b2wgPSBNYXRoLm1heCh0bywgdm9sKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2b2wgPSBNYXRoLm1pbih0bywgdm9sKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoYW5nZSB0aGUgdm9sdW1lLlxuICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICBzb3VuZC5fdm9sdW1lID0gdm9sO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYudm9sdW1lKHZvbCwgc291bmQuX2lkLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdXAncyB2b2x1bWUuXG4gICAgICAgIGlmIChpc0dyb3VwKSB7XG4gICAgICAgICAgc2VsZi5fdm9sdW1lID0gdm9sO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2hlbiB0aGUgZmFkZSBpcyBjb21wbGV0ZSwgc3RvcCBpdCBhbmQgZmlyZSBldmVudC5cbiAgICAgICAgaWYgKCh0byA8IGZyb20gJiYgdm9sIDw9IHRvKSB8fCAodG8gPiBmcm9tICYmIHZvbCA+PSB0bykpIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKHNvdW5kLl9pbnRlcnZhbCk7XG4gICAgICAgICAgc291bmQuX2ludGVydmFsID0gbnVsbDtcbiAgICAgICAgICBzb3VuZC5fZmFkZVRvID0gbnVsbDtcbiAgICAgICAgICBzZWxmLnZvbHVtZSh0bywgc291bmQuX2lkKTtcbiAgICAgICAgICBzZWxmLl9lbWl0KCdmYWRlJywgc291bmQuX2lkKTtcbiAgICAgICAgfVxuICAgICAgfSwgc3RlcExlbik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEludGVybmFsIG1ldGhvZCB0aGF0IHN0b3BzIHRoZSBjdXJyZW50bHkgcGxheWluZyBmYWRlIHdoZW5cbiAgICAgKiBhIG5ldyBmYWRlIHN0YXJ0cywgdm9sdW1lIGlzIGNoYW5nZWQgb3IgdGhlIHNvdW5kIGlzIHN0b3BwZWQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfc3RvcEZhZGU6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuXG4gICAgICBpZiAoc291bmQgJiYgc291bmQuX2ludGVydmFsKSB7XG4gICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uY2FuY2VsU2NoZWR1bGVkVmFsdWVzKEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xlYXJJbnRlcnZhbChzb3VuZC5faW50ZXJ2YWwpO1xuICAgICAgICBzb3VuZC5faW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICBzZWxmLnZvbHVtZShzb3VuZC5fZmFkZVRvLCBpZCk7XG4gICAgICAgIHNvdW5kLl9mYWRlVG8gPSBudWxsO1xuICAgICAgICBzZWxmLl9lbWl0KCdmYWRlJywgaWQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgbG9vcCBwYXJhbWV0ZXIgb24gYSBzb3VuZC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgbG9vcCgpIC0+IFJldHVybnMgdGhlIGdyb3VwJ3MgbG9vcCB2YWx1ZS5cbiAgICAgKiAgIGxvb3AoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgbG9vcCB2YWx1ZS5cbiAgICAgKiAgIGxvb3AobG9vcCkgLT4gU2V0cyB0aGUgbG9vcCB2YWx1ZSBmb3IgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogICBsb29wKGxvb3AsIGlkKSAtPiBTZXRzIHRoZSBsb29wIHZhbHVlIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL0Jvb2xlYW59IFJldHVybnMgc2VsZiBvciBjdXJyZW50IGxvb3AgdmFsdWUuXG4gICAgICovXG4gICAgbG9vcDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciBsb29wLCBpZCwgc291bmQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGZvciBsb29wIGFuZCBpZC5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBSZXR1cm4gdGhlIGdyb3UncyBsb29wIHZhbHVlLlxuICAgICAgICByZXR1cm4gc2VsZi5fbG9vcDtcbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICBsb29wID0gYXJnc1swXTtcbiAgICAgICAgICBzZWxmLl9sb29wID0gbG9vcDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSZXR1cm4gdGhpcyBzb3VuZCdzIGxvb3AgdmFsdWUuXG4gICAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQocGFyc2VJbnQoYXJnc1swXSwgMTApKTtcbiAgICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fbG9vcCA6IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIGxvb3AgPSBhcmdzWzBdO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgbG9vcGVkLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICBzb3VuZC5fbG9vcCA9IGxvb3A7XG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3AgPSBsb29wO1xuICAgICAgICAgICAgaWYgKGxvb3ApIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BTdGFydCA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcEVuZCA9IHNvdW5kLl9zdG9wO1xuXG4gICAgICAgICAgICAgIC8vIElmIHBsYXlpbmcsIHJlc3RhcnQgcGxheWJhY2sgdG8gZW5zdXJlIGxvb3BpbmcgdXBkYXRlcy5cbiAgICAgICAgICAgICAgaWYgKHNlbGYucGxheWluZyhpZHNbaV0pKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5wYXVzZShpZHNbaV0sIHRydWUpO1xuICAgICAgICAgICAgICAgIHNlbGYucGxheShpZHNbaV0sIHRydWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBwbGF5YmFjayByYXRlIG9mIGEgc291bmQuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIHJhdGUoKSAtPiBSZXR1cm5zIHRoZSBmaXJzdCBzb3VuZCBub2RlJ3MgY3VycmVudCBwbGF5YmFjayByYXRlLlxuICAgICAqICAgcmF0ZShpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBjdXJyZW50IHBsYXliYWNrIHJhdGUuXG4gICAgICogICByYXRlKHJhdGUpIC0+IFNldHMgdGhlIHBsYXliYWNrIHJhdGUgb2YgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogICByYXRlKHJhdGUsIGlkKSAtPiBTZXRzIHRoZSBwbGF5YmFjayByYXRlIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IHBsYXliYWNrIHJhdGUuXG4gICAgICovXG4gICAgcmF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciByYXRlLCBpZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFdlIHdpbGwgc2ltcGx5IHJldHVybiB0aGUgY3VycmVudCByYXRlIG9mIHRoZSBmaXJzdCBub2RlLlxuICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1swXS5faWQ7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRoaXMgaXMgYW4gSUQsIGFuZCBpZiBub3QsIGFzc3VtZSBpdCBpcyBhIG5ldyByYXRlIHZhbHVlLlxuICAgICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gaWRzLmluZGV4T2YoYXJnc1swXSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzBdLCAxMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmF0ZSA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgcmF0ZSA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIHBsYXliYWNrIHJhdGUgb3IgcmV0dXJuIHRoZSBjdXJyZW50IHZhbHVlLlxuICAgICAgdmFyIHNvdW5kO1xuICAgICAgaWYgKHR5cGVvZiByYXRlID09PSAnbnVtYmVyJykge1xuICAgICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBwbGF5YmFjayByYXRlIHdoZW4gY2FwYWJsZS5cbiAgICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgZXZlbnQ6ICdyYXRlJyxcbiAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHNlbGYucmF0ZS5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHRoZSBncm91cCByYXRlLlxuICAgICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNlbGYuX3JhdGUgPSByYXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIG9uZSBvciBhbGwgdm9sdW1lcy5cbiAgICAgICAgaWQgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxpZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRbaV0pO1xuXG4gICAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgICAvLyBLZWVwIHRyYWNrIG9mIG91ciBwb3NpdGlvbiB3aGVuIHRoZSByYXRlIGNoYW5nZWQgYW5kIHVwZGF0ZSB0aGUgcGxheWJhY2tcbiAgICAgICAgICAgIC8vIHN0YXJ0IHBvc2l0aW9uIHNvIHdlIGNhbiBwcm9wZXJseSBhZGp1c3QgdGhlIHNlZWsgcG9zaXRpb24gZm9yIHRpbWUgZWxhcHNlZC5cbiAgICAgICAgICAgIGlmIChzZWxmLnBsYXlpbmcoaWRbaV0pKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IHNlbGYuc2VlayhpZFtpXSk7XG4gICAgICAgICAgICAgIHNvdW5kLl9wbGF5U3RhcnQgPSBzZWxmLl93ZWJBdWRpbyA/IEhvd2xlci5jdHguY3VycmVudFRpbWUgOiBzb3VuZC5fcGxheVN0YXJ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc291bmQuX3JhdGUgPSByYXRlO1xuXG4gICAgICAgICAgICAvLyBDaGFuZ2UgdGhlIHBsYXliYWNrIHJhdGUuXG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5wbGF5YmFja1JhdGUuc2V0VmFsdWVBdFRpbWUocmF0ZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnBsYXliYWNrUmF0ZSA9IHJhdGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlc2V0IHRoZSB0aW1lcnMuXG4gICAgICAgICAgICB2YXIgc2VlayA9IHNlbGYuc2VlayhpZFtpXSk7XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSAoKHNlbGYuX3Nwcml0ZVtzb3VuZC5fc3ByaXRlXVswXSArIHNlbGYuX3Nwcml0ZVtzb3VuZC5fc3ByaXRlXVsxXSkgLyAxMDAwKSAtIHNlZWs7XG4gICAgICAgICAgICB2YXIgdGltZW91dCA9IChkdXJhdGlvbiAqIDEwMDApIC8gTWF0aC5hYnMoc291bmQuX3JhdGUpO1xuXG4gICAgICAgICAgICAvLyBTdGFydCBhIG5ldyBlbmQgdGltZXIgaWYgc291bmQgaXMgYWxyZWFkeSBwbGF5aW5nLlxuICAgICAgICAgICAgaWYgKHNlbGYuX2VuZFRpbWVyc1tpZFtpXV0gfHwgIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZFtpXSk7XG4gICAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tpZFtpXV0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5fZW1pdCgncmF0ZScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG4gICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl9yYXRlIDogc2VsZi5fcmF0ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIHNlZWsgcG9zaXRpb24gb2YgYSBzb3VuZC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgc2VlaygpIC0+IFJldHVybnMgdGhlIGZpcnN0IHNvdW5kIG5vZGUncyBjdXJyZW50IHNlZWsgcG9zaXRpb24uXG4gICAgICogICBzZWVrKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGN1cnJlbnQgc2VlayBwb3NpdGlvbi5cbiAgICAgKiAgIHNlZWsoc2VlaykgLT4gU2V0cyB0aGUgc2VlayBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgc291bmQgbm9kZS5cbiAgICAgKiAgIHNlZWsoc2VlaywgaWQpIC0+IFNldHMgdGhlIHNlZWsgcG9zaXRpb24gb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgc2VlayBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICBzZWVrOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIHNlZWssIGlkO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gV2Ugd2lsbCBzaW1wbHkgcmV0dXJuIHRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBub2RlLlxuICAgICAgICBpZiAoc2VsZi5fc291bmRzLmxlbmd0aCkge1xuICAgICAgICAgIGlkID0gc2VsZi5fc291bmRzWzBdLl9pZDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGlzIGlzIGFuIElELCBhbmQgaWYgbm90LCBhc3N1bWUgaXQgaXMgYSBuZXcgc2VlayBwb3NpdGlvbi5cbiAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKCk7XG4gICAgICAgIHZhciBpbmRleCA9IGlkcy5pbmRleE9mKGFyZ3NbMF0pO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1swXSwgMTApO1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGYuX3NvdW5kcy5sZW5ndGgpIHtcbiAgICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1swXS5faWQ7XG4gICAgICAgICAgc2VlayA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgc2VlayA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGVyZSBpcyBubyBJRCwgYmFpbCBvdXQuXG4gICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBzZWVrIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmICh0eXBlb2Ygc2VlayA9PT0gJ251bWJlcicgJiYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykpIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdzZWVrJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5zZWVrLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWVrID09PSAnbnVtYmVyJyAmJiBzZWVrID49IDApIHtcbiAgICAgICAgICAvLyBQYXVzZSB0aGUgc291bmQgYW5kIHVwZGF0ZSBwb3NpdGlvbiBmb3IgcmVzdGFydGluZyBwbGF5YmFjay5cbiAgICAgICAgICB2YXIgcGxheWluZyA9IHNlbGYucGxheWluZyhpZCk7XG4gICAgICAgICAgaWYgKHBsYXlpbmcpIHtcbiAgICAgICAgICAgIHNlbGYucGF1c2UoaWQsIHRydWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE1vdmUgdGhlIHBvc2l0aW9uIG9mIHRoZSB0cmFjayBhbmQgY2FuY2VsIHRpbWVyLlxuICAgICAgICAgIHNvdW5kLl9zZWVrID0gc2VlaztcbiAgICAgICAgICBzb3VuZC5fZW5kZWQgPSBmYWxzZTtcbiAgICAgICAgICBzZWxmLl9jbGVhclRpbWVyKGlkKTtcblxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgc2VlayBwb3NpdGlvbiBmb3IgSFRNTDUgQXVkaW8uXG4gICAgICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiAhaXNOYU4oc291bmQuX25vZGUuZHVyYXRpb24pKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5jdXJyZW50VGltZSA9IHNlZWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gU2VlayBhbmQgZW1pdCB3aGVuIHJlYWR5LlxuICAgICAgICAgIHZhciBzZWVrQW5kRW1pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gUmVzdGFydCB0aGUgcGxheWJhY2sgaWYgdGhlIHNvdW5kIHdhcyBwbGF5aW5nLlxuICAgICAgICAgICAgaWYgKHBsYXlpbmcpIHtcbiAgICAgICAgICAgICAgc2VsZi5wbGF5KGlkLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5fZW1pdCgnc2VlaycsIGlkKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHBsYXkgbG9jayB0byBiZSB1bnNldCBiZWZvcmUgZW1pdHRpbmcgKEhUTUw1IEF1ZGlvKS5cbiAgICAgICAgICBpZiAocGxheWluZyAmJiAhc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgIHZhciBlbWl0U2VlayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBpZiAoIXNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgICAgICAgICAgc2Vla0FuZEVtaXQoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGVtaXRTZWVrLCAwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZW1pdFNlZWssIDApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWVrQW5kRW1pdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgIHZhciByZWFsVGltZSA9IHNlbGYucGxheWluZyhpZCkgPyBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lIC0gc291bmQuX3BsYXlTdGFydCA6IDA7XG4gICAgICAgICAgICB2YXIgcmF0ZVNlZWsgPSBzb3VuZC5fcmF0ZVNlZWsgPyBzb3VuZC5fcmF0ZVNlZWsgLSBzb3VuZC5fc2VlayA6IDA7XG4gICAgICAgICAgICByZXR1cm4gc291bmQuX3NlZWsgKyAocmF0ZVNlZWsgKyByZWFsVGltZSAqIE1hdGguYWJzKHNvdW5kLl9yYXRlKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzb3VuZC5fbm9kZS5jdXJyZW50VGltZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgc3BlY2lmaWMgc291bmQgaXMgY3VycmVudGx5IHBsYXlpbmcgb3Igbm90IChpZiBpZCBpcyBwcm92aWRlZCksIG9yIGNoZWNrIGlmIGF0IGxlYXN0IG9uZSBvZiB0aGUgc291bmRzIGluIHRoZSBncm91cCBpcyBwbGF5aW5nIG9yIG5vdC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICBpZCBUaGUgc291bmQgaWQgdG8gY2hlY2suIElmIG5vbmUgaXMgcGFzc2VkLCB0aGUgd2hvbGUgc291bmQgZ3JvdXAgaXMgY2hlY2tlZC5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIHBsYXlpbmcgYW5kIGZhbHNlIGlmIG5vdC5cbiAgICAgKi9cbiAgICBwbGF5aW5nOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBDaGVjayB0aGUgcGFzc2VkIHNvdW5kIElEIChpZiBhbnkpLlxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcbiAgICAgICAgcmV0dXJuIHNvdW5kID8gIXNvdW5kLl9wYXVzZWQgOiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gT3RoZXJ3aXNlLCBsb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgY2hlY2sgaWYgYW55IGFyZSBwbGF5aW5nLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIXNlbGYuX3NvdW5kc1tpXS5fcGF1c2VkKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGR1cmF0aW9uIG9mIHRoaXMgc291bmQuIFBhc3NpbmcgYSBzb3VuZCBpZCB3aWxsIHJldHVybiB0aGUgc3ByaXRlIGR1cmF0aW9uLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIGlkIHRvIGNoZWNrLiBJZiBub25lIGlzIHBhc3NlZCwgcmV0dXJuIGZ1bGwgc291cmNlIGR1cmF0aW9uLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gQXVkaW8gZHVyYXRpb24gaW4gc2Vjb25kcy5cbiAgICAgKi9cbiAgICBkdXJhdGlvbjogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBkdXJhdGlvbiA9IHNlbGYuX2R1cmF0aW9uO1xuXG4gICAgICAvLyBJZiB3ZSBwYXNzIGFuIElELCBnZXQgdGhlIHNvdW5kIGFuZCByZXR1cm4gdGhlIHNwcml0ZSBsZW5ndGguXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGR1cmF0aW9uID0gc2VsZi5fc3ByaXRlW3NvdW5kLl9zcHJpdGVdWzFdIC8gMTAwMDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGR1cmF0aW9uO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGxvYWRlZCBzdGF0ZSBvZiB0aGlzIEhvd2wuXG4gICAgICogQHJldHVybiB7U3RyaW5nfSAndW5sb2FkZWQnLCAnbG9hZGluZycsICdsb2FkZWQnXG4gICAgICovXG4gICAgc3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbmxvYWQgYW5kIGRlc3Ryb3kgdGhlIGN1cnJlbnQgSG93bCBvYmplY3QuXG4gICAgICogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IHN0b3AgYWxsIHNvdW5kIGluc3RhbmNlcyBhdHRhY2hlZCB0byB0aGlzIGdyb3VwLlxuICAgICAqL1xuICAgIHVubG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFN0b3AgcGxheWluZyBhbnkgYWN0aXZlIHNvdW5kcy5cbiAgICAgIHZhciBzb3VuZHMgPSBzZWxmLl9zb3VuZHM7XG4gICAgICBmb3IgKHZhciBpPTA7IGk8c291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIFN0b3AgdGhlIHNvdW5kIGlmIGl0IGlzIGN1cnJlbnRseSBwbGF5aW5nLlxuICAgICAgICBpZiAoIXNvdW5kc1tpXS5fcGF1c2VkKSB7XG4gICAgICAgICAgc2VsZi5zdG9wKHNvdW5kc1tpXS5faWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBzb3VyY2Ugb3IgZGlzY29ubmVjdC5cbiAgICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIC8vIFNldCB0aGUgc291cmNlIHRvIDAtc2Vjb25kIHNpbGVuY2UgdG8gc3RvcCBhbnkgZG93bmxvYWRpbmcgKGV4Y2VwdCBpbiBJRSkuXG4gICAgICAgICAgc2VsZi5fY2xlYXJTb3VuZChzb3VuZHNbaV0uX25vZGUpO1xuXG4gICAgICAgICAgLy8gUmVtb3ZlIGFueSBldmVudCBsaXN0ZW5lcnMuXG4gICAgICAgICAgc291bmRzW2ldLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgc291bmRzW2ldLl9lcnJvckZuLCBmYWxzZSk7XG4gICAgICAgICAgc291bmRzW2ldLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIHNvdW5kc1tpXS5fbG9hZEZuLCBmYWxzZSk7XG4gICAgICAgICAgc291bmRzW2ldLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc291bmRzW2ldLl9lbmRGbiwgZmFsc2UpO1xuXG4gICAgICAgICAgLy8gUmVsZWFzZSB0aGUgQXVkaW8gb2JqZWN0IGJhY2sgdG8gdGhlIHBvb2wuXG4gICAgICAgICAgSG93bGVyLl9yZWxlYXNlSHRtbDVBdWRpbyhzb3VuZHNbaV0uX25vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRW1wdHkgb3V0IGFsbCBvZiB0aGUgbm9kZXMuXG4gICAgICAgIGRlbGV0ZSBzb3VuZHNbaV0uX25vZGU7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIGFsbCB0aW1lcnMgYXJlIGNsZWFyZWQgb3V0LlxuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kc1tpXS5faWQpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgdGhlIHJlZmVyZW5jZXMgaW4gdGhlIGdsb2JhbCBIb3dsZXIgb2JqZWN0LlxuICAgICAgdmFyIGluZGV4ID0gSG93bGVyLl9ob3dscy5pbmRleE9mKHNlbGYpO1xuICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgSG93bGVyLl9ob3dscy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuXG4gICAgICAvLyBEZWxldGUgdGhpcyBzb3VuZCBmcm9tIHRoZSBjYWNoZSAoaWYgbm8gb3RoZXIgSG93bCBpcyB1c2luZyBpdCkuXG4gICAgICB2YXIgcmVtQ2FjaGUgPSB0cnVlO1xuICAgICAgZm9yIChpPTA7IGk8SG93bGVyLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoSG93bGVyLl9ob3dsc1tpXS5fc3JjID09PSBzZWxmLl9zcmMgfHwgc2VsZi5fc3JjLmluZGV4T2YoSG93bGVyLl9ob3dsc1tpXS5fc3JjKSA+PSAwKSB7XG4gICAgICAgICAgcmVtQ2FjaGUgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2FjaGUgJiYgcmVtQ2FjaGUpIHtcbiAgICAgICAgZGVsZXRlIGNhY2hlW3NlbGYuX3NyY107XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIGdsb2JhbCBlcnJvcnMuXG4gICAgICBIb3dsZXIubm9BdWRpbyA9IGZhbHNlO1xuXG4gICAgICAvLyBDbGVhciBvdXQgYHNlbGZgLlxuICAgICAgc2VsZi5fc3RhdGUgPSAndW5sb2FkZWQnO1xuICAgICAgc2VsZi5fc291bmRzID0gW107XG4gICAgICBzZWxmID0gbnVsbDtcblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExpc3RlbiB0byBhIGN1c3RvbSBldmVudC5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgZXZlbnQgRXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gICAgTGlzdGVuZXIgdG8gY2FsbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgaWQgICAgKG9wdGlvbmFsKSBPbmx5IGxpc3RlbiB0byBldmVudHMgZm9yIHRoaXMgc291bmQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIG9uY2UgIChJTlRFUk5BTCkgTWFya3MgZXZlbnQgdG8gZmlyZSBvbmx5IG9uY2UuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBvbjogZnVuY3Rpb24oZXZlbnQsIGZuLCBpZCwgb25jZSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGV2ZW50cyA9IHNlbGZbJ19vbicgKyBldmVudF07XG5cbiAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZXZlbnRzLnB1c2gob25jZSA/IHtpZDogaWQsIGZuOiBmbiwgb25jZTogb25jZX0gOiB7aWQ6IGlkLCBmbjogZm59KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGN1c3RvbSBldmVudC4gQ2FsbCB3aXRob3V0IHBhcmFtZXRlcnMgdG8gcmVtb3ZlIGFsbCBldmVudHMuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIHJlbW92ZS4gTGVhdmUgZW1wdHkgdG8gcmVtb3ZlIGFsbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgaWQgICAgKG9wdGlvbmFsKSBPbmx5IHJlbW92ZSBldmVudHMgZm9yIHRoaXMgc291bmQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBvZmY6IGZ1bmN0aW9uKGV2ZW50LCBmbiwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xuICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICAvLyBBbGxvdyBwYXNzaW5nIGp1c3QgYW4gZXZlbnQgYW5kIElELlxuICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaWQgPSBmbjtcbiAgICAgICAgZm4gPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAoZm4gfHwgaWQpIHtcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGV2ZW50IHN0b3JlIGFuZCByZW1vdmUgdGhlIHBhc3NlZCBmdW5jdGlvbi5cbiAgICAgICAgZm9yIChpPTA7IGk8ZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGlzSWQgPSAoaWQgPT09IGV2ZW50c1tpXS5pZCk7XG4gICAgICAgICAgaWYgKGZuID09PSBldmVudHNbaV0uZm4gJiYgaXNJZCB8fCAhZm4gJiYgaXNJZCkge1xuICAgICAgICAgICAgZXZlbnRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChldmVudCkge1xuICAgICAgICAvLyBDbGVhciBvdXQgYWxsIGV2ZW50cyBvZiB0aGlzIHR5cGUuXG4gICAgICAgIHNlbGZbJ19vbicgKyBldmVudF0gPSBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENsZWFyIG91dCBhbGwgZXZlbnRzIG9mIGV2ZXJ5IHR5cGUuXG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoc2VsZik7XG4gICAgICAgIGZvciAoaT0wOyBpPGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoKGtleXNbaV0uaW5kZXhPZignX29uJykgPT09IDApICYmIEFycmF5LmlzQXJyYXkoc2VsZltrZXlzW2ldXSkpIHtcbiAgICAgICAgICAgIHNlbGZba2V5c1tpXV0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExpc3RlbiB0byBhIGN1c3RvbSBldmVudCBhbmQgcmVtb3ZlIGl0IG9uY2UgZmlyZWQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIGNhbGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSBsaXN0ZW4gdG8gZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgb25jZTogZnVuY3Rpb24oZXZlbnQsIGZuLCBpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTZXR1cCB0aGUgZXZlbnQgbGlzdGVuZXIuXG4gICAgICBzZWxmLm9uKGV2ZW50LCBmbiwgaWQsIDEpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRW1pdCBhbGwgZXZlbnRzIG9mIGEgc3BlY2lmaWMgdHlwZSBhbmQgcGFzcyB0aGUgc291bmQgaWQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICAgU291bmQgSUQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBtc2cgICBNZXNzYWdlIHRvIGdvIHdpdGggZXZlbnQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfZW1pdDogZnVuY3Rpb24oZXZlbnQsIGlkLCBtc2cpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xuXG4gICAgICAvLyBMb29wIHRocm91Z2ggZXZlbnQgc3RvcmUgYW5kIGZpcmUgYWxsIGZ1bmN0aW9ucy5cbiAgICAgIGZvciAodmFyIGk9ZXZlbnRzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgLy8gT25seSBmaXJlIHRoZSBsaXN0ZW5lciBpZiB0aGUgY29ycmVjdCBJRCBpcyB1c2VkLlxuICAgICAgICBpZiAoIWV2ZW50c1tpXS5pZCB8fCBldmVudHNbaV0uaWQgPT09IGlkIHx8IGV2ZW50ID09PSAnbG9hZCcpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMsIGlkLCBtc2cpO1xuICAgICAgICAgIH0uYmluZChzZWxmLCBldmVudHNbaV0uZm4pLCAwKTtcblxuICAgICAgICAgIC8vIElmIHRoaXMgZXZlbnQgd2FzIHNldHVwIHdpdGggYG9uY2VgLCByZW1vdmUgaXQuXG4gICAgICAgICAgaWYgKGV2ZW50c1tpXS5vbmNlKSB7XG4gICAgICAgICAgICBzZWxmLm9mZihldmVudCwgZXZlbnRzW2ldLmZuLCBldmVudHNbaV0uaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBQYXNzIHRoZSBldmVudCB0eXBlIGludG8gbG9hZCBxdWV1ZSBzbyB0aGF0IGl0IGNhbiBjb250aW51ZSBzdGVwcGluZy5cbiAgICAgIHNlbGYuX2xvYWRRdWV1ZShldmVudCk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBRdWV1ZSBvZiBhY3Rpb25zIGluaXRpYXRlZCBiZWZvcmUgdGhlIHNvdW5kIGhhcyBsb2FkZWQuXG4gICAgICogVGhlc2Ugd2lsbCBiZSBjYWxsZWQgaW4gc2VxdWVuY2UsIHdpdGggdGhlIG5leHQgb25seSBmaXJpbmdcbiAgICAgKiBhZnRlciB0aGUgcHJldmlvdXMgaGFzIGZpbmlzaGVkIGV4ZWN1dGluZyAoZXZlbiBpZiBhc3luYyBsaWtlIHBsYXkpLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2xvYWRRdWV1ZTogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKHNlbGYuX3F1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIHRhc2sgPSBzZWxmLl9xdWV1ZVswXTtcblxuICAgICAgICAvLyBSZW1vdmUgdGhpcyB0YXNrIGlmIGEgbWF0Y2hpbmcgZXZlbnQgd2FzIHBhc3NlZC5cbiAgICAgICAgaWYgKHRhc2suZXZlbnQgPT09IGV2ZW50KSB7XG4gICAgICAgICAgc2VsZi5fcXVldWUuc2hpZnQoKTtcbiAgICAgICAgICBzZWxmLl9sb2FkUXVldWUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJ1biB0aGUgdGFzayBpZiBubyBldmVudCB0eXBlIGlzIHBhc3NlZC5cbiAgICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICAgIHRhc2suYWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEZpcmVkIHdoZW4gcGxheWJhY2sgZW5kcyBhdCB0aGUgZW5kIG9mIHRoZSBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gIHtTb3VuZH0gc291bmQgVGhlIHNvdW5kIG9iamVjdCB0byB3b3JrIHdpdGguXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfZW5kZWQ6IGZ1bmN0aW9uKHNvdW5kKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgc3ByaXRlID0gc291bmQuX3Nwcml0ZTtcblxuICAgICAgLy8gSWYgd2UgYXJlIHVzaW5nIElFIGFuZCB0aGVyZSB3YXMgbmV0d29yayBsYXRlbmN5IHdlIG1heSBiZSBjbGlwcGluZ1xuICAgICAgLy8gYXVkaW8gYmVmb3JlIGl0IGNvbXBsZXRlcyBwbGF5aW5nLiBMZXRzIGNoZWNrIHRoZSBub2RlIHRvIG1ha2Ugc3VyZSBpdFxuICAgICAgLy8gYmVsaWV2ZXMgaXQgaGFzIGNvbXBsZXRlZCwgYmVmb3JlIGVuZGluZyB0aGUgcGxheWJhY2suXG4gICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbm9kZS5wYXVzZWQgJiYgIXNvdW5kLl9ub2RlLmVuZGVkICYmIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lIDwgc291bmQuX3N0b3ApIHtcbiAgICAgICAgc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgMTAwKTtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIFNob3VsZCB0aGlzIHNvdW5kIGxvb3A/XG4gICAgICB2YXIgbG9vcCA9ICEhKHNvdW5kLl9sb29wIHx8IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzJdKTtcblxuICAgICAgLy8gRmlyZSB0aGUgZW5kZWQgZXZlbnQuXG4gICAgICBzZWxmLl9lbWl0KCdlbmQnLCBzb3VuZC5faWQpO1xuXG4gICAgICAvLyBSZXN0YXJ0IHRoZSBwbGF5YmFjayBmb3IgSFRNTDUgQXVkaW8gbG9vcC5cbiAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8gJiYgbG9vcCkge1xuICAgICAgICBzZWxmLnN0b3Aoc291bmQuX2lkLCB0cnVlKS5wbGF5KHNvdW5kLl9pZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlc3RhcnQgdGhpcyB0aW1lciBpZiBvbiBhIFdlYiBBdWRpbyBsb29wLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIGxvb3ApIHtcbiAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgIHNvdW5kLl9zZWVrID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgIHNvdW5kLl9wbGF5U3RhcnQgPSBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lO1xuXG4gICAgICAgIHZhciB0aW1lb3V0ID0gKChzb3VuZC5fc3RvcCAtIHNvdW5kLl9zdGFydCkgKiAxMDAwKSAvIE1hdGguYWJzKHNvdW5kLl9yYXRlKTtcbiAgICAgICAgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcbiAgICAgIH1cblxuICAgICAgLy8gTWFyayB0aGUgbm9kZSBhcyBwYXVzZWQuXG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgIWxvb3ApIHtcbiAgICAgICAgc291bmQuX3BhdXNlZCA9IHRydWU7XG4gICAgICAgIHNvdW5kLl9lbmRlZCA9IHRydWU7XG4gICAgICAgIHNvdW5kLl9zZWVrID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgIHNlbGYuX2NsZWFyVGltZXIoc291bmQuX2lkKTtcblxuICAgICAgICAvLyBDbGVhbiB1cCB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgICAgc2VsZi5fY2xlYW5CdWZmZXIoc291bmQuX25vZGUpO1xuXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gYXV0by1zdXNwZW5kIEF1ZGlvQ29udGV4dCBpZiBubyBzb3VuZHMgYXJlIHN0aWxsIHBsYXlpbmcuXG4gICAgICAgIEhvd2xlci5fYXV0b1N1c3BlbmQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gV2hlbiB1c2luZyBhIHNwcml0ZSwgZW5kIHRoZSB0cmFjay5cbiAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8gJiYgIWxvb3ApIHtcbiAgICAgICAgc2VsZi5zdG9wKHNvdW5kLl9pZCwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDbGVhciB0aGUgZW5kIHRpbWVyIGZvciBhIHNvdW5kIHBsYXliYWNrLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIElELlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2NsZWFyVGltZXI6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmIChzZWxmLl9lbmRUaW1lcnNbaWRdKSB7XG4gICAgICAgIC8vIENsZWFyIHRoZSB0aW1lb3V0IG9yIHJlbW92ZSB0aGUgZW5kZWQgbGlzdGVuZXIuXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZi5fZW5kVGltZXJzW2lkXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGNsZWFyVGltZW91dChzZWxmLl9lbmRUaW1lcnNbaWRdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuICAgICAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzZWxmLl9lbmRUaW1lcnNbaWRdLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlIHNlbGYuX2VuZFRpbWVyc1tpZF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHNvdW5kIGlkZW50aWZpZWQgYnkgdGhpcyBJRCwgb3IgcmV0dXJuIG51bGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBTb3VuZCBJRFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgU291bmQgb2JqZWN0IG9yIG51bGwuXG4gICAgICovXG4gICAgX3NvdW5kQnlJZDogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIGZpbmQgdGhlIG9uZSB3aXRoIHRoaXMgSUQuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpZCA9PT0gc2VsZi5fc291bmRzW2ldLl9pZCkge1xuICAgICAgICAgIHJldHVybiBzZWxmLl9zb3VuZHNbaV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybiBhbiBpbmFjdGl2ZSBzb3VuZCBmcm9tIHRoZSBwb29sIG9yIGNyZWF0ZSBhIG5ldyBvbmUuXG4gICAgICogQHJldHVybiB7U291bmR9IFNvdW5kIHBsYXliYWNrIG9iamVjdC5cbiAgICAgKi9cbiAgICBfaW5hY3RpdmVTb3VuZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIHNlbGYuX2RyYWluKCk7XG5cbiAgICAgIC8vIEZpbmQgdGhlIGZpcnN0IGluYWN0aXZlIG5vZGUgdG8gcmVjeWNsZS5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fc291bmRzW2ldLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaW5hY3RpdmUgbm9kZSB3YXMgZm91bmQsIGNyZWF0ZSBhIG5ldyBvbmUuXG4gICAgICByZXR1cm4gbmV3IFNvdW5kKHNlbGYpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEcmFpbiBleGNlc3MgaW5hY3RpdmUgc291bmRzIGZyb20gdGhlIHBvb2wuXG4gICAgICovXG4gICAgX2RyYWluOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBsaW1pdCA9IHNlbGYuX3Bvb2w7XG4gICAgICB2YXIgY250ID0gMDtcbiAgICAgIHZhciBpID0gMDtcblxuICAgICAgLy8gSWYgdGhlcmUgYXJlIGxlc3Mgc291bmRzIHRoYW4gdGhlIG1heCBwb29sIHNpemUsIHdlIGFyZSBkb25lLlxuICAgICAgaWYgKHNlbGYuX3NvdW5kcy5sZW5ndGggPCBsaW1pdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIENvdW50IHRoZSBudW1iZXIgb2YgaW5hY3RpdmUgc291bmRzLlxuICAgICAgZm9yIChpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgY250Kys7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIGV4Y2VzcyBpbmFjdGl2ZSBzb3VuZHMsIGdvaW5nIGluIHJldmVyc2Ugb3JkZXIuXG4gICAgICBmb3IgKGk9c2VsZi5fc291bmRzLmxlbmd0aCAtIDE7IGk+PTA7IGktLSkge1xuICAgICAgICBpZiAoY250IDw9IGxpbWl0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcbiAgICAgICAgICAvLyBEaXNjb25uZWN0IHRoZSBhdWRpbyBzb3VyY2Ugd2hlbiB1c2luZyBXZWIgQXVkaW8uXG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNlbGYuX3NvdW5kc1tpXS5fbm9kZSkge1xuICAgICAgICAgICAgc2VsZi5fc291bmRzW2ldLl9ub2RlLmRpc2Nvbm5lY3QoMCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gUmVtb3ZlIHNvdW5kcyB1bnRpbCB3ZSBoYXZlIHRoZSBwb29sIHNpemUuXG4gICAgICAgICAgc2VsZi5fc291bmRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICBjbnQtLTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIElEJ3MgZnJvbSB0aGUgc291bmRzIHBvb2wuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBPbmx5IHJldHVybiBvbmUgSUQgaWYgb25lIGlzIHBhc3NlZC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gICAgQXJyYXkgb2YgSURzLlxuICAgICAqL1xuICAgIF9nZXRTb3VuZElkczogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFyIGlkcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWRzLnB1c2goc2VsZi5fc291bmRzW2ldLl9pZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaWRzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtpZF07XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIHNvdW5kIGJhY2sgaW50byB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0gIHtTb3VuZH0gc291bmQgVGhlIHNvdW5kIG9iamVjdCB0byB3b3JrIHdpdGguXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfcmVmcmVzaEJ1ZmZlcjogZnVuY3Rpb24oc291bmQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU2V0dXAgdGhlIGJ1ZmZlciBzb3VyY2UgZm9yIHBsYXliYWNrLlxuICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlID0gSG93bGVyLmN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5idWZmZXIgPSBjYWNoZVtzZWxmLl9zcmNdO1xuXG4gICAgICAvLyBDb25uZWN0IHRvIHRoZSBjb3JyZWN0IG5vZGUuXG4gICAgICBpZiAoc291bmQuX3Bhbm5lcikge1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UuY29ubmVjdChzb3VuZC5fcGFubmVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5jb25uZWN0KHNvdW5kLl9ub2RlKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0dXAgbG9vcGluZyBhbmQgcGxheWJhY2sgcmF0ZS5cbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wID0gc291bmQuX2xvb3A7XG4gICAgICBpZiAoc291bmQuX2xvb3ApIHtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BTdGFydCA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcEVuZCA9IHNvdW5kLl9zdG9wIHx8IDA7XG4gICAgICB9XG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UucGxheWJhY2tSYXRlLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9yYXRlLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFByZXZlbnQgbWVtb3J5IGxlYWtzIGJ5IGNsZWFuaW5nIHVwIHRoZSBidWZmZXIgc291cmNlIGFmdGVyIHBsYXliYWNrLlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gbm9kZSBTb3VuZCdzIGF1ZGlvIG5vZGUgY29udGFpbmluZyB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9jbGVhbkJ1ZmZlcjogZnVuY3Rpb24obm9kZSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGlzSU9TID0gSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IudmVuZG9yLmluZGV4T2YoJ0FwcGxlJykgPj0gMDtcblxuICAgICAgaWYgKCFub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgaWYgKEhvd2xlci5fc2NyYXRjaEJ1ZmZlciAmJiBub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICBub2RlLmJ1ZmZlclNvdXJjZS5vbmVuZGVkID0gbnVsbDtcbiAgICAgICAgbm9kZS5idWZmZXJTb3VyY2UuZGlzY29ubmVjdCgwKTtcbiAgICAgICAgaWYgKGlzSU9TKSB7XG4gICAgICAgICAgdHJ5IHsgbm9kZS5idWZmZXJTb3VyY2UuYnVmZmVyID0gSG93bGVyLl9zY3JhdGNoQnVmZmVyOyB9IGNhdGNoKGUpIHt9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG5vZGUuYnVmZmVyU291cmNlID0gbnVsbDtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc291cmNlIHRvIGEgMC1zZWNvbmQgc2lsZW5jZSB0byBzdG9wIGFueSBkb3dubG9hZGluZyAoZXhjZXB0IGluIElFKS5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IG5vZGUgQXVkaW8gbm9kZSB0byBjbGVhci5cbiAgICAgKi9cbiAgICBfY2xlYXJTb3VuZDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgdmFyIGNoZWNrSUUgPSAvTVNJRSB8VHJpZGVudFxcLy8udGVzdChIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgaWYgKCFjaGVja0lFKSB7XG4gICAgICAgIG5vZGUuc3JjID0gJ2RhdGE6YXVkaW8vd2F2O2Jhc2U2NCxVa2xHUmlnQUFBQlhRVlpGWm0xMElCSUFBQUFCQUFFQVJLd0FBSWhZQVFBQ0FCQUFBQUJrWVhSaEFnQUFBQUVBJztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqIFNpbmdsZSBTb3VuZCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgc291bmQgb2JqZWN0LCB3aGljaCBlYWNoIG5vZGUgYXR0YWNoZWQgdG8gYSBIb3dsIGdyb3VwIGlzIGNvbnRhaW5lZCBpbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IGhvd2wgVGhlIEhvd2wgcGFyZW50IGdyb3VwLlxuICAgKi9cbiAgdmFyIFNvdW5kID0gZnVuY3Rpb24oaG93bCkge1xuICAgIHRoaXMuX3BhcmVudCA9IGhvd2w7XG4gICAgdGhpcy5pbml0KCk7XG4gIH07XG4gIFNvdW5kLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGEgbmV3IFNvdW5kIG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFNldHVwIHRoZSBkZWZhdWx0IHBhcmFtZXRlcnMuXG4gICAgICBzZWxmLl9tdXRlZCA9IHBhcmVudC5fbXV0ZWQ7XG4gICAgICBzZWxmLl9sb29wID0gcGFyZW50Ll9sb29wO1xuICAgICAgc2VsZi5fdm9sdW1lID0gcGFyZW50Ll92b2x1bWU7XG4gICAgICBzZWxmLl9yYXRlID0gcGFyZW50Ll9yYXRlO1xuICAgICAgc2VsZi5fc2VlayA9IDA7XG4gICAgICBzZWxmLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fZW5kZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fc3ByaXRlID0gJ19fZGVmYXVsdCc7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGEgdW5pcXVlIElEIGZvciB0aGlzIHNvdW5kLlxuICAgICAgc2VsZi5faWQgPSArK0hvd2xlci5fY291bnRlcjtcblxuICAgICAgLy8gQWRkIGl0c2VsZiB0byB0aGUgcGFyZW50J3MgcG9vbC5cbiAgICAgIHBhcmVudC5fc291bmRzLnB1c2goc2VsZik7XG5cbiAgICAgIC8vIENyZWF0ZSB0aGUgbmV3IG5vZGUuXG4gICAgICBzZWxmLmNyZWF0ZSgpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuZCBzZXR1cCBhIG5ldyBzb3VuZCBvYmplY3QsIHdoZXRoZXIgSFRNTDUgQXVkaW8gb3IgV2ViIEF1ZGlvLlxuICAgICAqIEByZXR1cm4ge1NvdW5kfVxuICAgICAqL1xuICAgIGNyZWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuICAgICAgdmFyIHZvbHVtZSA9IChIb3dsZXIuX211dGVkIHx8IHNlbGYuX211dGVkIHx8IHNlbGYuX3BhcmVudC5fbXV0ZWQpID8gMCA6IHNlbGYuX3ZvbHVtZTtcblxuICAgICAgaWYgKHBhcmVudC5fd2ViQXVkaW8pIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBnYWluIG5vZGUgZm9yIGNvbnRyb2xsaW5nIHZvbHVtZSAodGhlIHNvdXJjZSB3aWxsIGNvbm5lY3QgdG8gdGhpcykuXG4gICAgICAgIHNlbGYuX25vZGUgPSAodHlwZW9mIEhvd2xlci5jdHguY3JlYXRlR2FpbiA9PT0gJ3VuZGVmaW5lZCcpID8gSG93bGVyLmN0eC5jcmVhdGVHYWluTm9kZSgpIDogSG93bGVyLmN0eC5jcmVhdGVHYWluKCk7XG4gICAgICAgIHNlbGYuX25vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2x1bWUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICBzZWxmLl9ub2RlLnBhdXNlZCA9IHRydWU7XG4gICAgICAgIHNlbGYuX25vZGUuY29ubmVjdChIb3dsZXIubWFzdGVyR2Fpbik7XG4gICAgICB9IGVsc2UgaWYgKCFIb3dsZXIubm9BdWRpbykge1xuICAgICAgICAvLyBHZXQgYW4gdW5sb2NrZWQgQXVkaW8gb2JqZWN0IGZyb20gdGhlIHBvb2wuXG4gICAgICAgIHNlbGYuX25vZGUgPSBIb3dsZXIuX29idGFpbkh0bWw1QXVkaW8oKTtcblxuICAgICAgICAvLyBMaXN0ZW4gZm9yIGVycm9ycyAoaHR0cDovL2Rldi53My5vcmcvaHRtbDUvc3BlYy1hdXRob3Itdmlldy9zcGVjLmh0bWwjbWVkaWFlcnJvcikuXG4gICAgICAgIHNlbGYuX2Vycm9yRm4gPSBzZWxmLl9lcnJvckxpc3RlbmVyLmJpbmQoc2VsZik7XG4gICAgICAgIHNlbGYuX25vZGUuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBzZWxmLl9lcnJvckZuLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gTGlzdGVuIGZvciAnY2FucGxheXRocm91Z2gnIGV2ZW50IHRvIGxldCB1cyBrbm93IHRoZSBzb3VuZCBpcyByZWFkeS5cbiAgICAgICAgc2VsZi5fbG9hZEZuID0gc2VsZi5fbG9hZExpc3RlbmVyLmJpbmQoc2VsZik7XG4gICAgICAgIHNlbGYuX25vZGUuYWRkRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgc2VsZi5fbG9hZEZuLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gTGlzdGVuIGZvciB0aGUgJ2VuZGVkJyBldmVudCBvbiB0aGUgc291bmQgdG8gYWNjb3VudCBmb3IgZWRnZS1jYXNlIHdoZXJlXG4gICAgICAgIC8vIGEgZmluaXRlIHNvdW5kIGhhcyBhIGR1cmF0aW9uIG9mIEluZmluaXR5LlxuICAgICAgICBzZWxmLl9lbmRGbiA9IHNlbGYuX2VuZExpc3RlbmVyLmJpbmQoc2VsZik7XG4gICAgICAgIHNlbGYuX25vZGUuYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzZWxmLl9lbmRGbiwgZmFsc2UpO1xuXG4gICAgICAgIC8vIFNldHVwIHRoZSBuZXcgYXVkaW8gbm9kZS5cbiAgICAgICAgc2VsZi5fbm9kZS5zcmMgPSBwYXJlbnQuX3NyYztcbiAgICAgICAgc2VsZi5fbm9kZS5wcmVsb2FkID0gcGFyZW50Ll9wcmVsb2FkID09PSB0cnVlID8gJ2F1dG8nIDogcGFyZW50Ll9wcmVsb2FkO1xuICAgICAgICBzZWxmLl9ub2RlLnZvbHVtZSA9IHZvbHVtZSAqIEhvd2xlci52b2x1bWUoKTtcblxuICAgICAgICAvLyBCZWdpbiBsb2FkaW5nIHRoZSBzb3VyY2UuXG4gICAgICAgIHNlbGYuX25vZGUubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIHBhcmFtZXRlcnMgb2YgdGhpcyBzb3VuZCB0byB0aGUgb3JpZ2luYWwgc3RhdGUgKGZvciByZWN5Y2xlKS5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICAgKi9cbiAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBSZXNldCBhbGwgb2YgdGhlIHBhcmFtZXRlcnMgb2YgdGhpcyBzb3VuZC5cbiAgICAgIHNlbGYuX211dGVkID0gcGFyZW50Ll9tdXRlZDtcbiAgICAgIHNlbGYuX2xvb3AgPSBwYXJlbnQuX2xvb3A7XG4gICAgICBzZWxmLl92b2x1bWUgPSBwYXJlbnQuX3ZvbHVtZTtcbiAgICAgIHNlbGYuX3JhdGUgPSBwYXJlbnQuX3JhdGU7XG4gICAgICBzZWxmLl9zZWVrID0gMDtcbiAgICAgIHNlbGYuX3JhdGVTZWVrID0gMDtcbiAgICAgIHNlbGYuX3BhdXNlZCA9IHRydWU7XG4gICAgICBzZWxmLl9lbmRlZCA9IHRydWU7XG4gICAgICBzZWxmLl9zcHJpdGUgPSAnX19kZWZhdWx0JztcblxuICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgSUQgc28gdGhhdCBpdCBpc24ndCBjb25mdXNlZCB3aXRoIHRoZSBwcmV2aW91cyBzb3VuZC5cbiAgICAgIHNlbGYuX2lkID0gKytIb3dsZXIuX2NvdW50ZXI7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIVE1MNSBBdWRpbyBlcnJvciBsaXN0ZW5lciBjYWxsYmFjay5cbiAgICAgKi9cbiAgICBfZXJyb3JMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIEZpcmUgYW4gZXJyb3IgZXZlbnQgYW5kIHBhc3MgYmFjayB0aGUgY29kZS5cbiAgICAgIHNlbGYuX3BhcmVudC5fZW1pdCgnbG9hZGVycm9yJywgc2VsZi5faWQsIHNlbGYuX25vZGUuZXJyb3IgPyBzZWxmLl9ub2RlLmVycm9yLmNvZGUgOiAwKTtcblxuICAgICAgLy8gQ2xlYXIgdGhlIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgc2VsZi5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHNlbGYuX2Vycm9yRm4sIGZhbHNlKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSFRNTDUgQXVkaW8gY2FucGxheXRocm91Z2ggbGlzdGVuZXIgY2FsbGJhY2suXG4gICAgICovXG4gICAgX2xvYWRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBSb3VuZCB1cCB0aGUgZHVyYXRpb24gdG8gYWNjb3VudCBmb3IgdGhlIGxvd2VyIHByZWNpc2lvbiBpbiBIVE1MNSBBdWRpby5cbiAgICAgIHBhcmVudC5fZHVyYXRpb24gPSBNYXRoLmNlaWwoc2VsZi5fbm9kZS5kdXJhdGlvbiAqIDEwKSAvIDEwO1xuXG4gICAgICAvLyBTZXR1cCBhIHNwcml0ZSBpZiBub25lIGlzIGRlZmluZWQuXG4gICAgICBpZiAoT2JqZWN0LmtleXMocGFyZW50Ll9zcHJpdGUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwYXJlbnQuX3Nwcml0ZSA9IHtfX2RlZmF1bHQ6IFswLCBwYXJlbnQuX2R1cmF0aW9uICogMTAwMF19O1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyZW50Ll9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgcGFyZW50Ll9zdGF0ZSA9ICdsb2FkZWQnO1xuICAgICAgICBwYXJlbnQuX2VtaXQoJ2xvYWQnKTtcbiAgICAgICAgcGFyZW50Ll9sb2FkUXVldWUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgdGhlIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgc2VsZi5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBzZWxmLl9sb2FkRm4sIGZhbHNlKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSFRNTDUgQXVkaW8gZW5kZWQgbGlzdGVuZXIgY2FsbGJhY2suXG4gICAgICovXG4gICAgX2VuZExpc3RlbmVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIE9ubHkgaGFuZGxlIHRoZSBgZW5kZWRgYCBldmVudCBpZiB0aGUgZHVyYXRpb24gaXMgSW5maW5pdHkuXG4gICAgICBpZiAocGFyZW50Ll9kdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBwYXJlbnQgZHVyYXRpb24gdG8gbWF0Y2ggdGhlIHJlYWwgYXVkaW8gZHVyYXRpb24uXG4gICAgICAgIC8vIFJvdW5kIHVwIHRoZSBkdXJhdGlvbiB0byBhY2NvdW50IGZvciB0aGUgbG93ZXIgcHJlY2lzaW9uIGluIEhUTUw1IEF1ZGlvLlxuICAgICAgICBwYXJlbnQuX2R1cmF0aW9uID0gTWF0aC5jZWlsKHNlbGYuX25vZGUuZHVyYXRpb24gKiAxMCkgLyAxMDtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIHNwcml0ZSB0aGF0IGNvcnJlc3BvbmRzIHRvIHRoZSByZWFsIGR1cmF0aW9uLlxuICAgICAgICBpZiAocGFyZW50Ll9zcHJpdGUuX19kZWZhdWx0WzFdID09PSBJbmZpbml0eSkge1xuICAgICAgICAgIHBhcmVudC5fc3ByaXRlLl9fZGVmYXVsdFsxXSA9IHBhcmVudC5fZHVyYXRpb24gKiAxMDAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUnVuIHRoZSByZWd1bGFyIGVuZGVkIG1ldGhvZC5cbiAgICAgICAgcGFyZW50Ll9lbmRlZChzZWxmKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgdGhlIGV2ZW50IGxpc3RlbmVyIHNpbmNlIHRoZSBkdXJhdGlvbiBpcyBub3cgY29ycmVjdC5cbiAgICAgIHNlbGYuX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzZWxmLl9lbmRGbiwgZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICAvKiogSGVscGVyIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgdmFyIGNhY2hlID0ge307XG5cbiAgLyoqXG4gICAqIEJ1ZmZlciBhIHNvdW5kIGZyb20gVVJMLCBEYXRhIFVSSSBvciBjYWNoZSBhbmQgZGVjb2RlIHRvIGF1ZGlvIHNvdXJjZSAoV2ViIEF1ZGlvIEFQSSkuXG4gICAqIEBwYXJhbSAge0hvd2x9IHNlbGZcbiAgICovXG4gIHZhciBsb2FkQnVmZmVyID0gZnVuY3Rpb24oc2VsZikge1xuICAgIHZhciB1cmwgPSBzZWxmLl9zcmM7XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgYnVmZmVyIGhhcyBhbHJlYWR5IGJlZW4gY2FjaGVkIGFuZCB1c2UgaXQgaW5zdGVhZC5cbiAgICBpZiAoY2FjaGVbdXJsXSkge1xuICAgICAgLy8gU2V0IHRoZSBkdXJhdGlvbiBmcm9tIHRoZSBjYWNoZS5cbiAgICAgIHNlbGYuX2R1cmF0aW9uID0gY2FjaGVbdXJsXS5kdXJhdGlvbjtcblxuICAgICAgLy8gTG9hZCB0aGUgc291bmQgaW50byB0aGlzIEhvd2wuXG4gICAgICBsb2FkU291bmQoc2VsZik7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoL15kYXRhOlteO10rO2Jhc2U2NCwvLnRlc3QodXJsKSkge1xuICAgICAgLy8gRGVjb2RlIHRoZSBiYXNlNjQgZGF0YSBVUkkgd2l0aG91dCBYSFIsIHNpbmNlIHNvbWUgYnJvd3NlcnMgZG9uJ3Qgc3VwcG9ydCBpdC5cbiAgICAgIHZhciBkYXRhID0gYXRvYih1cmwuc3BsaXQoJywnKVsxXSk7XG4gICAgICB2YXIgZGF0YVZpZXcgPSBuZXcgVWludDhBcnJheShkYXRhLmxlbmd0aCk7XG4gICAgICBmb3IgKHZhciBpPTA7IGk8ZGF0YS5sZW5ndGg7ICsraSkge1xuICAgICAgICBkYXRhVmlld1tpXSA9IGRhdGEuY2hhckNvZGVBdChpKTtcbiAgICAgIH1cblxuICAgICAgZGVjb2RlQXVkaW9EYXRhKGRhdGFWaWV3LmJ1ZmZlciwgc2VsZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIExvYWQgdGhlIGJ1ZmZlciBmcm9tIHRoZSBVUkwuXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICB4aHIub3BlbihzZWxmLl94aHIubWV0aG9kLCB1cmwsIHRydWUpO1xuICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHNlbGYuX3hoci53aXRoQ3JlZGVudGlhbHM7XG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcblxuICAgICAgLy8gQXBwbHkgYW55IGN1c3RvbSBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0LlxuICAgICAgaWYgKHNlbGYuX3hoci5oZWFkZXJzKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHNlbGYuX3hoci5oZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgc2VsZi5feGhyLmhlYWRlcnNba2V5XSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBnZXQgYSBzdWNjZXNzZnVsIHJlc3BvbnNlIGJhY2suXG4gICAgICAgIHZhciBjb2RlID0gKHhoci5zdGF0dXMgKyAnJylbMF07XG4gICAgICAgIGlmIChjb2RlICE9PSAnMCcgJiYgY29kZSAhPT0gJzInICYmIGNvZGUgIT09ICczJykge1xuICAgICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdGYWlsZWQgbG9hZGluZyBhdWRpbyBmaWxlIHdpdGggc3RhdHVzOiAnICsgeGhyLnN0YXR1cyArICcuJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVjb2RlQXVkaW9EYXRhKHhoci5yZXNwb25zZSwgc2VsZik7XG4gICAgICB9O1xuICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gZXJyb3IsIHN3aXRjaCB0byBIVE1MNSBBdWRpby5cbiAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgc2VsZi5faHRtbDUgPSB0cnVlO1xuICAgICAgICAgIHNlbGYuX3dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICAgICAgc2VsZi5fc291bmRzID0gW107XG4gICAgICAgICAgZGVsZXRlIGNhY2hlW3VybF07XG4gICAgICAgICAgc2VsZi5sb2FkKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBzYWZlWGhyU2VuZCh4aHIpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2VuZCB0aGUgWEhSIHJlcXVlc3Qgd3JhcHBlZCBpbiBhIHRyeS9jYXRjaC5cbiAgICogQHBhcmFtICB7T2JqZWN0fSB4aHIgWEhSIHRvIHNlbmQuXG4gICAqL1xuICB2YXIgc2FmZVhoclNlbmQgPSBmdW5jdGlvbih4aHIpIHtcbiAgICB0cnkge1xuICAgICAgeGhyLnNlbmQoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB4aHIub25lcnJvcigpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGVjb2RlIGF1ZGlvIGRhdGEgZnJvbSBhbiBhcnJheSBidWZmZXIuXG4gICAqIEBwYXJhbSAge0FycmF5QnVmZmVyfSBhcnJheWJ1ZmZlciBUaGUgYXVkaW8gZGF0YS5cbiAgICogQHBhcmFtICB7SG93bH0gICAgICAgIHNlbGZcbiAgICovXG4gIHZhciBkZWNvZGVBdWRpb0RhdGEgPSBmdW5jdGlvbihhcnJheWJ1ZmZlciwgc2VsZikge1xuICAgIC8vIEZpcmUgYSBsb2FkIGVycm9yIGlmIHNvbWV0aGluZyBicm9rZS5cbiAgICB2YXIgZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdEZWNvZGluZyBhdWRpbyBkYXRhIGZhaWxlZC4nKTtcbiAgICB9O1xuXG4gICAgLy8gTG9hZCB0aGUgc291bmQgb24gc3VjY2Vzcy5cbiAgICB2YXIgc3VjY2VzcyA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xuICAgICAgaWYgKGJ1ZmZlciAmJiBzZWxmLl9zb3VuZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjYWNoZVtzZWxmLl9zcmNdID0gYnVmZmVyO1xuICAgICAgICBsb2FkU291bmQoc2VsZiwgYnVmZmVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVycm9yKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIERlY29kZSB0aGUgYnVmZmVyIGludG8gYW4gYXVkaW8gc291cmNlLlxuICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgSG93bGVyLmN0eC5kZWNvZGVBdWRpb0RhdGEubGVuZ3RoID09PSAxKSB7XG4gICAgICBIb3dsZXIuY3R4LmRlY29kZUF1ZGlvRGF0YShhcnJheWJ1ZmZlcikudGhlbihzdWNjZXNzKS5jYXRjaChlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIEhvd2xlci5jdHguZGVjb2RlQXVkaW9EYXRhKGFycmF5YnVmZmVyLCBzdWNjZXNzLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNvdW5kIGlzIG5vdyBsb2FkZWQsIHNvIGZpbmlzaCBzZXR0aW5nIGV2ZXJ5dGhpbmcgdXAgYW5kIGZpcmUgdGhlIGxvYWRlZCBldmVudC5cbiAgICogQHBhcmFtICB7SG93bH0gc2VsZlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IGJ1ZmZlciBUaGUgZGVjb2RlZCBidWZmZXIgc291bmQgc291cmNlLlxuICAgKi9cbiAgdmFyIGxvYWRTb3VuZCA9IGZ1bmN0aW9uKHNlbGYsIGJ1ZmZlcikge1xuICAgIC8vIFNldCB0aGUgZHVyYXRpb24uXG4gICAgaWYgKGJ1ZmZlciAmJiAhc2VsZi5fZHVyYXRpb24pIHtcbiAgICAgIHNlbGYuX2R1cmF0aW9uID0gYnVmZmVyLmR1cmF0aW9uO1xuICAgIH1cblxuICAgIC8vIFNldHVwIGEgc3ByaXRlIGlmIG5vbmUgaXMgZGVmaW5lZC5cbiAgICBpZiAoT2JqZWN0LmtleXMoc2VsZi5fc3ByaXRlKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9IHtfX2RlZmF1bHQ6IFswLCBzZWxmLl9kdXJhdGlvbiAqIDEwMDBdfTtcbiAgICB9XG5cbiAgICAvLyBGaXJlIHRoZSBsb2FkZWQgZXZlbnQuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fc3RhdGUgPSAnbG9hZGVkJztcbiAgICAgIHNlbGYuX2VtaXQoJ2xvYWQnKTtcbiAgICAgIHNlbGYuX2xvYWRRdWV1ZSgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0dXAgdGhlIGF1ZGlvIGNvbnRleHQgd2hlbiBhdmFpbGFibGUsIG9yIHN3aXRjaCB0byBIVE1MNSBBdWRpbyBtb2RlLlxuICAgKi9cbiAgdmFyIHNldHVwQXVkaW9Db250ZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBhbHJlYWR5IGRldGVjdGVkIHRoYXQgV2ViIEF1ZGlvIGlzbid0IHN1cHBvcnRlZCwgZG9uJ3QgcnVuIHRoaXMgc3RlcCBhZ2Fpbi5cbiAgICBpZiAoIUhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgd2UgYXJlIHVzaW5nIFdlYiBBdWRpbyBhbmQgc2V0dXAgdGhlIEF1ZGlvQ29udGV4dCBpZiB3ZSBhcmUuXG4gICAgdHJ5IHtcbiAgICAgIGlmICh0eXBlb2YgQXVkaW9Db250ZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBIb3dsZXIuY3R4ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygd2Via2l0QXVkaW9Db250ZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBIb3dsZXIuY3R4ID0gbmV3IHdlYmtpdEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgSG93bGVyLnVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIEhvd2xlci51c2luZ1dlYkF1ZGlvID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGF1ZGlvIGNvbnRleHQgY3JlYXRpb24gc3RpbGwgZmFpbGVkLCBzZXQgdXNpbmcgd2ViIGF1ZGlvIHRvIGZhbHNlLlxuICAgIGlmICghSG93bGVyLmN0eCkge1xuICAgICAgSG93bGVyLnVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBhIHdlYnZpZXcgaXMgYmVpbmcgdXNlZCBvbiBpT1M4IG9yIGVhcmxpZXIgKHJhdGhlciB0aGFuIHRoZSBicm93c2VyKS5cbiAgICAvLyBJZiBpdCBpcywgZGlzYWJsZSBXZWIgQXVkaW8gYXMgaXQgY2F1c2VzIGNyYXNoaW5nLlxuICAgIHZhciBpT1MgPSAoL2lQKGhvbmV8b2R8YWQpLy50ZXN0KEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnBsYXRmb3JtKSk7XG4gICAgdmFyIGFwcFZlcnNpb24gPSBIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9PUyAoXFxkKylfKFxcZCspXz8oXFxkKyk/Lyk7XG4gICAgdmFyIHZlcnNpb24gPSBhcHBWZXJzaW9uID8gcGFyc2VJbnQoYXBwVmVyc2lvblsxXSwgMTApIDogbnVsbDtcbiAgICBpZiAoaU9TICYmIHZlcnNpb24gJiYgdmVyc2lvbiA8IDkpIHtcbiAgICAgIHZhciBzYWZhcmkgPSAvc2FmYXJpLy50ZXN0KEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIGlmIChIb3dsZXIuX25hdmlnYXRvciAmJiAhc2FmYXJpKSB7XG4gICAgICAgIEhvd2xlci51c2luZ1dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGFuZCBleHBvc2UgdGhlIG1hc3RlciBHYWluTm9kZSB3aGVuIHVzaW5nIFdlYiBBdWRpbyAodXNlZnVsIGZvciBwbHVnaW5zIG9yIGFkdmFuY2VkIHVzYWdlKS5cbiAgICBpZiAoSG93bGVyLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgIEhvd2xlci5tYXN0ZXJHYWluID0gKHR5cGVvZiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4gPT09ICd1bmRlZmluZWQnKSA/IEhvd2xlci5jdHguY3JlYXRlR2Fpbk5vZGUoKSA6IEhvd2xlci5jdHguY3JlYXRlR2FpbigpO1xuICAgICAgSG93bGVyLm1hc3RlckdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZShIb3dsZXIuX211dGVkID8gMCA6IEhvd2xlci5fdm9sdW1lLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgIEhvd2xlci5tYXN0ZXJHYWluLmNvbm5lY3QoSG93bGVyLmN0eC5kZXN0aW5hdGlvbik7XG4gICAgfVxuXG4gICAgLy8gUmUtcnVuIHRoZSBzZXR1cCBvbiBIb3dsZXIuXG4gICAgSG93bGVyLl9zZXR1cCgpO1xuICB9O1xuXG4gIC8vIEFkZCBzdXBwb3J0IGZvciBBTUQgKEFzeW5jaHJvbm91cyBNb2R1bGUgRGVmaW5pdGlvbikgbGlicmFyaWVzIHN1Y2ggYXMgcmVxdWlyZS5qcy5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbXSwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBIb3dsZXI6IEhvd2xlcixcbiAgICAgICAgSG93bDogSG93bFxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEFkZCBzdXBwb3J0IGZvciBDb21tb25KUyBsaWJyYXJpZXMgc3VjaCBhcyBicm93c2VyaWZ5LlxuICBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgZXhwb3J0cy5Ib3dsZXIgPSBIb3dsZXI7XG4gICAgZXhwb3J0cy5Ib3dsID0gSG93bDtcbiAgfVxuXG4gIC8vIEFkZCB0byBnbG9iYWwgaW4gTm9kZS5qcyAoZm9yIHRlc3RpbmcsIGV0YykuXG4gIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgIGdsb2JhbC5Ib3dsZXJHbG9iYWwgPSBIb3dsZXJHbG9iYWw7XG4gICAgZ2xvYmFsLkhvd2xlciA9IEhvd2xlcjtcbiAgICBnbG9iYWwuSG93bCA9IEhvd2w7XG4gICAgZ2xvYmFsLlNvdW5kID0gU291bmQ7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHsgIC8vIERlZmluZSBnbG9iYWxseSBpbiBjYXNlIEFNRCBpcyBub3QgYXZhaWxhYmxlIG9yIHVudXNlZC5cbiAgICB3aW5kb3cuSG93bGVyR2xvYmFsID0gSG93bGVyR2xvYmFsO1xuICAgIHdpbmRvdy5Ib3dsZXIgPSBIb3dsZXI7XG4gICAgd2luZG93Lkhvd2wgPSBIb3dsO1xuICAgIHdpbmRvdy5Tb3VuZCA9IFNvdW5kO1xuICB9XG59KSgpO1xuXG5cbi8qIVxuICogIFNwYXRpYWwgUGx1Z2luIC0gQWRkcyBzdXBwb3J0IGZvciBzdGVyZW8gYW5kIDNEIGF1ZGlvIHdoZXJlIFdlYiBBdWRpbyBpcyBzdXBwb3J0ZWQuXG4gKiAgXG4gKiAgaG93bGVyLmpzIHYyLjIuNFxuICogIGhvd2xlcmpzLmNvbVxuICpcbiAqICAoYykgMjAxMy0yMDIwLCBKYW1lcyBTaW1wc29uIG9mIEdvbGRGaXJlIFN0dWRpb3NcbiAqICBnb2xkZmlyZXN0dWRpb3MuY29tXG4gKlxuICogIE1JVCBMaWNlbnNlXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBTZXR1cCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUuX3BvcyA9IFswLCAwLCAwXTtcbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5fb3JpZW50YXRpb24gPSBbMCwgMCwgLTEsIDAsIDEsIDBdO1xuXG4gIC8qKiBHbG9iYWwgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogSGVscGVyIG1ldGhvZCB0byB1cGRhdGUgdGhlIHN0ZXJlbyBwYW5uaW5nIHBvc2l0aW9uIG9mIGFsbCBjdXJyZW50IEhvd2xzLlxuICAgKiBGdXR1cmUgSG93bHMgd2lsbCBub3QgdXNlIHRoaXMgdmFsdWUgdW5sZXNzIGV4cGxpY2l0bHkgc2V0LlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHBhbiBBIHZhbHVlIG9mIC0xLjAgaXMgYWxsIHRoZSB3YXkgbGVmdCBhbmQgMS4wIGlzIGFsbCB0aGUgd2F5IHJpZ2h0LlxuICAgKiBAcmV0dXJuIHtIb3dsZXIvTnVtYmVyfSAgICAgU2VsZiBvciBjdXJyZW50IHN0ZXJlbyBwYW5uaW5nIHZhbHVlLlxuICAgKi9cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5zdGVyZW8gPSBmdW5jdGlvbihwYW4pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuY3R4IHx8ICFzZWxmLmN0eC5saXN0ZW5lcikge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBIb3dscyBhbmQgdXBkYXRlIHRoZWlyIHN0ZXJlbyBwYW5uaW5nLlxuICAgIGZvciAodmFyIGk9c2VsZi5faG93bHMubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xuICAgICAgc2VsZi5faG93bHNbaV0uc3RlcmVvKHBhbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lciBpbiAzRCBjYXJ0ZXNpYW4gc3BhY2UuIFNvdW5kcyB1c2luZ1xuICAgKiAzRCBwb3NpdGlvbiB3aWxsIGJlIHJlbGF0aXZlIHRvIHRoZSBsaXN0ZW5lcidzIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggVGhlIHgtcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgVGhlIHktcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogVGhlIHotcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJuIHtIb3dsZXIvQXJyYXl9ICAgU2VsZiBvciBjdXJyZW50IGxpc3RlbmVyIHBvc2l0aW9uLlxuICAgKi9cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5wb3MgPSBmdW5jdGlvbih4LCB5LCB6KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLmN0eCB8fCAhc2VsZi5jdHgubGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9wb3NbMV0gOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IHNlbGYuX3Bvc1syXSA6IHo7XG5cbiAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICBzZWxmLl9wb3MgPSBbeCwgeSwgel07XG5cbiAgICAgIGlmICh0eXBlb2Ygc2VsZi5jdHgubGlzdGVuZXIucG9zaXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5wb3NpdGlvblguc2V0VGFyZ2V0QXRUaW1lKHNlbGYuX3Bvc1swXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIucG9zaXRpb25ZLnNldFRhcmdldEF0VGltZShzZWxmLl9wb3NbMV0sIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnBvc2l0aW9uWi5zZXRUYXJnZXRBdFRpbWUoc2VsZi5fcG9zWzJdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIuc2V0UG9zaXRpb24oc2VsZi5fcG9zWzBdLCBzZWxmLl9wb3NbMV0sIHNlbGYuX3Bvc1syXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzZWxmLl9wb3M7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIGRpcmVjdGlvbiB0aGUgbGlzdGVuZXIgaXMgcG9pbnRpbmcgaW4gdGhlIDNEIGNhcnRlc2lhbiBzcGFjZS5cbiAgICogQSBmcm9udCBhbmQgdXAgdmVjdG9yIG11c3QgYmUgcHJvdmlkZWQuIFRoZSBmcm9udCBpcyB0aGUgZGlyZWN0aW9uIHRoZVxuICAgKiBmYWNlIG9mIHRoZSBsaXN0ZW5lciBpcyBwb2ludGluZywgYW5kIHVwIGlzIHRoZSBkaXJlY3Rpb24gdGhlIHRvcCBvZiB0aGVcbiAgICogbGlzdGVuZXIgaXMgcG9pbnRpbmcuIFRodXMsIHRoZXNlIHZhbHVlcyBhcmUgZXhwZWN0ZWQgdG8gYmUgYXQgcmlnaHQgYW5nbGVzXG4gICAqIGZyb20gZWFjaCBvdGhlci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4ICAgVGhlIHgtb3JpZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgICBUaGUgeS1vcmllbnRhdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geiAgIFRoZSB6LW9yaWVudGF0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4VXAgVGhlIHgtb3JpZW50YXRpb24gb2YgdGhlIHRvcCBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geVVwIFRoZSB5LW9yaWVudGF0aW9uIG9mIHRoZSB0b3Agb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHpVcCBUaGUgei1vcmllbnRhdGlvbiBvZiB0aGUgdG9wIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHJldHVybiB7SG93bGVyL0FycmF5fSAgICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IG9yaWVudGF0aW9uIHZlY3RvcnMuXG4gICAqL1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLm9yaWVudGF0aW9uID0gZnVuY3Rpb24oeCwgeSwgeiwgeFVwLCB5VXAsIHpVcCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5jdHggfHwgIXNlbGYuY3R4Lmxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgdmFyIG9yID0gc2VsZi5fb3JpZW50YXRpb247XG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gb3JbMV0gOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IG9yWzJdIDogejtcbiAgICB4VXAgPSAodHlwZW9mIHhVcCAhPT0gJ251bWJlcicpID8gb3JbM10gOiB4VXA7XG4gICAgeVVwID0gKHR5cGVvZiB5VXAgIT09ICdudW1iZXInKSA/IG9yWzRdIDogeVVwO1xuICAgIHpVcCA9ICh0eXBlb2YgelVwICE9PSAnbnVtYmVyJykgPyBvcls1XSA6IHpVcDtcblxuICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gW3gsIHksIHosIHhVcCwgeVVwLCB6VXBdO1xuXG4gICAgICBpZiAodHlwZW9mIHNlbGYuY3R4Lmxpc3RlbmVyLmZvcndhcmRYICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5mb3J3YXJkWC5zZXRUYXJnZXRBdFRpbWUoeCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIuZm9yd2FyZFkuc2V0VGFyZ2V0QXRUaW1lKHksIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLmZvcndhcmRaLnNldFRhcmdldEF0VGltZSh6LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci51cFguc2V0VGFyZ2V0QXRUaW1lKHhVcCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIudXBZLnNldFRhcmdldEF0VGltZSh5VXAsIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnVwWi5zZXRUYXJnZXRBdFRpbWUoelVwLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIuc2V0T3JpZW50YXRpb24oeCwgeSwgeiwgeFVwLCB5VXAsIHpVcCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvcjtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKiogR3JvdXAgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQWRkIG5ldyBwcm9wZXJ0aWVzIHRvIHRoZSBjb3JlIGluaXQuXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBfc3VwZXIgQ29yZSBpbml0IG1ldGhvZC5cbiAgICogQHJldHVybiB7SG93bH1cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLmluaXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU2V0dXAgdXNlci1kZWZpbmVkIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gby5vcmllbnRhdGlvbiB8fCBbMSwgMCwgMF07XG4gICAgICBzZWxmLl9zdGVyZW8gPSBvLnN0ZXJlbyB8fCBudWxsO1xuICAgICAgc2VsZi5fcG9zID0gby5wb3MgfHwgbnVsbDtcbiAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSB7XG4gICAgICAgIGNvbmVJbm5lckFuZ2xlOiB0eXBlb2Ygby5jb25lSW5uZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVJbm5lckFuZ2xlIDogMzYwLFxuICAgICAgICBjb25lT3V0ZXJBbmdsZTogdHlwZW9mIG8uY29uZU91dGVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJBbmdsZSA6IDM2MCxcbiAgICAgICAgY29uZU91dGVyR2FpbjogdHlwZW9mIG8uY29uZU91dGVyR2FpbiAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckdhaW4gOiAwLFxuICAgICAgICBkaXN0YW5jZU1vZGVsOiB0eXBlb2Ygby5kaXN0YW5jZU1vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8uZGlzdGFuY2VNb2RlbCA6ICdpbnZlcnNlJyxcbiAgICAgICAgbWF4RGlzdGFuY2U6IHR5cGVvZiBvLm1heERpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ubWF4RGlzdGFuY2UgOiAxMDAwMCxcbiAgICAgICAgcGFubmluZ01vZGVsOiB0eXBlb2Ygby5wYW5uaW5nTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uaW5nTW9kZWwgOiAnSFJURicsXG4gICAgICAgIHJlZkRpc3RhbmNlOiB0eXBlb2Ygby5yZWZEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJlZkRpc3RhbmNlIDogMSxcbiAgICAgICAgcm9sbG9mZkZhY3RvcjogdHlwZW9mIG8ucm9sbG9mZkZhY3RvciAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJvbGxvZmZGYWN0b3IgOiAxXG4gICAgICB9O1xuXG4gICAgICAvLyBTZXR1cCBldmVudCBsaXN0ZW5lcnMuXG4gICAgICBzZWxmLl9vbnN0ZXJlbyA9IG8ub25zdGVyZW8gPyBbe2ZuOiBvLm9uc3RlcmVvfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucG9zID0gby5vbnBvcyA/IFt7Zm46IG8ub25wb3N9XSA6IFtdO1xuICAgICAgc2VsZi5fb25vcmllbnRhdGlvbiA9IG8ub25vcmllbnRhdGlvbiA/IFt7Zm46IG8ub25vcmllbnRhdGlvbn1dIDogW107XG5cbiAgICAgIC8vIENvbXBsZXRlIGluaXRpbGl6YXRpb24gd2l0aCBob3dsZXIuanMgY29yZSdzIGluaXQgZnVuY3Rpb24uXG4gICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgbyk7XG4gICAgfTtcbiAgfSkoSG93bC5wcm90b3R5cGUuaW5pdCk7XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIHN0ZXJlbyBwYW5uaW5nIG9mIHRoZSBhdWRpbyBzb3VyY2UgZm9yIHRoaXMgc291bmQgb3IgYWxsIGluIHRoZSBncm91cC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBwYW4gIEEgdmFsdWUgb2YgLTEuMCBpcyBhbGwgdGhlIHdheSBsZWZ0IGFuZCAxLjAgaXMgYWxsIHRoZSB3YXkgcmlnaHQuXG4gICAqIEBwYXJhbSAge051bWJlcn0gaWQgKG9wdGlvbmFsKSBUaGUgc291bmQgSUQuIElmIG5vbmUgaXMgcGFzc2VkLCBhbGwgaW4gZ3JvdXAgd2lsbCBiZSB1cGRhdGVkLlxuICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IHN0ZXJlbyBwYW5uaW5nIHZhbHVlLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUuc3RlcmVvID0gZnVuY3Rpb24ocGFuLCBpZCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHN0ZXJlbyBwYW4gd2hlbiBjYXBhYmxlLlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICBldmVudDogJ3N0ZXJlbycsXG4gICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5zdGVyZW8ocGFuLCBpZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgUGFubmVyU3RlcmVvTm9kZSBzdXBwb3J0IGFuZCBmYWxsYmFjayB0byBQYW5uZXJOb2RlIGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG4gICAgdmFyIHBhbm5lclR5cGUgPSAodHlwZW9mIEhvd2xlci5jdHguY3JlYXRlU3RlcmVvUGFubmVyID09PSAndW5kZWZpbmVkJykgPyAnc3BhdGlhbCcgOiAnc3RlcmVvJztcblxuICAgIC8vIFNldHVwIHRoZSBncm91cCdzIHN0ZXJlbyBwYW5uaW5nIGlmIG5vIElEIGlzIHBhc3NlZC5cbiAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gUmV0dXJuIHRoZSBncm91cCdzIHN0ZXJlbyBwYW5uaW5nIGlmIG5vIHBhcmFtZXRlcnMgYXJlIHBhc3NlZC5cbiAgICAgIGlmICh0eXBlb2YgcGFuID09PSAnbnVtYmVyJykge1xuICAgICAgICBzZWxmLl9zdGVyZW8gPSBwYW47XG4gICAgICAgIHNlbGYuX3BvcyA9IFtwYW4sIDAsIDBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX3N0ZXJlbztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgdGhlIHN0cmVvIHBhbm5pbmcgb2Ygb25lIG9yIGFsbCBzb3VuZHMgaW4gZ3JvdXAuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHBhbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBzb3VuZC5fc3RlcmVvID0gcGFuO1xuICAgICAgICAgIHNvdW5kLl9wb3MgPSBbcGFuLCAwLCAwXTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIGZhbGxpbmcgYmFjaywgbWFrZSBzdXJlIHRoZSBwYW5uaW5nTW9kZWwgaXMgZXF1YWxwb3dlci5cbiAgICAgICAgICAgIHNvdW5kLl9wYW5uZXJBdHRyLnBhbm5pbmdNb2RlbCA9ICdlcXVhbHBvd2VyJztcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBwYW5uZXIgc2V0dXAgYW5kIGNyZWF0ZSBhIG5ldyBvbmUgaWYgbm90LlxuICAgICAgICAgICAgaWYgKCFzb3VuZC5fcGFubmVyIHx8ICFzb3VuZC5fcGFubmVyLnBhbikge1xuICAgICAgICAgICAgICBzZXR1cFBhbm5lcihzb3VuZCwgcGFubmVyVHlwZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwYW5uZXJUeXBlID09PSAnc3BhdGlhbCcpIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWC5zZXRWYWx1ZUF0VGltZShwYW4sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25ZLnNldFZhbHVlQXRUaW1lKDAsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25aLnNldFZhbHVlQXRUaW1lKDAsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0UG9zaXRpb24ocGFuLCAwLCAwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wYW4uc2V0VmFsdWVBdFRpbWUocGFuLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdzdGVyZW8nLCBzb3VuZC5faWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzb3VuZC5fc3RlcmVvO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIDNEIHNwYXRpYWwgcG9zaXRpb24gb2YgdGhlIGF1ZGlvIHNvdXJjZSBmb3IgdGhpcyBzb3VuZCBvciBncm91cCByZWxhdGl2ZSB0byB0aGUgZ2xvYmFsIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggIFRoZSB4LXBvc2l0aW9uIG9mIHRoZSBhdWRpbyBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSAgVGhlIHktcG9zaXRpb24gb2YgdGhlIGF1ZGlvIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6ICBUaGUgei1wb3NpdGlvbiBvZiB0aGUgYXVkaW8gc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIChvcHRpb25hbCkgVGhlIHNvdW5kIElELiBJZiBub25lIGlzIHBhc3NlZCwgYWxsIGluIGdyb3VwIHdpbGwgYmUgdXBkYXRlZC5cbiAgICogQHJldHVybiB7SG93bC9BcnJheX0gICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IDNEIHNwYXRpYWwgcG9zaXRpb246IFt4LCB5LCB6XS5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLnBvcyA9IGZ1bmN0aW9uKHgsIHksIHosIGlkKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2UgcG9zaXRpb24gd2hlbiBjYXBhYmxlLlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICBldmVudDogJ3BvcycsXG4gICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5wb3MoeCwgeSwgeiwgaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IDAgOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IC0wLjUgOiB6O1xuXG4gICAgLy8gU2V0dXAgdGhlIGdyb3VwJ3Mgc3BhdGlhbCBwb3NpdGlvbiBpZiBubyBJRCBpcyBwYXNzZWQuXG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBzcGF0aWFsIHBvc2l0aW9uIGlmIG5vIHBhcmFtZXRlcnMgYXJlIHBhc3NlZC5cbiAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgc2VsZi5fcG9zID0gW3gsIHksIHpdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BvcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgdGhlIHNwYXRpYWwgcG9zaXRpb24gb2Ygb25lIG9yIGFsbCBzb3VuZHMgaW4gZ3JvdXAuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc291bmQuX3BvcyA9IFt4LCB5LCB6XTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBwYW5uZXIgc2V0dXAgYW5kIGNyZWF0ZSBhIG5ldyBvbmUgaWYgbm90LlxuICAgICAgICAgICAgaWYgKCFzb3VuZC5fcGFubmVyIHx8IHNvdW5kLl9wYW5uZXIucGFuKSB7XG4gICAgICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCAnc3BhdGlhbCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWC5zZXRWYWx1ZUF0VGltZSh4LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblkuc2V0VmFsdWVBdFRpbWUoeSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25aLnNldFZhbHVlQXRUaW1lKHosIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5zZXRQb3NpdGlvbih4LCB5LCB6KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdwb3MnLCBzb3VuZC5faWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzb3VuZC5fcG9zO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIGRpcmVjdGlvbiB0aGUgYXVkaW8gc291cmNlIGlzIHBvaW50aW5nIGluIHRoZSAzRCBjYXJ0ZXNpYW4gY29vcmRpbmF0ZVxuICAgKiBzcGFjZS4gRGVwZW5kaW5nIG9uIGhvdyBkaXJlY3Rpb24gdGhlIHNvdW5kIGlzLCBiYXNlZCBvbiB0aGUgYGNvbmVgIGF0dHJpYnV0ZXMsXG4gICAqIGEgc291bmQgcG9pbnRpbmcgYXdheSBmcm9tIHRoZSBsaXN0ZW5lciBjYW4gYmUgcXVpZXQgb3Igc2lsZW50LlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggIFRoZSB4LW9yaWVudGF0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSAgVGhlIHktb3JpZW50YXRpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6ICBUaGUgei1vcmllbnRhdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIChvcHRpb25hbCkgVGhlIHNvdW5kIElELiBJZiBub25lIGlzIHBhc3NlZCwgYWxsIGluIGdyb3VwIHdpbGwgYmUgdXBkYXRlZC5cbiAgICogQHJldHVybiB7SG93bC9BcnJheX0gICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IDNEIHNwYXRpYWwgb3JpZW50YXRpb246IFt4LCB5LCB6XS5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLm9yaWVudGF0aW9uID0gZnVuY3Rpb24oeCwgeSwgeiwgaWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBvcmllbnRhdGlvbiB3aGVuIGNhcGFibGUuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgIGV2ZW50OiAnb3JpZW50YXRpb24nLFxuICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYub3JpZW50YXRpb24oeCwgeSwgeiwgaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IHNlbGYuX29yaWVudGF0aW9uWzFdIDogeTtcbiAgICB6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9vcmllbnRhdGlvblsyXSA6IHo7XG5cbiAgICAvLyBTZXR1cCB0aGUgZ3JvdXAncyBzcGF0aWFsIG9yaWVudGF0aW9uIGlmIG5vIElEIGlzIHBhc3NlZC5cbiAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gUmV0dXJuIHRoZSBncm91cCdzIHNwYXRpYWwgb3JpZW50YXRpb24gaWYgbm8gcGFyYW1ldGVycyBhcmUgcGFzc2VkLlxuICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IFt4LCB5LCB6XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9vcmllbnRhdGlvbjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgdGhlIHNwYXRpYWwgb3JpZW50YXRpb24gb2Ygb25lIG9yIGFsbCBzb3VuZHMgaW4gZ3JvdXAuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc291bmQuX29yaWVudGF0aW9uID0gW3gsIHksIHpdO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHBhbm5lciBzZXR1cCBhbmQgY3JlYXRlIGEgbmV3IG9uZSBpZiBub3QuXG4gICAgICAgICAgICBpZiAoIXNvdW5kLl9wYW5uZXIpIHtcbiAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBwb3NpdGlvbiB0byBzZXR1cCB0aGUgbm9kZSB3aXRoLlxuICAgICAgICAgICAgICBpZiAoIXNvdW5kLl9wb3MpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fcG9zID0gc2VsZi5fcG9zIHx8IFswLCAwLCAtMC41XTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCAnc3BhdGlhbCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWC5zZXRWYWx1ZUF0VGltZSh4LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblkuc2V0VmFsdWVBdFRpbWUoeSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25aLnNldFZhbHVlQXRUaW1lKHosIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5zZXRPcmllbnRhdGlvbih4LCB5LCB6KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdvcmllbnRhdGlvbicsIHNvdW5kLl9pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kLl9vcmllbnRhdGlvbjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBwYW5uZXIgbm9kZSdzIGF0dHJpYnV0ZXMgZm9yIGEgc291bmQgb3IgZ3JvdXAgb2Ygc291bmRzLlxuICAgKiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxsIHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICogICBwYW5uZXJBdHRyKCkgLT4gUmV0dXJucyB0aGUgZ3JvdXAncyB2YWx1ZXMuXG4gICAqICAgcGFubmVyQXR0cihpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyB2YWx1ZXMuXG4gICAqICAgcGFubmVyQXR0cihvKSAtPiBTZXQncyB0aGUgdmFsdWVzIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgKiAgIHBhbm5lckF0dHIobywgaWQpIC0+IFNldCdzIHRoZSB2YWx1ZXMgb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgKlxuICAgKiAgIEF0dHJpYnV0ZXM6XG4gICAqICAgICBjb25lSW5uZXJBbmdsZSAtICgzNjAgYnkgZGVmYXVsdCkgQSBwYXJhbWV0ZXIgZm9yIGRpcmVjdGlvbmFsIGF1ZGlvIHNvdXJjZXMsIHRoaXMgaXMgYW4gYW5nbGUsIGluIGRlZ3JlZXMsXG4gICAqICAgICAgICAgICAgICAgICAgICAgIGluc2lkZSBvZiB3aGljaCB0aGVyZSB3aWxsIGJlIG5vIHZvbHVtZSByZWR1Y3Rpb24uXG4gICAqICAgICBjb25lT3V0ZXJBbmdsZSAtICgzNjAgYnkgZGVmYXVsdCkgQSBwYXJhbWV0ZXIgZm9yIGRpcmVjdGlvbmFsIGF1ZGlvIHNvdXJjZXMsIHRoaXMgaXMgYW4gYW5nbGUsIGluIGRlZ3JlZXMsXG4gICAqICAgICAgICAgICAgICAgICAgICAgIG91dHNpZGUgb2Ygd2hpY2ggdGhlIHZvbHVtZSB3aWxsIGJlIHJlZHVjZWQgdG8gYSBjb25zdGFudCB2YWx1ZSBvZiBgY29uZU91dGVyR2FpbmAuXG4gICAqICAgICBjb25lT3V0ZXJHYWluIC0gKDAgYnkgZGVmYXVsdCkgQSBwYXJhbWV0ZXIgZm9yIGRpcmVjdGlvbmFsIGF1ZGlvIHNvdXJjZXMsIHRoaXMgaXMgdGhlIGdhaW4gb3V0c2lkZSBvZiB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICBgY29uZU91dGVyQW5nbGVgLiBJdCBpcyBhIGxpbmVhciB2YWx1ZSBpbiB0aGUgcmFuZ2UgYFswLCAxXWAuXG4gICAqICAgICBkaXN0YW5jZU1vZGVsIC0gKCdpbnZlcnNlJyBieSBkZWZhdWx0KSBEZXRlcm1pbmVzIGFsZ29yaXRobSB1c2VkIHRvIHJlZHVjZSB2b2x1bWUgYXMgYXVkaW8gbW92ZXMgYXdheSBmcm9tXG4gICAqICAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIuIENhbiBiZSBgbGluZWFyYCwgYGludmVyc2VgIG9yIGBleHBvbmVudGlhbC5cbiAgICogICAgIG1heERpc3RhbmNlIC0gKDEwMDAwIGJ5IGRlZmF1bHQpIFRoZSBtYXhpbXVtIGRpc3RhbmNlIGJldHdlZW4gc291cmNlIGFuZCBsaXN0ZW5lciwgYWZ0ZXIgd2hpY2ggdGhlIHZvbHVtZVxuICAgKiAgICAgICAgICAgICAgICAgICB3aWxsIG5vdCBiZSByZWR1Y2VkIGFueSBmdXJ0aGVyLlxuICAgKiAgICAgcmVmRGlzdGFuY2UgLSAoMSBieSBkZWZhdWx0KSBBIHJlZmVyZW5jZSBkaXN0YW5jZSBmb3IgcmVkdWNpbmcgdm9sdW1lIGFzIHNvdXJjZSBtb3ZlcyBmdXJ0aGVyIGZyb20gdGhlIGxpc3RlbmVyLlxuICAgKiAgICAgICAgICAgICAgICAgICBUaGlzIGlzIHNpbXBseSBhIHZhcmlhYmxlIG9mIHRoZSBkaXN0YW5jZSBtb2RlbCBhbmQgaGFzIGEgZGlmZmVyZW50IGVmZmVjdCBkZXBlbmRpbmcgb24gd2hpY2ggbW9kZWxcbiAgICogICAgICAgICAgICAgICAgICAgaXMgdXNlZCBhbmQgdGhlIHNjYWxlIG9mIHlvdXIgY29vcmRpbmF0ZXMuIEdlbmVyYWxseSwgdm9sdW1lIHdpbGwgYmUgZXF1YWwgdG8gMSBhdCB0aGlzIGRpc3RhbmNlLlxuICAgKiAgICAgcm9sbG9mZkZhY3RvciAtICgxIGJ5IGRlZmF1bHQpIEhvdyBxdWlja2x5IHRoZSB2b2x1bWUgcmVkdWNlcyBhcyBzb3VyY2UgbW92ZXMgZnJvbSBsaXN0ZW5lci4gVGhpcyBpcyBzaW1wbHkgYVxuICAgKiAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlIG9mIHRoZSBkaXN0YW5jZSBtb2RlbCBhbmQgY2FuIGJlIGluIHRoZSByYW5nZSBvZiBgWzAsIDFdYCB3aXRoIGBsaW5lYXJgIGFuZCBgWzAsIFx1MjIxRV1gXG4gICAqICAgICAgICAgICAgICAgICAgICAgd2l0aCBgaW52ZXJzZWAgYW5kIGBleHBvbmVudGlhbGAuXG4gICAqICAgICBwYW5uaW5nTW9kZWwgLSAoJ0hSVEYnIGJ5IGRlZmF1bHQpIERldGVybWluZXMgd2hpY2ggc3BhdGlhbGl6YXRpb24gYWxnb3JpdGhtIGlzIHVzZWQgdG8gcG9zaXRpb24gYXVkaW8uXG4gICAqICAgICAgICAgICAgICAgICAgICAgQ2FuIGJlIGBIUlRGYCBvciBgZXF1YWxwb3dlcmAuXG4gICAqXG4gICAqIEByZXR1cm4ge0hvd2wvT2JqZWN0fSBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCBwYW5uZXIgYXR0cmlidXRlcy5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLnBhbm5lckF0dHIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIG8sIGlkLCBzb3VuZDtcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBwYW5uZXIgYXR0cmlidXRlIHZhbHVlcy5cbiAgICAgIHJldHVybiBzZWxmLl9wYW5uZXJBdHRyO1xuICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgbyA9IGFyZ3NbMF07XG5cbiAgICAgICAgLy8gU2V0IHRoZSBncm91J3MgcGFubmVyIGF0dHJpYnV0ZSB2YWx1ZXMuXG4gICAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaWYgKCFvLnBhbm5lckF0dHIpIHtcbiAgICAgICAgICAgIG8ucGFubmVyQXR0ciA9IHtcbiAgICAgICAgICAgICAgY29uZUlubmVyQW5nbGU6IG8uY29uZUlubmVyQW5nbGUsXG4gICAgICAgICAgICAgIGNvbmVPdXRlckFuZ2xlOiBvLmNvbmVPdXRlckFuZ2xlLFxuICAgICAgICAgICAgICBjb25lT3V0ZXJHYWluOiBvLmNvbmVPdXRlckdhaW4sXG4gICAgICAgICAgICAgIGRpc3RhbmNlTW9kZWw6IG8uZGlzdGFuY2VNb2RlbCxcbiAgICAgICAgICAgICAgbWF4RGlzdGFuY2U6IG8ubWF4RGlzdGFuY2UsXG4gICAgICAgICAgICAgIHJlZkRpc3RhbmNlOiBvLnJlZkRpc3RhbmNlLFxuICAgICAgICAgICAgICByb2xsb2ZmRmFjdG9yOiBvLnJvbGxvZmZGYWN0b3IsXG4gICAgICAgICAgICAgIHBhbm5pbmdNb2RlbDogby5wYW5uaW5nTW9kZWxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fcGFubmVyQXR0ciA9IHtcbiAgICAgICAgICAgIGNvbmVJbm5lckFuZ2xlOiB0eXBlb2Ygby5wYW5uZXJBdHRyLmNvbmVJbm5lckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5jb25lSW5uZXJBbmdsZSA6IHNlbGYuX2NvbmVJbm5lckFuZ2xlLFxuICAgICAgICAgICAgY29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLnBhbm5lckF0dHIuY29uZU91dGVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLmNvbmVPdXRlckFuZ2xlIDogc2VsZi5fY29uZU91dGVyQW5nbGUsXG4gICAgICAgICAgICBjb25lT3V0ZXJHYWluOiB0eXBlb2Ygby5wYW5uZXJBdHRyLmNvbmVPdXRlckdhaW4gIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLmNvbmVPdXRlckdhaW4gOiBzZWxmLl9jb25lT3V0ZXJHYWluLFxuICAgICAgICAgICAgZGlzdGFuY2VNb2RlbDogdHlwZW9mIG8ucGFubmVyQXR0ci5kaXN0YW5jZU1vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5kaXN0YW5jZU1vZGVsIDogc2VsZi5fZGlzdGFuY2VNb2RlbCxcbiAgICAgICAgICAgIG1heERpc3RhbmNlOiB0eXBlb2Ygby5wYW5uZXJBdHRyLm1heERpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5tYXhEaXN0YW5jZSA6IHNlbGYuX21heERpc3RhbmNlLFxuICAgICAgICAgICAgcmVmRGlzdGFuY2U6IHR5cGVvZiBvLnBhbm5lckF0dHIucmVmRGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLnJlZkRpc3RhbmNlIDogc2VsZi5fcmVmRGlzdGFuY2UsXG4gICAgICAgICAgICByb2xsb2ZmRmFjdG9yOiB0eXBlb2Ygby5wYW5uZXJBdHRyLnJvbGxvZmZGYWN0b3IgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLnJvbGxvZmZGYWN0b3IgOiBzZWxmLl9yb2xsb2ZmRmFjdG9yLFxuICAgICAgICAgICAgcGFubmluZ01vZGVsOiB0eXBlb2Ygby5wYW5uZXJBdHRyLnBhbm5pbmdNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIucGFubmluZ01vZGVsIDogc2VsZi5fcGFubmluZ01vZGVsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmV0dXJuIHRoaXMgc291bmQncyBwYW5uZXIgYXR0cmlidXRlIHZhbHVlcy5cbiAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQocGFyc2VJbnQoYXJnc1swXSwgMTApKTtcbiAgICAgICAgcmV0dXJuIHNvdW5kID8gc291bmQuX3Bhbm5lckF0dHIgOiBzZWxmLl9wYW5uZXJBdHRyO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgIG8gPSBhcmdzWzBdO1xuICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRoZSB2YWx1ZXMgb2YgdGhlIHNwZWNpZmllZCBzb3VuZHMuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgLy8gTWVyZ2UgdGhlIG5ldyB2YWx1ZXMgaW50byB0aGUgc291bmQuXG4gICAgICAgIHZhciBwYSA9IHNvdW5kLl9wYW5uZXJBdHRyO1xuICAgICAgICBwYSA9IHtcbiAgICAgICAgICBjb25lSW5uZXJBbmdsZTogdHlwZW9mIG8uY29uZUlubmVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lSW5uZXJBbmdsZSA6IHBhLmNvbmVJbm5lckFuZ2xlLFxuICAgICAgICAgIGNvbmVPdXRlckFuZ2xlOiB0eXBlb2Ygby5jb25lT3V0ZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckFuZ2xlIDogcGEuY29uZU91dGVyQW5nbGUsXG4gICAgICAgICAgY29uZU91dGVyR2FpbjogdHlwZW9mIG8uY29uZU91dGVyR2FpbiAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckdhaW4gOiBwYS5jb25lT3V0ZXJHYWluLFxuICAgICAgICAgIGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLmRpc3RhbmNlTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5kaXN0YW5jZU1vZGVsIDogcGEuZGlzdGFuY2VNb2RlbCxcbiAgICAgICAgICBtYXhEaXN0YW5jZTogdHlwZW9mIG8ubWF4RGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5tYXhEaXN0YW5jZSA6IHBhLm1heERpc3RhbmNlLFxuICAgICAgICAgIHJlZkRpc3RhbmNlOiB0eXBlb2Ygby5yZWZEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJlZkRpc3RhbmNlIDogcGEucmVmRGlzdGFuY2UsXG4gICAgICAgICAgcm9sbG9mZkZhY3RvcjogdHlwZW9mIG8ucm9sbG9mZkZhY3RvciAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJvbGxvZmZGYWN0b3IgOiBwYS5yb2xsb2ZmRmFjdG9yLFxuICAgICAgICAgIHBhbm5pbmdNb2RlbDogdHlwZW9mIG8ucGFubmluZ01vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmluZ01vZGVsIDogcGEucGFubmluZ01vZGVsXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHBhbm5lciBub2RlIGlmIG9uZSBkb2Vzbid0IGFscmVhZHkgZXhpc3QuXG4gICAgICAgIHZhciBwYW5uZXIgPSBzb3VuZC5fcGFubmVyO1xuICAgICAgICBpZiAoIXBhbm5lcikge1xuICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgcG9zaXRpb24gdG8gc2V0dXAgdGhlIG5vZGUgd2l0aC5cbiAgICAgICAgICBpZiAoIXNvdW5kLl9wb3MpIHtcbiAgICAgICAgICAgIHNvdW5kLl9wb3MgPSBzZWxmLl9wb3MgfHwgWzAsIDAsIC0wLjVdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBwYW5uZXIgbm9kZS5cbiAgICAgICAgICBzZXR1cFBhbm5lcihzb3VuZCwgJ3NwYXRpYWwnKTtcbiAgICAgICAgICBwYW5uZXIgPSBzb3VuZC5fcGFubmVyXG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgdGhlIHBhbm5lciB2YWx1ZXMgb3IgY3JlYXRlIGEgbmV3IHBhbm5lciBpZiBub25lIGV4aXN0cy5cbiAgICAgICAgcGFubmVyLmNvbmVJbm5lckFuZ2xlID0gcGEuY29uZUlubmVyQW5nbGU7XG4gICAgICAgIHBhbm5lci5jb25lT3V0ZXJBbmdsZSA9IHBhLmNvbmVPdXRlckFuZ2xlO1xuICAgICAgICBwYW5uZXIuY29uZU91dGVyR2FpbiA9IHBhLmNvbmVPdXRlckdhaW47XG4gICAgICAgIHBhbm5lci5kaXN0YW5jZU1vZGVsID0gcGEuZGlzdGFuY2VNb2RlbDtcbiAgICAgICAgcGFubmVyLm1heERpc3RhbmNlID0gcGEubWF4RGlzdGFuY2U7XG4gICAgICAgIHBhbm5lci5yZWZEaXN0YW5jZSA9IHBhLnJlZkRpc3RhbmNlO1xuICAgICAgICBwYW5uZXIucm9sbG9mZkZhY3RvciA9IHBhLnJvbGxvZmZGYWN0b3I7XG4gICAgICAgIHBhbm5lci5wYW5uaW5nTW9kZWwgPSBwYS5wYW5uaW5nTW9kZWw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqIFNpbmdsZSBTb3VuZCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBBZGQgbmV3IHByb3BlcnRpZXMgdG8gdGhlIGNvcmUgU291bmQgaW5pdC5cbiAgICogQHBhcmFtICB7RnVuY3Rpb259IF9zdXBlciBDb3JlIFNvdW5kIGluaXQgbWV0aG9kLlxuICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICovXG4gIFNvdW5kLnByb3RvdHlwZS5pbml0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFNldHVwIHVzZXItZGVmaW5lZCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IHBhcmVudC5fb3JpZW50YXRpb247XG4gICAgICBzZWxmLl9zdGVyZW8gPSBwYXJlbnQuX3N0ZXJlbztcbiAgICAgIHNlbGYuX3BvcyA9IHBhcmVudC5fcG9zO1xuICAgICAgc2VsZi5fcGFubmVyQXR0ciA9IHBhcmVudC5fcGFubmVyQXR0cjtcblxuICAgICAgLy8gQ29tcGxldGUgaW5pdGlsaXphdGlvbiB3aXRoIGhvd2xlci5qcyBjb3JlIFNvdW5kJ3MgaW5pdCBmdW5jdGlvbi5cbiAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xuXG4gICAgICAvLyBJZiBhIHN0ZXJlbyBvciBwb3NpdGlvbiB3YXMgc3BlY2lmaWVkLCBzZXQgaXQgdXAuXG4gICAgICBpZiAoc2VsZi5fc3RlcmVvKSB7XG4gICAgICAgIHBhcmVudC5zdGVyZW8oc2VsZi5fc3RlcmVvKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5fcG9zKSB7XG4gICAgICAgIHBhcmVudC5wb3Moc2VsZi5fcG9zWzBdLCBzZWxmLl9wb3NbMV0sIHNlbGYuX3Bvc1syXSwgc2VsZi5faWQpO1xuICAgICAgfVxuICAgIH07XG4gIH0pKFNvdW5kLnByb3RvdHlwZS5pbml0KTtcblxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIFNvdW5kLnJlc2V0IG1ldGhvZCB0byBjbGVhbiB1cCBwcm9wZXJ0aWVzIGZyb20gdGhlIHNwYXRpYWwgcGx1Z2luLlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gX3N1cGVyIFNvdW5kIHJlc2V0IG1ldGhvZC5cbiAgICogQHJldHVybiB7U291bmR9XG4gICAqL1xuICBTb3VuZC5wcm90b3R5cGUucmVzZXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gUmVzZXQgYWxsIHNwYXRpYWwgcGx1Z2luIHByb3BlcnRpZXMgb24gdGhpcyBzb3VuZC5cbiAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gcGFyZW50Ll9vcmllbnRhdGlvbjtcbiAgICAgIHNlbGYuX3N0ZXJlbyA9IHBhcmVudC5fc3RlcmVvO1xuICAgICAgc2VsZi5fcG9zID0gcGFyZW50Ll9wb3M7XG4gICAgICBzZWxmLl9wYW5uZXJBdHRyID0gcGFyZW50Ll9wYW5uZXJBdHRyO1xuXG4gICAgICAvLyBJZiBhIHN0ZXJlbyBvciBwb3NpdGlvbiB3YXMgc3BlY2lmaWVkLCBzZXQgaXQgdXAuXG4gICAgICBpZiAoc2VsZi5fc3RlcmVvKSB7XG4gICAgICAgIHBhcmVudC5zdGVyZW8oc2VsZi5fc3RlcmVvKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5fcG9zKSB7XG4gICAgICAgIHBhcmVudC5wb3Moc2VsZi5fcG9zWzBdLCBzZWxmLl9wb3NbMV0sIHNlbGYuX3Bvc1syXSwgc2VsZi5faWQpO1xuICAgICAgfSBlbHNlIGlmIChzZWxmLl9wYW5uZXIpIHtcbiAgICAgICAgLy8gRGlzY29ubmVjdCB0aGUgcGFubmVyLlxuICAgICAgICBzZWxmLl9wYW5uZXIuZGlzY29ubmVjdCgwKTtcbiAgICAgICAgc2VsZi5fcGFubmVyID0gdW5kZWZpbmVkO1xuICAgICAgICBwYXJlbnQuX3JlZnJlc2hCdWZmZXIoc2VsZik7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbXBsZXRlIHJlc2V0dGluZyBvZiB0aGUgc291bmQuXG4gICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgfSkoU291bmQucHJvdG90eXBlLnJlc2V0KTtcblxuICAvKiogSGVscGVyIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBwYW5uZXIgbm9kZSBhbmQgc2F2ZSBpdCBvbiB0aGUgc291bmQuXG4gICAqIEBwYXJhbSAge1NvdW5kfSBzb3VuZCBTcGVjaWZpYyBzb3VuZCB0byBzZXR1cCBwYW5uaW5nIG9uLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUeXBlIG9mIHBhbm5lciB0byBjcmVhdGU6ICdzdGVyZW8nIG9yICdzcGF0aWFsJy5cbiAgICovXG4gIHZhciBzZXR1cFBhbm5lciA9IGZ1bmN0aW9uKHNvdW5kLCB0eXBlKSB7XG4gICAgdHlwZSA9IHR5cGUgfHwgJ3NwYXRpYWwnO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBuZXcgcGFubmVyIG5vZGUuXG4gICAgaWYgKHR5cGUgPT09ICdzcGF0aWFsJykge1xuICAgICAgc291bmQuX3Bhbm5lciA9IEhvd2xlci5jdHguY3JlYXRlUGFubmVyKCk7XG4gICAgICBzb3VuZC5fcGFubmVyLmNvbmVJbm5lckFuZ2xlID0gc291bmQuX3Bhbm5lckF0dHIuY29uZUlubmVyQW5nbGU7XG4gICAgICBzb3VuZC5fcGFubmVyLmNvbmVPdXRlckFuZ2xlID0gc291bmQuX3Bhbm5lckF0dHIuY29uZU91dGVyQW5nbGU7XG4gICAgICBzb3VuZC5fcGFubmVyLmNvbmVPdXRlckdhaW4gPSBzb3VuZC5fcGFubmVyQXR0ci5jb25lT3V0ZXJHYWluO1xuICAgICAgc291bmQuX3Bhbm5lci5kaXN0YW5jZU1vZGVsID0gc291bmQuX3Bhbm5lckF0dHIuZGlzdGFuY2VNb2RlbDtcbiAgICAgIHNvdW5kLl9wYW5uZXIubWF4RGlzdGFuY2UgPSBzb3VuZC5fcGFubmVyQXR0ci5tYXhEaXN0YW5jZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIucmVmRGlzdGFuY2UgPSBzb3VuZC5fcGFubmVyQXR0ci5yZWZEaXN0YW5jZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIucm9sbG9mZkZhY3RvciA9IHNvdW5kLl9wYW5uZXJBdHRyLnJvbGxvZmZGYWN0b3I7XG4gICAgICBzb3VuZC5fcGFubmVyLnBhbm5pbmdNb2RlbCA9IHNvdW5kLl9wYW5uZXJBdHRyLnBhbm5pbmdNb2RlbDtcblxuICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblguc2V0VmFsdWVBdFRpbWUoc291bmQuX3Bvc1swXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25ZLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9wb3NbMV0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWi5zZXRWYWx1ZUF0VGltZShzb3VuZC5fcG9zWzJdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0UG9zaXRpb24oc291bmQuX3Bvc1swXSwgc291bmQuX3Bvc1sxXSwgc291bmQuX3Bvc1syXSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25YLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9vcmllbnRhdGlvblswXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25ZLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9vcmllbnRhdGlvblsxXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25aLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9vcmllbnRhdGlvblsyXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZC5fcGFubmVyLnNldE9yaWVudGF0aW9uKHNvdW5kLl9vcmllbnRhdGlvblswXSwgc291bmQuX29yaWVudGF0aW9uWzFdLCBzb3VuZC5fb3JpZW50YXRpb25bMl0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzb3VuZC5fcGFubmVyID0gSG93bGVyLmN0eC5jcmVhdGVTdGVyZW9QYW5uZXIoKTtcbiAgICAgIHNvdW5kLl9wYW5uZXIucGFuLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9zdGVyZW8sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgIH1cblxuICAgIHNvdW5kLl9wYW5uZXIuY29ubmVjdChzb3VuZC5fbm9kZSk7XG5cbiAgICAvLyBVcGRhdGUgdGhlIGNvbm5lY3Rpb25zLlxuICAgIGlmICghc291bmQuX3BhdXNlZCkge1xuICAgICAgc291bmQuX3BhcmVudC5wYXVzZShzb3VuZC5faWQsIHRydWUpLnBsYXkoc291bmQuX2lkLCB0cnVlKTtcbiAgICB9XG4gIH07XG59KSgpO1xuIiwgIid1c2Ugc3RyaWN0JztcblxudmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHlcbiAgLCBwcmVmaXggPSAnfic7XG5cbi8qKlxuICogQ29uc3RydWN0b3IgdG8gY3JlYXRlIGEgc3RvcmFnZSBmb3Igb3VyIGBFRWAgb2JqZWN0cy5cbiAqIEFuIGBFdmVudHNgIGluc3RhbmNlIGlzIGEgcGxhaW4gb2JqZWN0IHdob3NlIHByb3BlcnRpZXMgYXJlIGV2ZW50IG5hbWVzLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gRXZlbnRzKCkge31cblxuLy9cbi8vIFdlIHRyeSB0byBub3QgaW5oZXJpdCBmcm9tIGBPYmplY3QucHJvdG90eXBlYC4gSW4gc29tZSBlbmdpbmVzIGNyZWF0aW5nIGFuXG4vLyBpbnN0YW5jZSBpbiB0aGlzIHdheSBpcyBmYXN0ZXIgdGhhbiBjYWxsaW5nIGBPYmplY3QuY3JlYXRlKG51bGwpYCBkaXJlY3RseS5cbi8vIElmIGBPYmplY3QuY3JlYXRlKG51bGwpYCBpcyBub3Qgc3VwcG9ydGVkIHdlIHByZWZpeCB0aGUgZXZlbnQgbmFtZXMgd2l0aCBhXG4vLyBjaGFyYWN0ZXIgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGJ1aWx0LWluIG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBub3Rcbi8vIG92ZXJyaWRkZW4gb3IgdXNlZCBhcyBhbiBhdHRhY2sgdmVjdG9yLlxuLy9cbmlmIChPYmplY3QuY3JlYXRlKSB7XG4gIEV2ZW50cy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIC8vXG4gIC8vIFRoaXMgaGFjayBpcyBuZWVkZWQgYmVjYXVzZSB0aGUgYF9fcHJvdG9fX2AgcHJvcGVydHkgaXMgc3RpbGwgaW5oZXJpdGVkIGluXG4gIC8vIHNvbWUgb2xkIGJyb3dzZXJzIGxpa2UgQW5kcm9pZCA0LCBpUGhvbmUgNS4xLCBPcGVyYSAxMSBhbmQgU2FmYXJpIDUuXG4gIC8vXG4gIGlmICghbmV3IEV2ZW50cygpLl9fcHJvdG9fXykgcHJlZml4ID0gZmFsc2U7XG59XG5cbi8qKlxuICogUmVwcmVzZW50YXRpb24gb2YgYSBzaW5nbGUgZXZlbnQgbGlzdGVuZXIuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29uY2U9ZmFsc2VdIFNwZWNpZnkgaWYgdGhlIGxpc3RlbmVyIGlzIGEgb25lLXRpbWUgbGlzdGVuZXIuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIEVFKGZuLCBjb250ZXh0LCBvbmNlKSB7XG4gIHRoaXMuZm4gPSBmbjtcbiAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgdGhpcy5vbmNlID0gb25jZSB8fCBmYWxzZTtcbn1cblxuLyoqXG4gKiBBZGQgYSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50RW1pdHRlcn0gZW1pdHRlciBSZWZlcmVuY2UgdG8gdGhlIGBFdmVudEVtaXR0ZXJgIGluc3RhbmNlLlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gb25jZSBTcGVjaWZ5IGlmIHRoZSBsaXN0ZW5lciBpcyBhIG9uZS10aW1lIGxpc3RlbmVyLlxuICogQHJldHVybnMge0V2ZW50RW1pdHRlcn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGFkZExpc3RlbmVyKGVtaXR0ZXIsIGV2ZW50LCBmbiwgY29udGV4dCwgb25jZSkge1xuICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVyID0gbmV3IEVFKGZuLCBjb250ZXh0IHx8IGVtaXR0ZXIsIG9uY2UpXG4gICAgLCBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuXG4gIGlmICghZW1pdHRlci5fZXZlbnRzW2V2dF0pIGVtaXR0ZXIuX2V2ZW50c1tldnRdID0gbGlzdGVuZXIsIGVtaXR0ZXIuX2V2ZW50c0NvdW50Kys7XG4gIGVsc2UgaWYgKCFlbWl0dGVyLl9ldmVudHNbZXZ0XS5mbikgZW1pdHRlci5fZXZlbnRzW2V2dF0ucHVzaChsaXN0ZW5lcik7XG4gIGVsc2UgZW1pdHRlci5fZXZlbnRzW2V2dF0gPSBbZW1pdHRlci5fZXZlbnRzW2V2dF0sIGxpc3RlbmVyXTtcblxuICByZXR1cm4gZW1pdHRlcjtcbn1cblxuLyoqXG4gKiBDbGVhciBldmVudCBieSBuYW1lLlxuICpcbiAqIEBwYXJhbSB7RXZlbnRFbWl0dGVyfSBlbWl0dGVyIFJlZmVyZW5jZSB0byB0aGUgYEV2ZW50RW1pdHRlcmAgaW5zdGFuY2UuXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZ0IFRoZSBFdmVudCBuYW1lLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2xlYXJFdmVudChlbWl0dGVyLCBldnQpIHtcbiAgaWYgKC0tZW1pdHRlci5fZXZlbnRzQ291bnQgPT09IDApIGVtaXR0ZXIuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcbiAgZWxzZSBkZWxldGUgZW1pdHRlci5fZXZlbnRzW2V2dF07XG59XG5cbi8qKlxuICogTWluaW1hbCBgRXZlbnRFbWl0dGVyYCBpbnRlcmZhY2UgdGhhdCBpcyBtb2xkZWQgYWdhaW5zdCB0aGUgTm9kZS5qc1xuICogYEV2ZW50RW1pdHRlcmAgaW50ZXJmYWNlLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcbiAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xufVxuXG4vKipcbiAqIFJldHVybiBhbiBhcnJheSBsaXN0aW5nIHRoZSBldmVudHMgZm9yIHdoaWNoIHRoZSBlbWl0dGVyIGhhcyByZWdpc3RlcmVkXG4gKiBsaXN0ZW5lcnMuXG4gKlxuICogQHJldHVybnMge0FycmF5fVxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICB2YXIgbmFtZXMgPSBbXVxuICAgICwgZXZlbnRzXG4gICAgLCBuYW1lO1xuXG4gIGlmICh0aGlzLl9ldmVudHNDb3VudCA9PT0gMCkgcmV0dXJuIG5hbWVzO1xuXG4gIGZvciAobmFtZSBpbiAoZXZlbnRzID0gdGhpcy5fZXZlbnRzKSkge1xuICAgIGlmIChoYXMuY2FsbChldmVudHMsIG5hbWUpKSBuYW1lcy5wdXNoKHByZWZpeCA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lKTtcbiAgfVxuXG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgcmV0dXJuIG5hbWVzLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGV2ZW50cykpO1xuICB9XG5cbiAgcmV0dXJuIG5hbWVzO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gdGhlIGxpc3RlbmVycyByZWdpc3RlcmVkIGZvciBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtBcnJheX0gVGhlIHJlZ2lzdGVyZWQgbGlzdGVuZXJzLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyhldmVudCkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudFxuICAgICwgaGFuZGxlcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAoIWhhbmRsZXJzKSByZXR1cm4gW107XG4gIGlmIChoYW5kbGVycy5mbikgcmV0dXJuIFtoYW5kbGVycy5mbl07XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBoYW5kbGVycy5sZW5ndGgsIGVlID0gbmV3IEFycmF5KGwpOyBpIDwgbDsgaSsrKSB7XG4gICAgZWVbaV0gPSBoYW5kbGVyc1tpXS5mbjtcbiAgfVxuXG4gIHJldHVybiBlZTtcbn07XG5cbi8qKlxuICogUmV0dXJuIHRoZSBudW1iZXIgb2YgbGlzdGVuZXJzIGxpc3RlbmluZyB0byBhIGdpdmVuIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBudW1iZXIgb2YgbGlzdGVuZXJzLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbiBsaXN0ZW5lckNvdW50KGV2ZW50KSB7XG4gIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50XG4gICAgLCBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAoIWxpc3RlbmVycykgcmV0dXJuIDA7XG4gIGlmIChsaXN0ZW5lcnMuZm4pIHJldHVybiAxO1xuICByZXR1cm4gbGlzdGVuZXJzLmxlbmd0aDtcbn07XG5cbi8qKlxuICogQ2FsbHMgZWFjaCBvZiB0aGUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHJldHVybnMge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZXZlbnQgaGFkIGxpc3RlbmVycywgZWxzZSBgZmFsc2VgLlxuICogQHB1YmxpY1xuICovXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KGV2ZW50LCBhMSwgYTIsIGEzLCBhNCwgYTUpIHtcbiAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbZXZ0XSkgcmV0dXJuIGZhbHNlO1xuXG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XVxuICAgICwgbGVuID0gYXJndW1lbnRzLmxlbmd0aFxuICAgICwgYXJnc1xuICAgICwgaTtcblxuICBpZiAobGlzdGVuZXJzLmZuKSB7XG4gICAgaWYgKGxpc3RlbmVycy5vbmNlKSB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcnMuZm4sIHVuZGVmaW5lZCwgdHJ1ZSk7XG5cbiAgICBzd2l0Y2ggKGxlbikge1xuICAgICAgY2FzZSAxOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQpLCB0cnVlO1xuICAgICAgY2FzZSAyOiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExKSwgdHJ1ZTtcbiAgICAgIGNhc2UgMzogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIpLCB0cnVlO1xuICAgICAgY2FzZSA0OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMpLCB0cnVlO1xuICAgICAgY2FzZSA1OiByZXR1cm4gbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGExLCBhMiwgYTMsIGE0KSwgdHJ1ZTtcbiAgICAgIGNhc2UgNjogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzLCBhNCwgYTUpLCB0cnVlO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDEsIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0xKTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG5cbiAgICBsaXN0ZW5lcnMuZm4uYXBwbHkobGlzdGVuZXJzLmNvbnRleHQsIGFyZ3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsZW5ndGggPSBsaXN0ZW5lcnMubGVuZ3RoXG4gICAgICAsIGo7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChsaXN0ZW5lcnNbaV0ub25jZSkgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXJzW2ldLmZuLCB1bmRlZmluZWQsIHRydWUpO1xuXG4gICAgICBzd2l0Y2ggKGxlbikge1xuICAgICAgICBjYXNlIDE6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0KTsgYnJlYWs7XG4gICAgICAgIGNhc2UgMjogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExKTsgYnJlYWs7XG4gICAgICAgIGNhc2UgMzogbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGExLCBhMik7IGJyZWFrO1xuICAgICAgICBjYXNlIDQ6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSwgYTIsIGEzKTsgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYgKCFhcmdzKSBmb3IgKGogPSAxLCBhcmdzID0gbmV3IEFycmF5KGxlbiAtMSk7IGogPCBsZW47IGorKykge1xuICAgICAgICAgICAgYXJnc1tqIC0gMV0gPSBhcmd1bWVudHNbal07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGlzdGVuZXJzW2ldLmZuLmFwcGx5KGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuICogQWRkIGEgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBbY29udGV4dD10aGlzXSBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihldmVudCwgZm4sIGNvbnRleHQpIHtcbiAgcmV0dXJuIGFkZExpc3RlbmVyKHRoaXMsIGV2ZW50LCBmbiwgY29udGV4dCwgZmFsc2UpO1xufTtcblxuLyoqXG4gKiBBZGQgYSBvbmUtdGltZSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IFtjb250ZXh0PXRoaXNdIFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZShldmVudCwgZm4sIGNvbnRleHQpIHtcbiAgcmV0dXJuIGFkZExpc3RlbmVyKHRoaXMsIGV2ZW50LCBmbiwgY29udGV4dCwgdHJ1ZSk7XG59O1xuXG4vKipcbiAqIFJlbW92ZSB0aGUgbGlzdGVuZXJzIG9mIGEgZ2l2ZW4gZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gT25seSByZW1vdmUgdGhlIGxpc3RlbmVycyB0aGF0IG1hdGNoIHRoaXMgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IGNvbnRleHQgT25seSByZW1vdmUgdGhlIGxpc3RlbmVycyB0aGF0IGhhdmUgdGhpcyBjb250ZXh0LlxuICogQHBhcmFtIHtCb29sZWFufSBvbmNlIE9ubHkgcmVtb3ZlIG9uZS10aW1lIGxpc3RlbmVycy5cbiAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cbiAqIEBwdWJsaWNcbiAqL1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKGV2ZW50LCBmbiwgY29udGV4dCwgb25jZSkge1xuICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1tldnRdKSByZXR1cm4gdGhpcztcbiAgaWYgKCFmbikge1xuICAgIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuICBpZiAobGlzdGVuZXJzLmZuKSB7XG4gICAgaWYgKFxuICAgICAgbGlzdGVuZXJzLmZuID09PSBmbiAmJlxuICAgICAgKCFvbmNlIHx8IGxpc3RlbmVycy5vbmNlKSAmJlxuICAgICAgKCFjb250ZXh0IHx8IGxpc3RlbmVycy5jb250ZXh0ID09PSBjb250ZXh0KVxuICAgICkge1xuICAgICAgY2xlYXJFdmVudCh0aGlzLCBldnQpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpID0gMCwgZXZlbnRzID0gW10sIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKFxuICAgICAgICBsaXN0ZW5lcnNbaV0uZm4gIT09IGZuIHx8XG4gICAgICAgIChvbmNlICYmICFsaXN0ZW5lcnNbaV0ub25jZSkgfHxcbiAgICAgICAgKGNvbnRleHQgJiYgbGlzdGVuZXJzW2ldLmNvbnRleHQgIT09IGNvbnRleHQpXG4gICAgICApIHtcbiAgICAgICAgZXZlbnRzLnB1c2gobGlzdGVuZXJzW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIFJlc2V0IHRoZSBhcnJheSwgb3IgcmVtb3ZlIGl0IGNvbXBsZXRlbHkgaWYgd2UgaGF2ZSBubyBtb3JlIGxpc3RlbmVycy5cbiAgICAvL1xuICAgIGlmIChldmVudHMubGVuZ3RoKSB0aGlzLl9ldmVudHNbZXZ0XSA9IGV2ZW50cy5sZW5ndGggPT09IDEgPyBldmVudHNbMF0gOiBldmVudHM7XG4gICAgZWxzZSBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFsbCBsaXN0ZW5lcnMsIG9yIHRob3NlIG9mIHRoZSBzcGVjaWZpZWQgZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoU3RyaW5nfFN5bWJvbCl9IFtldmVudF0gVGhlIGV2ZW50IG5hbWUuXG4gKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfSBgdGhpc2AuXG4gKiBAcHVibGljXG4gKi9cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50KSB7XG4gIHZhciBldnQ7XG5cbiAgaWYgKGV2ZW50KSB7XG4gICAgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcbiAgICBpZiAodGhpcy5fZXZlbnRzW2V2dF0pIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9ldmVudHMgPSBuZXcgRXZlbnRzKCk7XG4gICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vL1xuLy8gQWxpYXMgbWV0aG9kcyBuYW1lcyBiZWNhdXNlIHBlb3BsZSByb2xsIGxpa2UgdGhhdC5cbi8vXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbjtcblxuLy9cbi8vIEV4cG9zZSB0aGUgcHJlZml4LlxuLy9cbkV2ZW50RW1pdHRlci5wcmVmaXhlZCA9IHByZWZpeDtcblxuLy9cbi8vIEFsbG93IGBFdmVudEVtaXR0ZXJgIHRvIGJlIGltcG9ydGVkIGFzIG1vZHVsZSBuYW1lc3BhY2UuXG4vL1xuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuLy9cbi8vIEV4cG9zZSB0aGUgbW9kdWxlLlxuLy9cbmlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIG1vZHVsZSkge1xuICBtb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcbn1cbiIsICIvKipcbiAqIEBwYXJhbSB7dm9pZEZ1bmN9IGxvYWRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gQm9vdChsb2FkKSB7XG5cdHdpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XG5cdFx0bG9hZCgpO1xuXHRcdHdpbmRvdy5mb2N1cygpO1xuXHRcdGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdHdpbmRvdy5mb2N1cygpO1xuXHRcdH0sIGZhbHNlKTtcblx0fTtcbn1cbiIsICIvKipcbiAqIEB0eXBlIHtUQXNzZXRzfVxuICovXG5leHBvcnQgY29uc3QgQVNTRVRTID0gKCgpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpbWFnZXM6IHt9LFxuXHRcdHRpbGVkczoge30sXG5cdFx0cmVzb3VyY2VzOiB7fVxuXHR9O1xufSkoKTtcblxuIiwgImltcG9ydCB7IEFTU0VUUyB9IGZyb20gJ0BwYWNrYWdlcy9hc3NldHMtc3RvcmUnO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gZnVsbCBmaWxlIHBhdGhcbiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gZmlsZSBuYW1lXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlTmFtZUZyb21QYXRoKHBhdGgpIHtcblx0Y29uc3QgZmlsZU5hbWUgPSBwYXRoLnNwbGl0KCcvJykucG9wKCk7XG5cdHJldHVybiBmaWxlTmFtZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEByZXR1cm5zIHtIVE1MRGl2RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERpdkVsZW1lbnRCeUlkKGlkKSB7XG5cdHJldHVybiAvKiogQHR5cGUge0hUTUxEaXZFbGVtZW50fSovKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAqIEByZXR1cm5zIHtzdHJpbmdbXX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFuaW1GcmFtZXMobmFtZSkge1xuXHRsZXQgYW5pbVNoZWV0ID0gW107XG5cdGZvciAobGV0IGtleSBpbiBBU1NFVFMuaW1hZ2VzKSB7XG5cdFx0aWYgKGtleS5pbmNsdWRlcyhuYW1lKSkge1xuXHRcdFx0YW5pbVNoZWV0LnB1c2goa2V5KTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGFuaW1TaGVldDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFuaW1GcmFtZShuYW1lKSB7XG5cdHJldHVybiBnZXRBbmltRnJhbWVzKG5hbWUpWzBdO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvQ1NTUFgodmFsdWUpIHtcblx0cmV0dXJuIHZhbHVlICsgJ3B4Jztcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1REaXNwbGF5T2JqZWN0fSBzMVxuICogQHBhcmFtIHtURGlzcGxheU9iamVjdH0gczJcbiAqIEByZXR1cm5zIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZShzMSwgczIpIHtcblx0Y29uc3QgdnggPSBzMi5jZW50ZXJYKCkgLSBzMS5jZW50ZXJYKCksXG5cdFx0dnkgPSBzMi5jZW50ZXJZKCkgLSBzMS5jZW50ZXJZKCk7XG5cdHJldHVybiBNYXRoLnNxcnQodnggKiB2eCArIHZ5ICogdnkpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7VERpc3BsYXlPYmplY3R9IGZvbGxvd2VyXG4gKiBAcGFyYW0ge1REaXNwbGF5T2JqZWN0fSBsZWFkZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzcGVlZFxuICogQHBhcmFtIHtib29sZWFufSBmb2xsb3dYXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGZvbGxvd1lcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9sbG93RWFzZShmb2xsb3dlciwgbGVhZGVyLCBzcGVlZCwgZm9sbG93WD10cnVlLCBmb2xsb3dZPXRydWUpIHtcblx0Ly8gRmlndXJlIG91dCB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgc3ByaXRlc1xuXHR2YXIgdnggPSBsZWFkZXIuY2VudGVyWCgpIC0gZm9sbG93ZXIuY2VudGVyWCgpLFxuXHRcdHZ5ID0gbGVhZGVyLmNlbnRlclkoKSAtIGZvbGxvd2VyLmNlbnRlclkoKSxcblx0XHRkaXN0YW5jZSA9IE1hdGguc3FydCh2eCAqIHZ4ICsgdnkgKiB2eSk7XG5cblx0Ly8gTW92ZSB0aGUgZm9sbG93ZXIgaWYgaXQncyBtb3JlIHRoYW4gMSBwaXhlbFxuXHQvLyBhd2F5IGZyb20gdGhlIGxlYWRlclxuXHRpZiAoZGlzdGFuY2UgPj0gMSkge1xuXHRcdGlmIChmb2xsb3dYKSB7XG5cdFx0XHRmb2xsb3dlci54ICs9IHZ4ICogc3BlZWQ7XG5cdFx0fVxuXHRcdGlmIChmb2xsb3dZKSB7XG5cdFx0XHRmb2xsb3dlci55ICs9IHZ5ICogc3BlZWQ7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogQHBhcmFtIHtURGlzcGxheU9iamVjdH0gZm9sbG93ZXJcbiAqIEBwYXJhbSB7VERpc3BsYXlPYmplY3R9IGxlYWRlclxuICogQHBhcmFtIHtudW1iZXJ9IHNwZWVkXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGZvbGxvd1hcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZm9sbG93WVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb2xsb3dDb25zdGFudChmb2xsb3dlciwgbGVhZGVyLCBzcGVlZCwgZm9sbG93WD10cnVlLCBmb2xsb3dZPXRydWUpIHtcblx0Ly8gRmlndXJlIG91dCB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgc3ByaXRlc1xuXHR2YXIgdnggPSBsZWFkZXIuY2VudGVyWCgpIC0gZm9sbG93ZXIuY2VudGVyWCgpLFxuXHRcdHZ5ID0gbGVhZGVyLmNlbnRlclkoKSAtIGZvbGxvd2VyLmNlbnRlclkoKSxcblx0XHRkaXN0YW5jZSA9IE1hdGguc3FydCh2eCAqIHZ4ICsgdnkgKiB2eSk7XG5cblx0Ly8gTW92ZSB0aGUgZm9sbG93ZXIgaWYgaXQncyBtb3JlIHRoYW4gMSBtb3ZlXG5cdC8vIGF3YXkgZnJvbSB0aGUgbGVhZGVyXG5cdGlmIChkaXN0YW5jZSA+PSBzcGVlZCkge1xuXHRcdGlmIChmb2xsb3dYKSB7XG5cdFx0XHRmb2xsb3dlci54ICs9ICh2eCAvIGRpc3RhbmNlKSAqIHNwZWVkO1xuXHRcdH1cblx0XHRpZiAoZm9sbG93WSkge1xuXHRcdFx0Zm9sbG93ZXIueSArPSAodnkgLyBkaXN0YW5jZSkgKiBzcGVlZDtcblx0XHR9XG5cdH1cbn1cbiIsICJpbXBvcnQgeyB0b0NTU1BYIH0gZnJvbSAnQHBhY2thZ2VzL3V0aWxzL21pc2MnO1xuXG4vKipcbiAqIEB0eXBlIHtGQ2FudmFzTGF5ZXJzfVxuICovXG5leHBvcnQgZnVuY3Rpb24gQ2FudmFzTGF5ZXJzKCkge1xuXHQvKipcblx0ICogQHR5cGUge1RDYW52YXNMYXllcltdfVxuXHQgKi9cblx0Y29uc3QgbGF5ZXJzID0gW107XG5cblx0LyoqXG5cdCAqIEB0eXBlIHtGQ2FudmFzTGF5ZXJzQWRkfVxuXHQgKi9cblx0ZnVuY3Rpb24gYWRkKGlkLCB3aWR0aCwgaGVpZ2h0KSB7XG5cdFx0Y29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG5cdFx0Y2FudmFzLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB0b0NTU1BYKHdpZHRoKSk7XG5cdFx0Y2FudmFzLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgdG9DU1NQWChoZWlnaHQpKTtcblx0XHRjYW52YXMuc2V0QXR0cmlidXRlKCdpZCcsIGlkKTtcblxuXHRcdGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXHRcdGN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcblxuXHRcdGNvbnN0IGxheWVyID0ge2lkLCBjYW52YXMsIGN0eH07XG5cdFx0bGF5ZXJzLnB1c2gobGF5ZXIpO1xuXG5cdFx0cmV0dXJuIGxheWVyO1xuXHR9XG5cblx0LyoqXG5cdCAqIEB0eXBlIHtGQ2FudmFzTGF5ZXJzUmVtb3ZlfVxuXHQgKi9cblx0ZnVuY3Rpb24gcmVtb3ZlKGlkKSB7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGxheWVyID0gbGF5ZXJzW2ldO1xuXHRcdFx0aWYgKGxheWVyLmlkID09PSBpZCkge1xuXHRcdFx0XHRsYXllcnMuc3BsaWNlKGksIDEpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEB0eXBlIHtGQ2FudmFzTGF5ZXJzR2V0fVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0KGlkKSB7XG5cdFx0Y29uc3QgbGF5ZXIgPSBsYXllcnMuZmlsdGVyKHZhbCA9PiB2YWwuaWQgPT09IGlkKTtcblx0XHRyZXR1cm4gbGF5ZXIubGVuZ3RoID8gbGF5ZXJbMF0gOiB1bmRlZmluZWQ7XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdGFkZCxcblx0XHRyZW1vdmUsXG5cdFx0Z2V0XG5cdH07XG59XG4iLCAiLyoqXG4gKiBAdHlwZSB7RkRpc3BsYXlPYmplY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBEaXNwbGF5T2JqZWN0KCkge1xuXHRsZXQgX2FscGhhID0gMTtcblxuXHQvKipcblx0ICogQHR5cGUge1REaXNwbGF5T2JqZWN0fVxuXHQgKi9cblx0bGV0IG8gPSB7XG5cdFx0eDogMCxcblx0XHR5OiAwLFxuXHRcdHVpZDogdWlkKCksXG5cdFx0d2lkdGg6IDAsXG5cdFx0aGVpZ2h0OiAwLFxuXHRcdHNjYWxlWDogMSxcblx0XHRzY2FsZVk6IDEsXG5cdFx0cGl2b3RYOiAwLjUsXG5cdFx0cGl2b3RZOiAwLjUsXG5cdFx0cm90YXRpb246IDAsXG5cdFx0dmlzaWJsZTogdHJ1ZSxcblx0XHRjaGlsZHJlbjogW10sXG5cdFx0YWRkQ2hpbGQ6IChzcHJpdGUpID0+IHtcblx0XHRcdGlmIChzcHJpdGUucGFyZW50KVxuXHRcdFx0XHRzcHJpdGUucGFyZW50LnJlbW92ZUNoaWxkKHNwcml0ZSk7XG5cblx0XHRcdHNwcml0ZS5wYXJlbnQgPSBvOyBcblx0XHRcdG8uY2hpbGRyZW4ucHVzaChzcHJpdGUpO1xuXHRcdH0sXG5cdFx0cmVtb3ZlQ2hpbGQ6IChzcHJpdGUpID0+IHtcblx0XHRcdGlmIChzcHJpdGUucGFyZW50LnVpZCA9PT0gby51aWQpIHtcblx0XHRcdFx0Y29uc3QgaW5kZXggPSBvLmNoaWxkcmVuLmZpbmRJbmRleCh2ID0+IHYudWlkID09PSBzcHJpdGUudWlkKTsgXG5cdFx0XHRcdG8uY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0c3ByaXRlLnBhcmVudCA9IHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHR9LFxuXHRcdHJlbW92ZUNoaWxkcmVuOiAoKSA9PiB7XG5cdFx0XHRyZW1vdmVDaGlsZHJlbigpO1xuXHRcdH0sXG5cdFx0Z3g6ICgpID0+IHtcblx0XHRcdHJldHVybiBnbG9iYWxQb3MoJ3gnLCAnZ3gnKTtcblx0XHR9LFxuXHRcdGd5OiAoKSA9PiB7XG5cdFx0XHRyZXR1cm4gZ2xvYmFsUG9zKCd5JywgJ2d5Jyk7XG5cdFx0fSxcblx0XHRhbHBoYTogX2FscGhhLFxuXHRcdGhhbGZXaWR0aDogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIGhhbGZEaW1lbnNpb24oJ3dpZHRoJyk7XG5cdFx0fSxcblx0XHRoYWxmSGVpZ2h0OiAoKSA9PiB7XG5cdFx0XHRyZXR1cm4gaGFsZkRpbWVuc2lvbignaGVpZ2h0Jyk7XG5cdFx0fSxcblx0XHRjZW50ZXJYOiAoKSA9PiB7XG5cdFx0XHRyZXR1cm4gY2VudGVyKCd4JywgJ2hhbGZXaWR0aCcpO1xuXHRcdH0sXG5cdFx0Y2VudGVyWTogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIGNlbnRlcigneScsICdoYWxmSGVpZ2h0Jyk7XG5cdFx0fSxcblx0XHRkZXN0cm95OiAoKSA9PiB7XG5cdFx0XHRpZiAoby5jaGlsZHJlbi5sZW5ndGgpIHtcblx0XHRcdFx0cmVtb3ZlQ2hpbGRyZW4odHJ1ZSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChvLnBhcmVudCkge1xuXHRcdFx0XHRvLnBhcmVudC5yZW1vdmVDaGlsZChvKTtcblx0XHRcdFx0by5kZXN0cm95ZWQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRPYmplY3QuYXNzaWduKG8sIHtcblx0XHRhbHBoYToge1xuXHRcdFx0Z2V0OiAoKSA9PiB7XG5cdFx0XHRcdHJldHVybiBvLnBhcmVudCA/IG8ucGFyZW50LmFscGhhICogX2FscGhhIDogX2FscGhhO1xuXHRcdFx0fSxcblx0XHRcdC8qKlxuXHRcdFx0ICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG5cdFx0XHQgKi9cblx0XHRcdHNldDogKHZhbHVlKSA9PiB7XG5cdFx0XHRcdF9hbHBoYSA9IHZhbHVlO1xuXHRcdFx0fVxuXHRcdH0sIFxuXHR9KTtcblxuXHQvKipcblx0ICogQHBhcmFtIHtib29sZWFufSBbaXNEZXN0cm95XVxuXHQgKi9cblx0ZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4oaXNEZXN0cm95KSB7XG5cdFx0by5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcblx0XHRcdGlmIChpc0Rlc3Ryb3kpIHtcblx0XHRcdFx0Y2hpbGQuZGVzdHJveSgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKGNoaWxkLnBhcmVudC51aWQgPT09IG8udWlkKSB7XG5cdFx0XHRcdFx0Y2hpbGQucGFyZW50ID0gdW5kZWZpbmVkO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0by5jaGlsZHJlbi5sZW5ndGggPSAwO1xuXHR9XG5cblx0ZnVuY3Rpb24gdWlkKCkge1xuXHRcdHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBEYXRlLm5vdygpKS50b1N0cmluZygxNik7XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHsneCcgfCAneSd9IHBvc1xuXHQgKiBAcGFyYW0geydneCcgfCAnZ3knfSBncG9zXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9XG5cdCAqL1xuXHRmdW5jdGlvbiBnbG9iYWxQb3MocG9zLCBncG9zKSB7XG5cdFx0cmV0dXJuIG8ucGFyZW50ID9cblx0XHRcdG9bcG9zXSArIG8ucGFyZW50W2dwb3NdKCkgOlxuXHRcdFx0b1twb3NdO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBwYXJhbSB7J3dpZHRoJyB8ICdoZWlnaHQnfSB0eXBlXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9XG5cdCAqL1xuXHRmdW5jdGlvbiBoYWxmRGltZW5zaW9uKHR5cGUpIHtcblx0XHRyZXR1cm4gb1t0eXBlXSAvIDI7XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHsneCcgfCAneSd9IHBvc1xuXHQgKiBAcGFyYW0geydoYWxmV2lkdGgnIHwgJ2hhbGZIZWlnaHQnfSBoYWxmRGltZW5zaW9uXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9XG5cdCAqL1xuXHRmdW5jdGlvbiBjZW50ZXIocG9zLCBoYWxmRGltZW5zaW9uKSB7XG5cdFx0cmV0dXJuIG9bcG9zXSArIG9baGFsZkRpbWVuc2lvbl0oKTtcblx0fVxuXG5cdHJldHVybiBvO1xufVxuIiwgImltcG9ydCB7IEFTU0VUUyB9IGZyb20gJ0BwYWNrYWdlcy9hc3NldHMtc3RvcmUnO1xuXG5pbXBvcnQgeyBEaXNwbGF5T2JqZWN0IH0gZnJvbSAnLi9EaXNwbGF5T2JqZWN0JztcblxuLyoqXG4gKiBAdHlwZSB7RlNwcml0ZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFNwcml0ZShzcmMpIHtcblx0Y29uc3QgbyA9IERpc3BsYXlPYmplY3QoKTtcblxuXHQvKipcblx0ICogQHR5cGUge1BhcnRpYWw8VFNwcml0ZU9ubHlQcm9wcz59XG5cdCAqL1xuXHRsZXQgcHJvcHMgPSB7XG5cdFx0dGV4dHVyZTogc3JjLFxuXHRcdHR5cGU6ICdTcHJpdGUnXG5cdH07XG5cblx0bGV0IHNlbGYgPSAvKiogQHR5cGUge1RTcHJpdGV9ICovIChPYmplY3QuYXNzaWduKG8sIHByb3BzKSk7XG5cblx0c2VsZi5zZXRUZXh0dXJlID0gKHNyYykgPT4ge1xuXHRcdHNlbGYudGlsZXNldEZyYW1lID0gQVNTRVRTLmltYWdlc1tzcmNdO1xuXHRcdHNlbGYuX3JlZ2lzdGVyVGV4dHVyZShzZWxmLnRpbGVzZXRGcmFtZSk7XG5cdH07XG5cblx0c2VsZi5fcmVnaXN0ZXJUZXh0dXJlID0gKGltZ0RhdGEpID0+IHtcblx0XHRzZWxmLnNvdXJjZSA9IGltZ0RhdGEuc291cmNlO1xuXHRcdHNlbGYuc291cmNlWCA9IGltZ0RhdGEuZnJhbWUgPyBpbWdEYXRhLmZyYW1lLnggOiBpbWdEYXRhLng7XG5cdFx0c2VsZi5zb3VyY2VZID0gaW1nRGF0YS5mcmFtZSA/IGltZ0RhdGEuZnJhbWUueSA6IGltZ0RhdGEueTtcblx0XHRzZWxmLndpZHRoID0gaW1nRGF0YS5mcmFtZSA/IGltZ0RhdGEuZnJhbWUudyA6IGltZ0RhdGEudztcblx0XHRzZWxmLmhlaWdodCA9IGltZ0RhdGEuZnJhbWUgPyBpbWdEYXRhLmZyYW1lLmggOiBpbWdEYXRhLmg7XG5cdFx0c2VsZi5zb3VyY2VXaWR0aCA9IHNlbGYud2lkdGg7XG5cdFx0c2VsZi5zb3VyY2VIZWlnaHQgPSBzZWxmLmhlaWdodDtcblx0fTtcblxuXHRzZWxmLnJlbmRlciA9IChjdHgpID0+IHtcblx0XHRjdHguZHJhd0ltYWdlKFxuXHRcdFx0c2VsZi5zb3VyY2UsXG5cdFx0XHRzZWxmLnNvdXJjZVgsXG5cdFx0XHRzZWxmLnNvdXJjZVksXG5cdFx0XHRzZWxmLnNvdXJjZVdpZHRoLFxuXHRcdFx0c2VsZi5zb3VyY2VIZWlnaHQsXG5cdFx0XHQtc2VsZi53aWR0aCAqIHNlbGYucGl2b3RYLFxuXHRcdFx0LXNlbGYuaGVpZ2h0ICogc2VsZi5waXZvdFksXG5cdFx0XHRzZWxmLndpZHRoLFxuXHRcdFx0c2VsZi5oZWlnaHRcblx0XHQpO1xuXHR9O1xuXG5cdGlmIChzcmMpIHNlbGYuc2V0VGV4dHVyZShzcmMpO1xuXG5cdHJldHVybiBzZWxmO1xufVxuIiwgImltcG9ydCB7IEFTU0VUUyB9IGZyb20gJ0BwYWNrYWdlcy9hc3NldHMtc3RvcmUnO1xuXG5pbXBvcnQgeyBTcHJpdGUgfSBmcm9tICcuL1Nwcml0ZSc7XG5cbi8qKlxuICogQHR5cGUge0ZBbmltYXRlZFNwcml0ZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEFuaW1hdGVkU3ByaXRlKHNyYykge1xuXHRsZXQgZnJhbWVDb3VudGVyID0gMDtcblx0LyoqXG5cdCAqIEB0eXBlIHtudW1iZXJbXX1cblx0ICovXG5cdGxldCBmcmFtZXMgPSBzcmMubWFwKChfLCBpKSA9PiBpKTtcblx0bGV0IHNwcml0ZSA9IFNwcml0ZSgpO1xuXHRsZXQgYWNjdW11bGF0b3IgPSAwO1xuXG5cdC8qKlxuXHQgKiBAdHlwZSB7UGFydGlhbDxUQW5pbWF0ZWRTcHJpdGVPbmx5UHJvcHM+fVxuXHQgKi9cblx0bGV0IHByb3BzID0ge1xuXHRcdGZwczogOCxcblx0XHRsb29wOiB0cnVlLFxuXHRcdGN1cnJlbnRGcmFtZTogMCxcblx0XHRwbGF5aW5nOiBmYWxzZVxuXHR9O1xuXG5cdGNvbnN0IHNlbGYgPSAvKiogQHR5cGUge1RBbmltYXRlZFNwcml0ZX0gKi8gKE9iamVjdC5hc3NpZ24oc3ByaXRlLCBwcm9wcykpO1xuXG5cdHNlbGYuc2V0VGV4dHVyZSA9IChzcmMpID0+IHtcblx0XHRzZWxmLnRleHR1cmUgPSBzcmM7XG5cblx0XHQvLyBTZXQgdGhlIHNwcml0ZSB0byB0aGUgZmlyc3QgZnJhbWVcblx0XHRjb25zdCBpbWdEYXRhID0gQVNTRVRTLmltYWdlc1tzcmNbMF1dO1xuXHRcdHNlbGYuX3JlZ2lzdGVyVGV4dHVyZShpbWdEYXRhKTtcblx0fTtcblxuXHRzZWxmLmdvdG9BbmRTdG9wID0gKGZyYW1lTnVtYmVyLCByZXNldCkgPT4ge1xuXHRcdGNvbnN0IGZyYW1lc0RhdGEgPSBBU1NFVFMuaW1hZ2VzW3NlbGYudGV4dHVyZVtmcmFtZU51bWJlcl1dO1xuXG5cdFx0aWYgKGZyYW1lc0RhdGEpIHtcblx0XHRcdHNlbGYuX3JlZ2lzdGVyVGV4dHVyZShmcmFtZXNEYXRhKTtcblx0XHR9XG5cblx0XHRzZWxmLmN1cnJlbnRGcmFtZSA9IGZyYW1lTnVtYmVyO1xuXG5cdFx0aWYgKHJlc2V0KSByZXNldEFuaW1hdGlvbigpO1xuXHR9O1xuXG5cdHNlbGYucGxheSA9ICgpID0+IHtcblx0XHRpZiAoIXNlbGYucGxheWluZykge1xuXHRcdFx0c2VsZi5wbGF5aW5nID0gdHJ1ZTtcblx0XHR9XG5cdH07XG5cblx0c2VsZi5zdG9wID0gKCkgPT4ge1xuXHRcdHJlc2V0QW5pbWF0aW9uKCk7XG5cdFx0c2VsZi5nb3RvQW5kU3RvcChzZWxmLmN1cnJlbnRGcmFtZSk7XG5cdH07XG5cblx0c2VsZi5hbmltVXBkYXRlID0gKGR0KSA9PiB7XG5cdFx0aWYgKCFzZWxmLnBsYXlpbmcpIHtcblx0XHRcdGFjY3VtdWxhdG9yID0gMDtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRhY2N1bXVsYXRvciArPSBkdDtcblxuXHRcdHdoaWxlKGFjY3VtdWxhdG9yICogc2VsZi5mcHMgPj0gMSkge1xuXHRcdFx0YWR2YW5jZUZyYW1lKCk7XG5cdFx0XHRhY2N1bXVsYXRvciAtPSAxIC8gc2VsZi5mcHM7XG5cdFx0fVxuXHR9O1xuXG5cdGNvbnN0IF9kZXN0cm95ID0gc2VsZi5kZXN0cm95O1xuXG5cdHNlbGYuZGVzdHJveSA9ICgpID0+IHtcblx0XHRzZWxmLm9uQW5pbUNvbXBsZXRlID0gdW5kZWZpbmVkO1xuXHRcdHNlbGYub25BbmltVXBkYXRlID0gdW5kZWZpbmVkO1xuXHRcdHJlc2V0QW5pbWF0aW9uKCk7XG5cdFx0X2Rlc3Ryb3koKTtcblx0fTtcblxuXHRmdW5jdGlvbiBhZHZhbmNlRnJhbWUoKSB7XG5cdFx0c2VsZi5nb3RvQW5kU3RvcChmcmFtZXNbZnJhbWVDb3VudGVyXSk7XG5cblx0XHRpZiAoc2VsZi5vbkFuaW1VcGRhdGUpIHNlbGYub25BbmltVXBkYXRlKGZyYW1lQ291bnRlcik7XG5cblx0XHRmcmFtZUNvdW50ZXIgKz0gMTtcblxuXHRcdGlmIChmcmFtZUNvdW50ZXIgPj0gZnJhbWVzLmxlbmd0aCkge1xuXHRcdFx0aWYgKHNlbGYubG9vcCkge1xuXHRcdFx0XHRmcmFtZUNvdW50ZXIgPSAwO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKGZyYW1lQ291bnRlciA+PSBmcmFtZXMubGVuZ3RoICsgMSAmJiBzZWxmLm9uQW5pbUNvbXBsZXRlKSB7XG5cdFx0XHRcdFx0c2VsZi5vbkFuaW1Db21wbGV0ZSgpO1xuXHRcdFx0XHRcdHNlbGYuc3RvcCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gcmVzZXRBbmltYXRpb24oKSB7XG5cdFx0YWNjdW11bGF0b3IgPSAwO1xuXHRcdGZyYW1lQ291bnRlciA9IDA7XG5cdFx0c2VsZi5wbGF5aW5nID0gZmFsc2U7XG5cdH1cblxuXHRzZWxmLnNldFRleHR1cmUoc3JjKTtcblxuXHRyZXR1cm4gc2VsZjtcbn1cbiIsICJpbXBvcnQgeyBEaXNwbGF5T2JqZWN0IH0gZnJvbSAnLi9EaXNwbGF5T2JqZWN0JztcblxuLyoqXG4gKiBAdHlwZSB7Rkdyb3VwfVxuICovXG5leHBvcnQgZnVuY3Rpb24gR3JvdXAoKSB7XG5cdGxldCBuZXdXaWR0aCA9IDA7XG5cdGxldCBuZXdIZWlnaHQgPSAwO1xuXG5cdGNvbnN0IG8gPSBEaXNwbGF5T2JqZWN0KCk7XG5cdGNvbnN0IF9hZGRDaGlsZCA9IG8uYWRkQ2hpbGQ7XG5cdGNvbnN0IF9yZW1vdmVDaGlsZCA9IG8ucmVtb3ZlQ2hpbGQ7XG5cblx0LyoqXG5cdCAqIEB0eXBlIHtQYXJ0aWFsPFRHcm91cE9ubHlQcm9wcz59XG5cdCovXG5cdGxldCBwcm9wcyA9IHtcblx0XHRjYWxjdWxhdGVTaXplXG5cdH07XG5cblx0bGV0IHNlbGYgPSAvKiogQHR5cGUge1RHcm91cH0gKi8gKE9iamVjdC5hc3NpZ24obywgcHJvcHMpKTtcblxuXHRzZWxmLmFkZENoaWxkID0gKHNwcml0ZSkgPT4ge1xuXHRcdF9hZGRDaGlsZChzcHJpdGUpO1xuXHRcdGNhbGN1bGF0ZVNpemUoKTtcblx0fTtcblxuXHRzZWxmLnJlbW92ZUNoaWxkID0gKHNwcml0ZSkgPT4ge1xuXHRcdF9yZW1vdmVDaGlsZChzcHJpdGUpO1xuXHRcdGNhbGN1bGF0ZVNpemUoKTtcblx0fTtcblxuXHRmdW5jdGlvbiBjYWxjdWxhdGVTaXplKCkge1xuXHRcdGlmIChzZWxmLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcblx0XHRcdG5ld1dpZHRoID0gMDtcblx0XHRcdG5ld0hlaWdodCA9IDA7XG5cblx0XHRcdHNlbGYuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcblx0XHRcdFx0aWYgKGNoaWxkLnggKyBjaGlsZC53aWR0aCA+IG5ld1dpZHRoKSB7XG5cdFx0XHRcdFx0bmV3V2lkdGggPSBjaGlsZC54ICsgY2hpbGQud2lkdGg7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGNoaWxkLnkgKyBjaGlsZC5oZWlnaHQgPiBuZXdIZWlnaHQpIHtcblx0XHRcdFx0XHRuZXdIZWlnaHQgPSBjaGlsZC55ICsgY2hpbGQuaGVpZ2h0O1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHNlbGYud2lkdGggPSBuZXdXaWR0aDtcblx0XHRcdHNlbGYuaGVpZ2h0ID0gbmV3SGVpZ2h0O1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBzZWxmO1xufVxuIiwgImltcG9ydCB7IEFuaW1hdGVkU3ByaXRlIH0gZnJvbSAnLi9BbmltYXRlZFNwcml0ZSc7XG5pbXBvcnQgeyBHcm91cCB9IGZyb20gJy4vR3JvdXAnO1xuXG4vKipcbiAqIEB0eXBlIHtGTW92aWVDbGlwfVxuICovXG5leHBvcnQgZnVuY3Rpb24gTW92aWVDbGlwKGNsaXBzKSB7XG5cdC8qKlxuXHQgKiBAdHlwZSB7VERpc3BsYXlPYmplY3R9XG5cdCAqL1xuXHRsZXQgcGFyZW50O1xuXG5cdC8qKlxuXHQgKiBAdHlwZSB7VEFuaW1hdGVkU3ByaXRlfVxuXHQgKi9cblx0bGV0IGN1cnJlbnRBbmltO1xuXG5cdC8qKlxuXHQgKiBAdHlwZSB7VEFuaW1hdGlvbnN9XG5cdCAqL1xuXHRsZXQgYW5pbWF0aW9ucyA9IHt9O1xuXG5cdGxldCBvID0gR3JvdXAoKTtcblxuXHQvKipcblx0ICogQHR5cGUge1BhcnRpYWw8VE1vdmllQ2xpcE9ubHlQcm9wcz59XG5cdCAqL1xuXHRsZXQgcHJvcHMgPSB7XG5cdFx0YWRkVG8sXG5cdFx0cGxheSxcblx0XHRzdG9wXG5cdH07XG5cblx0bGV0IHNlbGYgPSAvKiogQHR5cGUge1RNb3ZpZUNsaXB9Ki8gKE9iamVjdC5hc3NpZ24obywgcHJvcHMpKTtcblxuXHRjb25zdCBfZGVzdHJveSA9IHNlbGYuZGVzdHJveTtcblxuXHRzZWxmLmRlc3Ryb3kgPSAoKSA9PiB7XG5cdFx0X2Rlc3Ryb3koKTtcblx0XHRhbmltYXRpb25zID0ge307XG5cdH07XG5cblx0aWYgKGNsaXBzKSBpbml0KCk7XG5cblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHRmb3IgKGxldCBuYW1lIGluIGNsaXBzKSB7XG5cdFx0XHRjb25zdCBjbGlwID0gY2xpcHNbbmFtZV07XG5cdFx0XHRjb25zdCBhbmltID0gQW5pbWF0ZWRTcHJpdGUoY2xpcC5mcmFtZXMpO1xuXHRcdFx0YW5pbWF0aW9uc1tuYW1lXSA9IGFuaW07XG5cdFx0XHRhbmltLm5hbWUgPSBuYW1lO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuXHQgKiBAcmV0dXJucyB7dm9pZH1cblx0ICovXG5cdGZ1bmN0aW9uIGNyZWF0ZShuYW1lKSB7XG5cdFx0aWYgKGN1cnJlbnRBbmltICYmIHBhcmVudCkge1xuXHRcdFx0Y3VycmVudEFuaW0uZGVzdHJveSgpO1xuXHRcdH1cblxuXHRcdGNvbnN0IGNsaXAgPSBjbGlwc1tuYW1lXTtcblx0XHRjdXJyZW50QW5pbSA9IGFuaW1hdGlvbnNbbmFtZV07XG5cdFx0Y3VycmVudEFuaW0uZnBzID0gY2xpcC5mcHMgIT09IHVuZGVmaW5lZCA/IGNsaXAuZnBzIDogY3VycmVudEFuaW0uZnBzO1xuXHRcdGN1cnJlbnRBbmltLmxvb3AgPSBjbGlwLmxvb3AgIT09IHVuZGVmaW5lZCA/IGNsaXAubG9vcCA6IGN1cnJlbnRBbmltLmxvb3A7XG5cdFx0c2VsZi5hZGRDaGlsZChjdXJyZW50QW5pbSk7XG5cdFx0c2VsZi5jdXJyZW50QW5pbU5hbWUgPSBuYW1lO1xuXHR9XG5cblx0LyoqXG5cdCAqIEB0eXBlIHtGTW92ZUNsaXBQbGF5fVxuXHQgKi9cblx0ZnVuY3Rpb24gcGxheShuYW1lKSB7XG5cdFx0aWYgKGN1cnJlbnRBbmltICYmIG5hbWUgPT09IGN1cnJlbnRBbmltLm5hbWUpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y3JlYXRlKG5hbWUpO1xuXHRcdGN1cnJlbnRBbmltLnBsYXkoKTtcblx0XHRjdXJyZW50QW5pbS5vbkFuaW1VcGRhdGUgPSAoKSA9PiB7XG5cdFx0XHRpZiAoc2VsZi5vbkFuaW1VcGRhdGUpIHNlbGYub25BbmltVXBkYXRlKGN1cnJlbnRBbmltLmN1cnJlbnRGcmFtZSwgbmFtZSk7XG5cdFx0fTtcblx0XHRjdXJyZW50QW5pbS5vbkFuaW1Db21wbGV0ZSA9ICgpID0+IHtcblx0XHRcdGlmIChzZWxmLm9uQW5pbUNvbXBsZXRlKSBzZWxmLm9uQW5pbUNvbXBsZXRlKG5hbWUpO1xuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogQHR5cGUge3ZvaWRGdW5jfVxuXHQgKi9cblx0ZnVuY3Rpb24gc3RvcCgpIHtcblx0XHRpZiAoIWN1cnJlbnRBbmltKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGN1cnJlbnRBbmltLnN0b3AoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBGb3IgbW92aWVjbGlwLCB1c2UgdGhpcyBmbiB0byBhZGRUbyBwYXJlbnQgaW5zdGVhZCBvZiBzb21lUGFyZW50LmFkZENoaWwoLi4uKVxuXHQgKiBBZGQgdG8gcGFyZW50IGRpc3BsYXlPYmplY3QuXG5cdCAqIENhbGwgdGhpcyBiZWZvcmUgcGxheSAmIHN0b3AgbWV0aG9kLlxuXHQgKiBAdHlwZSB7RkFkZFRvfVxuXHQgKi9cblx0ZnVuY3Rpb24gYWRkVG8oX3BhcmVudCkge1xuXHRcdHBhcmVudCA9IF9wYXJlbnQ7IFxuXHRcdHBhcmVudC5hZGRDaGlsZChvKTtcblx0fVxuXG5cdHJldHVybiBzZWxmO1xufVxuIiwgImltcG9ydCB7IERpc3BsYXlPYmplY3QgfSBmcm9tICcuL0Rpc3BsYXlPYmplY3QnO1xuXG4vLyBUT0RPOjogcmVmYWN0b3JcblxuLyoqXG4gKiBAdHlwZSB7RlJlY3RhbmdsZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFJlY3RhbmdsZShcblx0d2lkdGg9MSxcblx0aGVpZ2h0PTEsXG5cdGZpbGxTdHlsZT0ncmVkJyxcblx0c3Ryb2tlU3R5bGU9J25vbmUnLFxuXHRsaW5lV2lkdGg9MCxcblx0eD0wLFxuXHR5PTBcbikge1xuXHRjb25zdCBvID0gRGlzcGxheU9iamVjdCgpO1xuXG5cdC8qKlxuXHQgKiBAdHlwZSB7UGFydGlhbDxUUmVjdE9ubHlQcm9wcz59XG5cdCAqL1xuXHRsZXQgcHJvcHMgPSB7XG5cdFx0d2lkdGgsXG5cdFx0aGVpZ2h0LFxuXHRcdGZpbGxTdHlsZSxcblx0XHRzdHJva2VTdHlsZSxcblx0XHRsaW5lV2lkdGgsXG5cdFx0eCxcblx0XHR5XG5cdH07XG5cblx0bGV0IHNlbGYgPSAvKiogQHR5cGUge1RSZWN0fSAqLyAoT2JqZWN0LmFzc2lnbihvLCBwcm9wcykpO1xuXG5cdHNlbGYucmVuZGVyID0gZnVuY3Rpb24gKGN0eCkge1xuXHRcdC8vIGN0eC5zdHJva2VTdHlsZSA9IHByb3BzLnN0cm9rZVN0eWxlO1xuXHRcdC8vIGN0eC5saW5lV2lkdGggPSBwcm9wcy5saW5lV2lkdGg7XG5cdFx0Y3R4LmZpbGxTdHlsZSA9IHByb3BzLmZpbGxTdHlsZTtcblx0XHRjdHguYmVnaW5QYXRoKCk7XG5cblx0XHQvLyBEcmF3IHRoZSByZWN0YW5nbGUgYXJvdW5kIHRoZSBjb250ZXh0J3MgY2VudGVyIGAwYCBwb2ludC5cblx0XHRjdHgucmVjdCgtc2VsZi53aWR0aCAqIHNlbGYucGl2b3RYLCAtc2VsZi5oZWlnaHQgKiBzZWxmLnBpdm90WSwgc2VsZi53aWR0aCwgc2VsZi5oZWlnaHQpO1xuXHRcdGlmIChzZWxmLm1hc2spIHtcblx0XHRcdGN0eC5jbGlwKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIGlmIChzZWxmLnN0cm9rZVN0eWxlICYmIHNlbGYuc3Ryb2tlU3R5bGUgIT09ICdub25lJykgY3R4LnN0cm9rZSgpO1xuXHRcdFx0Ly8gaWYgKHNlbGYuZmlsbFN0eWxlICYmIHNlbGYuZmlsbFN0eWxlICE9PSAnbm9uZScpIGN0eC5maWxsKCk7XG5cdFx0XHRjdHguZmlsbCgpO1xuXHRcdH1cblx0fTtcblxuXHRyZXR1cm4gc2VsZjtcbn1cbiIsICJpbXBvcnQgeyBEaXNwbGF5T2JqZWN0IH0gZnJvbSAnLi9EaXNwbGF5T2JqZWN0JztcblxuLyoqXG4gKiBAdHlwZSB7RlN0YWdlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gU3RhZ2Uod2lkdGgsIGhlaWdodCkge1xuXHRsZXQgbyA9IERpc3BsYXlPYmplY3QoKTtcblxuXHQvKipcblx0ICogQHR5cGUge1RTdGFnZU9ubHlQcm9wc31cblx0ICovXG5cdGxldCBwcm9wcyA9IHtcblx0XHRzdGFnZTogdHJ1ZVxuXHR9O1xuXG5cdGxldCBzZWxmID0gLyoqIEB0eXBlIHtUU3RhZ2V9ICovIChPYmplY3QuYXNzaWduKG8sIHByb3BzKSk7XG5cdHNlbGYud2lkdGggPSB3aWR0aDtcblx0c2VsZi5oZWlnaHQgPSBoZWlnaHQ7XG5cdHNlbGYubmFtZSA9ICdzdGFnZSc7XG5cblx0cmV0dXJuIHNlbGY7XG59XG4iLCAiLyoqXG4gKiBAdHlwZSB7RktleWJvYXJkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gS2V5Ym9hcmQoaW5wdXRLZXlzKSB7XG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXlEb3duSGFuZGxlciwgZmFsc2UpO1xuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBvbktleVVwSGFuZGxlciwgZmFsc2UpO1xuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGVcblx0ICogQHJldHVybnMge3ZvaWR9XG5cdCAqL1xuXHRmdW5jdGlvbiBvbktleURvd25IYW5kbGVyKGUpIHtcblx0XHRzZXRLZXlQcmVzc1N0YXRlKGUua2V5LCB0cnVlKTtcblx0XHQvLyBlLnByZXZlbnREZWZhdWx0KCk7XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBlXG5cdCAqIEByZXR1cm5zIHt2b2lkfVxuXHQgKi9cblx0ZnVuY3Rpb24gb25LZXlVcEhhbmRsZXIoZSkge1xuXHRcdHNldEtleVByZXNzU3RhdGUoZS5rZXksIGZhbHNlKTtcblx0XHQvLyBlLnByZXZlbnREZWZhdWx0KCk7XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleUNvZGVcblx0ICogQHBhcmFtIHtib29sZWFufSBpc0Rvd25cblx0ICogQHJldHVybnMge3ZvaWR9XG5cdCAqL1xuXHRmdW5jdGlvbiBzZXRLZXlQcmVzc1N0YXRlKGtleUNvZGUsIGlzRG93bikge1xuXHRcdGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhpbnB1dEtleXMpO1xuXHRcdGtleXMuZm9yRWFjaChrZXkgPT4ge1xuXHRcdFx0aWYgKGtleUNvZGUgPT09IGlucHV0S2V5c1trZXldLmNvZGUpIHtcblx0XHRcdFx0aW5wdXRLZXlzW2tleV0uaXNEb3duID0gaXNEb3duO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEB0eXBlIHtGS2V5SXNEb3dufVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNEb3duKGtleSkge1xuXHRcdHJldHVybiBCb29sZWFuKGlucHV0S2V5c1trZXldLmlzRG93bik7XG5cdH0gXG5cblx0cmV0dXJuIHtcblx0XHRpc0Rvd25cblx0fTtcbn1cbiIsICJpbXBvcnQgeyBBU1NFVFMgfSBmcm9tICdAcGFja2FnZXMvYXNzZXRzLXN0b3JlJztcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc291cmNlXG4gKiBAcGFyYW0geyhmaWxlOiBhbnkpID0+IHZvaWR9IG9uTG9hZFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBIdHRwUmVxdWVzdChzb3VyY2UsIG9uTG9hZCkge1xuXHRjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuXHR4aHIub3BlbignR0VUJywgc291cmNlLCB0cnVlKTtcblx0eGhyLmFkZEV2ZW50TGlzdGVuZXIoJ3JlYWR5c3RhdGVjaGFuZ2UnLCAoKSA9PiB7XG5cdFx0aWYgKHhoci5zdGF0dXMgPT09IDIwMCAmJiB4aHIucmVhZHlTdGF0ZSA9PT0gNCkge1xuXHRcdFx0QVNTRVRTLnJlc291cmNlc1tzb3VyY2VdID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcblxuXHRcdFx0Y29uc3QgZmlsZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG5cdFx0XHRmaWxlLm5hbWUgPSBzb3VyY2U7XG5cblx0XHRcdG9uTG9hZChmaWxlKTtcblx0XHR9XG5cdH0pO1xuXHR4aHIuc2VuZCgpO1xufVxuIiwgImltcG9ydCB7IEh0dHBSZXF1ZXN0IH0gZnJvbSAnQHBhY2thZ2VzL2h0dHAtcmVxdWVzdCc7XG5pbXBvcnQgeyBnZXRGaWxlTmFtZUZyb21QYXRoIH0gZnJvbSAnQHBhY2thZ2VzL3V0aWxzL21pc2MnO1xuaW1wb3J0IHsgSG93bCB9IGZyb20gJ2hvd2xlcic7XG5cbi8qKlxuICogQHR5cGUge0ZTb3VuZExvYWRlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFNvdW5kTG9hZGVyKHNvdXJjZSwgb25Mb2FkKSB7XG5cblx0SHR0cFJlcXVlc3Qoc291cmNlLCAoZmlsZSkgPT4ge1xuXHRcdGlmICghZmlsZS5zcHJpdGUpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRsb2FkU291bmQoZmlsZSk7XG5cdH0pO1xuXG5cdC8qKlxuXHQgKiBAcGFyYW0geyp9IGZpbGUgLSBhdWRpb3Nwcml0ZSBqc29uIGZpbGVcblx0ICogQHJldHVybnMge3ZvaWR9XG5cdCAqL1xuXHRmdW5jdGlvbiBsb2FkU291bmQoZmlsZSkge1xuXHRcdC8qKlxuXHRcdCAqIEB0eXBlIHtzdHJpbmdbXX1cblx0XHQgKi9cblx0XHRjb25zdCB1cmxzID0gZmlsZS51cmxzO1xuXHRcdGNvbnN0IHNyYyA9IHVybHMubWFwKHVybCA9PiBgbWVkaWEvc291bmRzL291dC8ke2dldEZpbGVOYW1lRnJvbVBhdGgodXJsKX1gKTtcblxuXHRcdGNvbnN0IHNvdW5kID0gbmV3IEhvd2woe1xuXHRcdFx0c3JjLFxuXHRcdFx0c3ByaXRlOiBmaWxlLnNwcml0ZVxuXHRcdH0pO1xuXG5cdFx0c291bmQub24oJ2xvYWQnLCAoKSA9PiB7XG5cdFx0XHRvbkxvYWQoc291bmQpO1xuXHRcdH0pO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgQVNTRVRTIH0gZnJvbSAnQHBhY2thZ2VzL2Fzc2V0cy1zdG9yZSc7XG5pbXBvcnQgeyBIdHRwUmVxdWVzdCB9IGZyb20gJ0BwYWNrYWdlcy9odHRwLXJlcXVlc3QnO1xuaW1wb3J0IHsgZ2V0RmlsZU5hbWVGcm9tUGF0aCB9IGZyb20gJ0BwYWNrYWdlcy91dGlscy9taXNjJztcblxuLyoqXG4gKiBAdHlwZSB7RlRpbGVkTG9hZGVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gVGlsZWRMb2FkZXIoc291cmNlcywgb25Mb2FkKSB7XG5cdGxldCBsb2FkZWRDb3VudCA9IDA7XG5cblx0c291cmNlcy5mb3JFYWNoKHNvdXJjZSA9PiB7XG5cdFx0SHR0cFJlcXVlc3Qoc291cmNlLCAoZmlsZSkgPT4ge1xuXHRcdFx0bG9hZFRpbGVkKGZpbGUsIHNvdXJjZSk7XG5cdFx0fSk7XG5cdH0pO1xuXG5cdC8qKlxuXHQgKiBAcGFyYW0geyp9IGZpbGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHNvdXJjZVxuXHQgKiBAcmV0dXJucyB7dm9pZH1cblx0ICovXG5cdGZ1bmN0aW9uIGxvYWRUaWxlZChmaWxlLCBzb3VyY2UpIHtcblx0XHRjb25zdCBmaWxlTmFtZSA9IGdldEZpbGVOYW1lRnJvbVBhdGgoc291cmNlKTtcblx0XHRjb25zdCBuYW1lID0gZmlsZU5hbWUuc3BsaXQoJy4nKVswXTtcblxuXHRcdEFTU0VUUy50aWxlZHNbbmFtZV0gPSBmaWxlOyBcblxuXHRcdGxvYWRlZENvdW50ICs9MTtcblx0XHRpZiAobG9hZGVkQ291bnQgPj0gc291cmNlcy5sZW5ndGgpIHtcblx0XHRcdG9uTG9hZCgpO1xuXHRcdH1cblx0fVxufVxuIiwgImltcG9ydCB7IEFTU0VUUyB9IGZyb20gJ0BwYWNrYWdlcy9hc3NldHMtc3RvcmUnO1xuaW1wb3J0IHsgSHR0cFJlcXVlc3QgfSBmcm9tICdAcGFja2FnZXMvaHR0cC1yZXF1ZXN0JztcblxuLyoqXG4gKiBAdHlwZSB7RlRQU0ltYWdlTG9hZGVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gVFBTSW1hZ2VMb2FkZXIoc291cmNlcywgb25Mb2FkKSB7XG5cdC8qKlxuXHQgKiBAdHlwZSB7VFRQU0ltYWdlTG9hZGVyfVxuXHQgKi9cblx0Y29uc3QgaW1hZ2VzID0ge307XG5cdGxldCBsb2FkZWRDb3VudCA9IDA7XG5cblx0c291cmNlcy5mb3JFYWNoKHNvdXJjZSA9PiB7XG5cdFx0SHR0cFJlcXVlc3Qoc291cmNlLCAoZmlsZSkgPT4ge1xuXHRcdFx0aWYgKCFmaWxlLmZyYW1lcykge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGxvYWRJbWFnZShmaWxlLCBzb3VyY2UpO1xuXHRcdH0pO1xuXHR9KTtcblxuXHQvKipcblx0ICogQHBhcmFtIHsqfSBqc29uXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2Vcblx0ICogQHJldHVybnMge3ZvaWR9XG5cdCAqL1xuXHRmdW5jdGlvbiBsb2FkSW1hZ2UoanNvbiwgc291cmNlKSB7XG5cdFx0Y29uc3QgYmFzZVVybCA9IHNvdXJjZS5yZXBsYWNlKC9bXlxcL10qJC8sICcnKTtcblx0XHRjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuXG5cdFx0aW1hZ2Uuc3JjID0gYmFzZVVybCArIGpzb24ubWV0YS5pbWFnZTtcblx0XHRpbWFnZS5vbmxvYWQgPSAoKSA9PiB7XG5cdFx0XHRPYmplY3Qua2V5cyhqc29uLmZyYW1lcykuZm9yRWFjaChzcmMgPT4ge1xuXHRcdFx0XHRpbWFnZXNbc3JjXSA9IGpzb24uZnJhbWVzW3NyY107XG5cdFx0XHRcdGltYWdlc1tzcmNdLnNvdXJjZSA9IGltYWdlO1xuXHRcdFx0fSk7XG5cblx0XHRcdGxvYWRlZENvdW50ICs9MTtcblx0XHRcdGlmIChsb2FkZWRDb3VudCA+PSBzb3VyY2VzLmxlbmd0aCkge1xuXHRcdFx0XHRvbkxvYWQoKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0QVNTRVRTLmltYWdlcyA9IGltYWdlcztcbn1cbiIsICJpbXBvcnQgeyBTb3VuZExvYWRlciB9IGZyb20gJy4vU291bmRMb2FkZXInO1xuaW1wb3J0IHsgVGlsZWRMb2FkZXIgfSBmcm9tICcuL1RpbGVkTG9hZGVyJztcbmltcG9ydCB7IFRQU0ltYWdlTG9hZGVyIH0gZnJvbSAnLi9UUFNJbWFnZUxvYWRlcic7XG5cbi8qKlxuICogQHR5cGUge0ZMb2FkZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBMb2FkZXIocHJvcHMpIHtcblx0Y29uc3QgdG90YWwgPSBbXG5cdFx0Qm9vbGVhbihwcm9wcy50aWxlZEZpbGVzKSxcblx0XHRCb29sZWFuKHByb3BzLnNvdW5kU3ByaXRlKSxcblx0XHRCb29sZWFuKHByb3BzLnRpbGVkRmlsZXMpXG5cdF0uZmlsdGVyKHYgPT4gdik7XG5cblx0bGV0IGxvYWRlZENvdW50ID0gMDtcblxuXHRpZiAocHJvcHMudHBzSlNPTkZpbGVzKSB7XG5cdFx0VFBTSW1hZ2VMb2FkZXIocHJvcHMudHBzSlNPTkZpbGVzLCAoKSA9PiB7XG5cdFx0XHRpZiAocHJvcHMub25Mb2FkSW1hZ2VzKSBwcm9wcy5vbkxvYWRJbWFnZXMoKTtcblx0XHRcdG9uTG9hZCgpO1xuXHRcdH0pO1xuXHR9XG5cblx0aWYgKHByb3BzLnNvdW5kU3ByaXRlKSB7XG5cdFx0U291bmRMb2FkZXIocHJvcHMuc291bmRTcHJpdGUsIChzb3VuZCkgPT4ge1xuXHRcdFx0aWYgKHByb3BzLm9uTG9hZFNvdW5kcykgcHJvcHMub25Mb2FkU291bmRzKHNvdW5kKTtcblx0XHRcdG9uTG9hZCgpO1xuXHRcdH0pO1xuXHR9XG5cblx0aWYgKHByb3BzLnRpbGVkRmlsZXMpIHtcblx0XHRUaWxlZExvYWRlcihwcm9wcy50aWxlZEZpbGVzLCAoKSA9PiB7XG5cdFx0XHRpZiAocHJvcHMub25Mb2FkVGlsZWRzKSBwcm9wcy5vbkxvYWRUaWxlZHMoKTtcblx0XHRcdG9uTG9hZCgpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gb25Mb2FkKCkge1xuXHRcdGxvYWRlZENvdW50ICs9IDE7XG5cblx0XHRpZiAobG9hZGVkQ291bnQgPj0gdG90YWwubGVuZ3RoKSB7XG5cdFx0XHRwcm9wcy5vbkxvYWRDb21wbGV0ZSgpO1xuXHRcdH1cblx0fVxufVxuIiwgIi8qKlxuICogQHBhcmFtIHtUQ2FudmFzTGF5ZXJ9IGNhbnZhc0xheWVyXG4gKiBAcGFyYW0ge1RTdGFnZX0gc3RhZ2VcbiAqIEBwYXJhbSB7bnVtYmVyfSBkdFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJDYW52YXNMYXllcihjYW52YXNMYXllciwgc3RhZ2UsIGR0KSB7XG5cdGNvbnN0IGN0eCA9IGNhbnZhc0xheWVyLmN0eDtcblx0Y29uc3QgY2FudmFzID0gY2FudmFzTGF5ZXIuY2FudmFzO1xuXG5cdGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuXHRzdGFnZS5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcblx0XHRkaXNwbGF5KGNoaWxkKTtcblx0fSk7XG5cblx0LyoqXG5cdCAqIEBwYXJhbSB7VERpc3BsYXlPYmplY3R9IGRvYlxuXHQgKi9cblx0ZnVuY3Rpb24gZGlzcGxheShkb2IpIHtcblx0XHRpZiAoXG5cdFx0XHRkb2IudmlzaWJsZSAmJlxuXHRcdFx0XHRcdGRvYi5neCgpIDwgY2FudmFzLndpZHRoICsgZG9iLndpZHRoICYmXG5cdFx0XHRcdFx0ZG9iLmd4KCkgKyBkb2Iud2lkdGggPj0gLWRvYi53aWR0aCAmJlxuXHRcdFx0XHRcdGRvYi5neSgpIDwgY2FudmFzLmhlaWdodCArIGRvYi5oZWlnaHQgJiZcblx0XHRcdFx0XHRkb2IuZ3koKSArIGRvYi5oZWlnaHQgPj0gLWRvYi5oZWlnaHRcblx0XHQpIHtcblx0XHRcdGN0eC5zYXZlKCk7XG5cdFx0XHRjdHgudHJhbnNsYXRlKFxuXHRcdFx0XHRkb2IueCArIGRvYi53aWR0aCAqIGRvYi5waXZvdFgsXG5cdFx0XHRcdGRvYi55ICsgZG9iLmhlaWdodCAqIGRvYi5waXZvdFlcblx0XHRcdCk7XG5cblx0XHRcdGN0eC5nbG9iYWxBbHBoYSA9IGRvYi5hbHBoYTtcblx0XHRcdC8vIGN0eC5yb3RhdGUoZG9iLnJvdGF0aW9uKTsgLy8gVE9ETzogY2hlY2sgaWYgbmVjZXNzYXJ5XG5cdFx0XHRjdHguc2NhbGUoZG9iLnNjYWxlWCwgZG9iLnNjYWxlWSk7XG5cblx0XHRcdGlmIChkb2IucmVuZGVyKSB7XG5cdFx0XHRcdGRvYi5yZW5kZXIoY3R4KTtcblx0XHRcdH1cblx0XHRcdGlmIChkb2IuYW5pbVVwZGF0ZSkge1xuXHRcdFx0XHRkb2IuYW5pbVVwZGF0ZShkdCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChkb2IuY2hpbGRyZW4gJiYgZG9iLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Ly8gUmVzZXQgdGhlIGNvbnRleHQgYmFjayB0byB0aGUgcGFyZW50IGRvYidzIHRvcCBsZWZ0IGNvcm5lclxuXHRcdFx0XHRjdHgudHJhbnNsYXRlKFxuXHRcdFx0XHRcdC1kb2Iud2lkdGggKiBkb2IucGl2b3RYLFxuXHRcdFx0XHRcdC1kb2IuaGVpZ2h0ICogZG9iLnBpdm90WVxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGRvYi5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcblx0XHRcdFx0XHRkaXNwbGF5KGNoaWxkKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdGN0eC5yZXN0b3JlKCk7XG5cdFx0fVxuXHR9XG59XG4iLCAiLyoqXG4gKiBAcGFyYW0ge1REaW1lbnNpb259IGRpbWVuc2lvblxuICogQHBhcmFtIHtIVE1MRGl2RWxlbWVudH0gcm9vdFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBSZXNpemVyKGRpbWVuc2lvbiwgcm9vdCkge1xuXHRmdW5jdGlvbiByZXNpemUoKSB7XG5cdFx0Y29uc3QgaW5uZXJIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cdFx0Y29uc3QgaW5uZXJXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXHRcdGNvbnN0IHJhdGlvV2lkdGggPSBpbm5lcldpZHRoIC8gZGltZW5zaW9uLndpZHRoO1xuXHRcdGNvbnN0IHRvcCA9IC0oZGltZW5zaW9uLmhlaWdodCAtIGlubmVySGVpZ2h0KSAvIDI7XG5cdFx0Y29uc3QgbGVmdCA9IC0oZGltZW5zaW9uLndpZHRoIC0gaW5uZXJXaWR0aCkgLyAyO1xuXHRcdHJvb3Quc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKCcgKyByYXRpb1dpZHRoICsgJyknO1xuXHRcdHJvb3Quc3R5bGUudG9wID0gdG9wLnRvU3RyaW5nKCkgKyAncHgnO1xuXHRcdHJvb3Quc3R5bGUubGVmdCA9IGxlZnQudG9TdHJpbmcoKSArICdweCc7XG5cdH1cblx0cmVzaXplKCk7XG5cdHdpbmRvdy5vbnJlc2l6ZSA9IHJlc2l6ZTtcbn1cbiIsICIvKipcbiAqIEB0eXBlIHtGVGlja2VyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gVGlja2VyKHByb3BzKSB7XG5cdGNvbnN0IGZwcyA9IHByb3BzICYmIHByb3BzLmZwcyA/IHByb3BzLmZwcyA6IDYwO1xuXHRsZXQgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG5cdGxldCBhY2N1bXVsYXRvciA9IDA7XG5cdGxldCB0b3RhbFVwZGF0ZXJzVUlEID0gMDtcblx0bGV0IHRvdGFsUmVuZGVyZXJzVUlEID0gMDtcblx0bGV0IGRlbHRhID0gMWUzIC8gZnBzO1xuXHRsZXQgc3RlcCA9IDEgLyBmcHM7XG5cdGxldCBlbGFwc2VkID0gMDtcblx0bGV0IGZvY3VzZWQgPSB0cnVlO1xuXHQvKipcblx0ICogQHR5cGUge1RUaWNrZXJVcGRhdGVyc31cblx0ICovXG5cdGxldCB1cGRhdGVycyA9IHt9O1xuXHQvKipcblx0ICogQHR5cGUge1RUaWNrZXJSZW5kZXJlcnN9XG5cdCAqL1xuXHRsZXQgcmVuZGVyZXJzID0ge307XG5cblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4ge1xuXHRcdG9uVmlzaWJpbGl0eUNoYW5nZSh0cnVlKTtcblx0fSk7XG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4ge1xuXHRcdG9uVmlzaWJpbGl0eUNoYW5nZShmYWxzZSk7XG5cdH0pO1xuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IHZpc2libGVcblx0ICogQHJldHVybnMge3ZvaWR9XG5cdCAqL1xuXG5cdGZ1bmN0aW9uIG9uVmlzaWJpbGl0eUNoYW5nZSh2aXNpYmxlKSB7XG5cdFx0Zm9jdXNlZCA9IHZpc2libGU7XG5cdFx0aWYgKHByb3BzICYmIHByb3BzLm9uVmlzaWJpbGl0eUNoYW5nZSkgcHJvcHMub25WaXNpYmlsaXR5Q2hhbmdlKHZpc2libGUpO1xuXHR9XG5cblx0dGljaygpO1xuXG5cdGZ1bmN0aW9uIHRpY2soKSB7XG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spO1xuXG5cdFx0aWYgKCFmb2N1c2VkKSB7XG5cdFx0XHQvLyBpdCBkb2Vzbid0IHJ1biBoZXJlIG9uIGNoYW5naW5nIHRhYnMuXG5cdFx0XHQvLyBzbywgYW55IGV2ZW50IHNwZWNpZmljIGxvZ2ljcyBtdXN0IGJlIG9uVmlzaWJpbGl0eUNoYW5nZSgpXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgY3VycmVudCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuXHRcdGVsYXBzZWQgPSBjdXJyZW50IC0gc3RhcnRUaW1lO1xuXHRcdHN0YXJ0VGltZSA9IGN1cnJlbnQ7XG5cblx0XHRpZiAoZWxhcHNlZCA+IDFlMykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGFjY3VtdWxhdG9yICs9IGVsYXBzZWQ7XG5cblx0XHR3aGlsZShhY2N1bXVsYXRvciA+PSBkZWx0YSkge1xuXHRcdFx0dXBkYXRlKHN0ZXApO1xuXHRcdFx0YWNjdW11bGF0b3IgLT0gZGVsdGE7XG5cdFx0fVxuXHRcdHJlbmRlcihzdGVwKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAdHlwZSB7RlRpY2tlclVwZGF0ZX1cblx0ICovXG5cdGZ1bmN0aW9uIHVwZGF0ZShkdCkge1xuXHRcdGZvciAobGV0IGlkIGluIHVwZGF0ZXJzKSB7XG5cdFx0XHR1cGRhdGVyc1tpZF0oZHQpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBAdHlwZSB7RlRpY2tlclJlbmRlcn1cblx0Ki9cblx0ZnVuY3Rpb24gcmVuZGVyKGR0KSB7XG5cdFx0Zm9yIChsZXQgaWQgaW4gcmVuZGVyZXJzKSB7XG5cdFx0XHRyZW5kZXJlcnNbaWRdKGR0KTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQHR5cGUge0ZUaWNrZXJBZGR9XG5cdCAqL1xuXHRmdW5jdGlvbiBhZGQodHlwZSwgY2FsbGJhY2spIHtcblx0XHRsZXQgdG90YWwgPSB0eXBlID09PSAndXBkYXRlJyA/IHRvdGFsVXBkYXRlcnNVSUQgOiB0b3RhbFJlbmRlcmVyc1VJRDsgXG5cblx0XHRjb25zdCBvYmogPSB0eXBlID09PSAndXBkYXRlJyA/IHVwZGF0ZXJzIDogcmVuZGVyZXJzO1xuXG5cdFx0dG90YWwgKz0gMTtcblx0XHRpZiAoIW9ialt0b3RhbF0pIHtcblx0XHRcdG9ialt0b3RhbF0gPSBjYWxsYmFjaztcblx0XHR9XG5cblx0XHRpZiAodHlwZSA9PT0gJ3VwZGF0ZScpIHtcblx0XHRcdHRvdGFsVXBkYXRlcnNVSUQgPSB0b3RhbDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dG90YWxSZW5kZXJlcnNVSUQgPSB0b3RhbDtcblx0XHR9XG5cblx0XHRyZXR1cm4gdG90YWw7XG5cdH1cblxuXHQvKipcblx0ICogQHR5cGUge0ZUaWNrZXJSZW1vdmV9XG5cdCAqL1xuXHRmdW5jdGlvbiByZW1vdmUoaWQsIHR5cGUpIHtcblx0XHRjb25zdCBvYmogPSB0eXBlID09PSAndXBkYXRlJyA/IHVwZGF0ZXJzIDogcmVuZGVyZXJzO1xuXG5cdFx0aWYgKG9ialtpZF0pIHtcblx0XHRcdGRlbGV0ZSBvYmpbaWRdO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB7XG5cdFx0YWRkLFxuXHRcdHJlbW92ZVxuXHR9O1xufVxuIiwgIi8vIFtIb3cgdG8gdXNlXTo6XG4vL1xuLy8gdGltZXIud2FpdCh7XG4vLyBcdHRpbWU6IDUwMDAsXG4vLyBcdG9uQ29tcGxldGU6ICgpPT4ge1xuLy8gXHRcdGNvbnNvbGUubG9nKCdoZWxsbycpO1xuLy8gXHR9XG4vLyB9KTtcbi8vXG4vLyB0aW1lci5jaGFpbihbXG4vLyBcdHtcbi8vIFx0XHR0aW1lOiA1MDAwLFxuLy8gXHRcdG9uQ29tcGxldGU6ICgpID0+IHtcbi8vIFx0XHRcdGNvbnNvbGUubG9nKDEpO1xuLy8gXHRcdH1cbi8vIFx0fSxcbi8vIFx0e1xuLy8gXHRcdHRpbWU6IDIwMDAsXG4vLyBcdFx0b25Db21wbGV0ZTogKCkgPT4ge1xuLy8gXHRcdFx0Y29uc29sZS5sb2coMik7XG4vLyBcdFx0fVxuLy8gXHR9LFxuLy8gXHR7XG4vLyBcdFx0dGltZTogMjAwMCxcbi8vIFx0XHRvbkNvbXBsZXRlOiAoKSA9PiB7XG4vLyBcdFx0XHRjb25zb2xlLmxvZygzKTtcbi8vIFx0XHR9XG4vLyBcdH1cbi8vIF0pO1xuXG4vKipcbiAqIEB0eXBlIHtGVGltZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBUaW1lcigpIHtcblx0LyoqXG5cdCAqIEB0eXBlIHtUVGltZW91dHN9XG5cdCAqL1xuXHRjb25zdCB0aW1lb3V0cyA9IHt9O1xuXG5cdC8qKlxuXHQgKiBAdHlwZSB7VENoYWluZWRUaW1lb3V0c31cblx0ICovXG5cdGNvbnN0IGNoYWluZWRUaW1lb3V0cyA9IHt9O1xuXG5cdGxldCB0b3RhbFRpbWVvdXRzVUlEID0gMDtcblx0bGV0IHRvdGFsQ1RpbWVvdXRzVUlEID0gMDtcblx0bGV0IHBhdXNlZCA9IGZhbHNlO1xuXG5cdGZ1bmN0aW9uIHVwZGF0ZSgpIHtcblx0XHRwYXVzZWQgPSBmYWxzZTtcblx0XHR1cGRhdGVUaW1lb3V0cygpO1xuXHRcdHVwZGF0ZUNoYWluZWRUaW1lb3V0cygpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlVGltZW91dHMoKSB7XG5cdFx0Zm9yIChsZXQgaSBpbiB0aW1lb3V0cykge1xuXHRcdFx0Y29uc3QgdCA9IHRpbWVvdXRzW2ldO1xuXHRcdFx0Y29uc3QgY3VycmVudFRpbWUgPSBEYXRlLm5vdygpO1xuXHRcdFx0Y29uc3QgZWxhcHNlZCA9IGN1cnJlbnRUaW1lIC0gdC5zdGFydFRpbWU7XG5cblx0XHRcdGlmICh0Lm9uU3RhcnQpIHQub25TdGFydCgpO1xuXG5cdFx0XHRpZiAoZWxhcHNlZCA+PSB0LnRpbWUpIHtcblx0XHRcdFx0a2lsbFdhaXQoTnVtYmVyKGkpKTtcblx0XHRcdFx0dC5vbkNvbXBsZXRlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlQ2hhaW5lZFRpbWVvdXRzKCkge1xuXHRcdGZvciAobGV0IGkgaW4gY2hhaW5lZFRpbWVvdXRzKSB7XG5cdFx0XHRjb25zdCB0aW1lcnMgPSBjaGFpbmVkVGltZW91dHNbaV07XG5cblx0XHRcdE9iamVjdC52YWx1ZXModGltZXJzKS5mb3JFYWNoKHQgPT4ge1xuXHRcdFx0XHRpZiAodC5lbmRlZCkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRUaW1lID0gRGF0ZS5ub3coKTtcblx0XHRcdFx0Y29uc3QgZWxhcHNlZCA9IGN1cnJlbnRUaW1lIC0gdC5zdGFydFRpbWU7XG5cblx0XHRcdFx0aWYgKHQub25TdGFydCkgdC5vblN0YXJ0KCk7XG5cblx0XHRcdFx0aWYgKGVsYXBzZWQgPj0gdC50aW1lKSB7XG5cdFx0XHRcdFx0dC5vbkNvbXBsZXRlKCk7XG5cdFx0XHRcdFx0dC5lbmRlZCA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBoYXNFbmRlZCA9IE9iamVjdC52YWx1ZXModGltZXJzKS5ldmVyeSh2ID0+IHYuZW5kZWQpO1xuXG5cdFx0XHRpZiAoaGFzRW5kZWQpIGtpbGxDaGFpbihOdW1iZXIoaSkpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gdGltZVxuXHQgKiBAcmV0dXJucyB7dm9pZH1cblx0ICovXG5cdGZ1bmN0aW9uIHBhdXNlKHRpbWUpIHtcblx0XHRpZiAocGF1c2VkKSB7XG5cdFx0XHR1cGRhdGVQYXVzZWRUaW1lb3V0cyh0aW1lKTtcblx0XHRcdHVwZGF0ZVBhdXNlZENoYWluZWRUaW1lb3V0cyh0aW1lKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRwYXVzZWQgPSB0cnVlO1xuXG5cdFx0cGF1c2VUaW1lb3V0cygpO1xuXHRcdHBhdXNlQ2hhaW5lZFRpbWVvdXRzKCk7XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHtudW1iZXJ9IHRpbWVcblx0ICogQHJldHVybnMge3ZvaWR9XG5cdCAqL1xuXHRmdW5jdGlvbiB1cGRhdGVQYXVzZWRUaW1lb3V0cyh0aW1lKSB7XG5cdFx0Zm9yIChsZXQgaSBpbiB0aW1lb3V0cykge1xuXHRcdFx0Y29uc3QgdCA9IHRpbWVvdXRzW2ldO1xuXHRcdFx0dC5zdGFydFRpbWUgPSB0aW1lO1xuXHRcdH1cblx0fVx0XG5cblx0LyoqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lXG5cdCAqIEByZXR1cm5zIHt2b2lkfVxuXHQgKi9cblx0ZnVuY3Rpb24gdXBkYXRlUGF1c2VkQ2hhaW5lZFRpbWVvdXRzKHRpbWUpIHtcblx0XHRmb3IgKGxldCBpIGluIGNoYWluZWRUaW1lb3V0cykge1xuXHRcdFx0Y29uc3QgdGltZXJzID0gY2hhaW5lZFRpbWVvdXRzW2ldO1xuXG5cdFx0XHRPYmplY3QudmFsdWVzKHRpbWVycykuZm9yRWFjaCh0ID0+IHtcblx0XHRcdFx0aWYgKHQuZW5kZWQpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0dC5zdGFydFRpbWUgPSB0aW1lO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gcGF1c2VUaW1lb3V0cygpIHtcblx0XHRmb3IgKGxldCBpIGluIHRpbWVvdXRzKSB7XG5cdFx0XHRjb25zdCB0ID0gdGltZW91dHNbaV07XG5cdFx0XHRjb25zdCBlbGFwc2VkID0gRGF0ZS5ub3coKSAtIHQuc3RhcnRUaW1lO1xuXHRcdFx0bGV0IGR0ID0gdC50aW1lO1xuXHRcdFx0ZHQgLT0gZWxhcHNlZDtcblx0XHRcdHQudGltZSA9IGR0O1xuXHRcdH1cblxuXHRcdC8vIGNvbnNvbGUubG9nKCdwYXVzZTogdGltZW91dHMnLCBKU09OLnN0cmluZ2lmeSh0aW1lb3V0cykpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcGF1c2VDaGFpbmVkVGltZW91dHMoKSB7XG5cdFx0Zm9yIChsZXQgaSBpbiBjaGFpbmVkVGltZW91dHMpIHtcblx0XHRcdGNvbnN0IHRpbWVycyA9IGNoYWluZWRUaW1lb3V0c1tpXTtcblxuXHRcdFx0T2JqZWN0LnZhbHVlcyh0aW1lcnMpLmZvckVhY2godCA9PiB7XG5cdFx0XHRcdGlmICh0LmVuZGVkKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IGVsYXBzZWQgPSBEYXRlLm5vdygpIC0gdC5zdGFydFRpbWU7XG5cdFx0XHRcdGxldCBkdCA9IHQudGltZTtcblx0XHRcdFx0ZHQgLT0gZWxhcHNlZDtcblx0XHRcdFx0dC50aW1lID0gZHQ7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvLyBjb25zb2xlLmxvZygncGF1c2U6IGNoYWluZWRUaW1lb3V0cycsIEpTT04uc3RyaW5naWZ5KGNoYWluZWRUaW1lb3V0cykpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEB0eXBlIHtGVGltZXJXYWl0fVxuXHQgKi9cblx0ZnVuY3Rpb24gd2FpdChvcHRpb25zKSB7XG5cdFx0dG90YWxUaW1lb3V0c1VJRCArPTE7XG5cblx0XHRpZiAodGltZW91dHNbdG90YWxUaW1lb3V0c1VJRF0pIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aW1lb3V0c1t0b3RhbFRpbWVvdXRzVUlEXSA9IHtcblx0XHRcdHN0YXJ0VGltZTogRGF0ZS5ub3coKSxcblx0XHRcdHRpbWU6IG9wdGlvbnMudGltZSxcblx0XHRcdG9uU3RhcnQ6IG9wdGlvbnMub25TdGFydCxcblx0XHRcdG9uQ29tcGxldGU6IG9wdGlvbnMub25Db21wbGV0ZVxuXHRcdH07XG5cblx0XHQvLyBjb25zb2xlLmxvZygnY3JlYXRlIHRpbWVyLT53YWl0OicsIEpTT04uc3RyaW5naWZ5KHRpbWVvdXRzKSk7XG5cdFx0cmV0dXJuIHRvdGFsVGltZW91dHNVSUQ7XG5cdH1cblxuXHQvKipcblx0ICogQHR5cGUge0ZUaW1lckNoYWlufVxuXHQgKi9cblx0ZnVuY3Rpb24gY2hhaW4odGltZXJzKSB7XG5cdFx0dG90YWxDVGltZW91dHNVSUQgKz0xO1xuXG5cdFx0aWYgKGNoYWluZWRUaW1lb3V0c1t0b3RhbENUaW1lb3V0c1VJRF0pIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjaGFpbmVkVGltZW91dHNbdG90YWxDVGltZW91dHNVSURdID0ge307XG5cblx0XHR0aW1lcnMuZm9yRWFjaCgocHJvcHMsIGkpID0+IHtcblx0XHRcdGNvbnN0IHRpbWUgPSB0aW1lcnNcblx0XHRcdFx0LmZpbHRlcigoXywgX2kpID0+IF9pIDw9IGkpXG5cdFx0XHRcdC5yZWR1Y2UoKG4sIHt0aW1lfSkgPT4gbiArIHRpbWUsIDApO1xuXG5cdFx0XHRjaGFpbmVkVGltZW91dHNbdG90YWxDVGltZW91dHNVSURdW2ldID0ge1xuXHRcdFx0XHRzdGFydFRpbWU6IERhdGUubm93KCksXG5cdFx0XHRcdHRpbWUsXG5cdFx0XHRcdG9uU3RhcnQ6IHByb3BzLm9uU3RhcnQsXG5cdFx0XHRcdG9uQ29tcGxldGU6IHByb3BzLm9uQ29tcGxldGVcblx0XHRcdH07XG5cdFx0fSk7XG5cblx0XHQvLyBjb25zb2xlLmxvZygnY3JlYXRlIHRpbWVyLT5jaGFpbjonLCBKU09OLnN0cmluZ2lmeShjaGFpbmVkVGltZW91dHMpKTtcblx0XHRyZXR1cm4gdG90YWxDVGltZW91dHNVSUQ7XG5cdH1cblxuXHQvKipcblx0ICogQHR5cGUge0ZLaWxsVGltZX1cblx0ICovXG5cdGZ1bmN0aW9uIGtpbGxXYWl0KGlkKSB7XG5cdFx0aWYgKHRpbWVvdXRzW2lkXSkge1xuXHRcdFx0ZGVsZXRlIHRpbWVvdXRzW2lkXTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQHR5cGUge0ZLaWxsVGltZX1cblx0ICovXG5cdGZ1bmN0aW9uIGtpbGxDaGFpbihpZCkge1xuXHRcdGlmIChjaGFpbmVkVGltZW91dHNbaWRdKSB7XG5cdFx0XHRyZW1vdmVDaGFpbmVkVGltZW91dHMoaWQpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge251bWJlcn0ga2V5XG5cdCAqL1xuXHRmdW5jdGlvbiByZW1vdmVDaGFpbmVkVGltZW91dHMoa2V5KSB7XG5cdFx0Y29uc3QgdGltZXJzID0gY2hhaW5lZFRpbWVvdXRzW2tleV07IFxuXHRcdGZvciAobGV0IF9pZCBpbiB0aW1lcnMpIHtcblx0XHRcdGRlbGV0ZSB0aW1lcnNbX2lkXTtcblx0XHR9XG5cdFx0ZGVsZXRlIGNoYWluZWRUaW1lb3V0c1trZXldO1xuXHR9XG5cblx0ZnVuY3Rpb24ga2lsbCgpIHtcblx0XHRmb3IgKGxldCB0IGluIHRpbWVvdXRzKSB7XG5cdFx0XHRkZWxldGUgdGltZW91dHNbdF07XG5cdFx0fSBcblxuXHRcdGZvciAobGV0IHQgaW4gY2hhaW5lZFRpbWVvdXRzKSB7XG5cdFx0XHRyZW1vdmVDaGFpbmVkVGltZW91dHMoTnVtYmVyKHQpKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdHdhaXQsXG5cdFx0Y2hhaW4sXG5cdFx0a2lsbCxcblx0XHRraWxsV2FpdCxcblx0XHRraWxsQ2hhaW4sXG5cdFx0dXBkYXRlLFxuXHRcdHBhdXNlXG5cdH07XG59XG4iLCAiLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gbWluXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4XG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tSW50KG1pbiwgbWF4KSB7XG5cdHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xufVxuXG4vKipcbiAqIENsYW1wIGEgbnVtYmVyIGJldHdlZW4gdHdvIHZhbHVlcywgcHJldmVudGluZyBpdCBmcm9tIGdvaW5nIGJlbG93IG9yIGFib3ZlIHRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIHZhbHVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW4gLSBNaW4gdmFsdWUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IC0gTWF4IHZhbHVlLlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gVmFsdWUgdG8gY2xhbXAuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWx1ZSBjbGFtcGVkIGJldHdlZW4gbWluIGFuZCBtYXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGFtcChtaW4sIG1heCwgdmFsdWUpIHtcblx0cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KG1pbiwgdmFsdWUpLCBtYXgpO1xufVxuXG4vKipcbiAqIENvbnZlcnQgcmFkaWFucyB0byBkZWdyZWVzLlxuICogQGZ1bmN0aW9uIHJhZFRvRGVnXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkIC0gUmFkaWFucyB0byBjb252ZXJ0LlxuICogQHJldHVybnMge251bWJlcn0gVGhlIHZhbHVlIGluIGRlZ3JlZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByYWRUb0RlZyhyYWQpIHtcblx0cmV0dXJuIChyYWQgKiAxODApIC8gTWF0aC5QSTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGRlZ3JlZXMgdG8gcmFkaWFucy5cbiAqIEBmdW5jdGlvbiBkZWdUb1JhZFxuICogQHBhcmFtIHtudW1iZXJ9IGRlZyAtIERlZ3JlZXMgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSB2YWx1ZSBpbiByYWRpYW5zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVnVG9SYWQoZGVnKSB7XG5cdHJldHVybiAoZGVnICogTWF0aC5QSSkgLyAxODA7XG59XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtUW119IGFycmF5XG4gKiBAcmV0dXJucyB7VH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFycmF5UmFuZG9tVmFsdWUoYXJyYXkpIHtcblx0cmV0dXJuIGFycmF5WyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhcnJheS5sZW5ndGgpIF07XG59XG4iLCAiZXhwb3J0IGNvbnN0IFBMQVlFUl9FVkVOVFMgPSB7XG5cdEVOVFJZX0xBTkRFRDogJ1BMQVlFUl9FVkVOVFMuRU5UUllfTEFOREVEJyxcbn07XG4iLCAiLyoqXG4gKiBAdHlwZSB7RkRlYnVnfVxuICovXG5leHBvcnQgZnVuY3Rpb24gRGVidWcoKSB7XG5cdGNvbnN0IGRhdGEgPSB7fTtcblxuXHQvKipcblx0ICogQHR5cGUge0ZEZWJ1Z0FkZH1cblx0ICovXG5cdGZ1bmN0aW9uIGFkZChuYW1lLCB2YWx1ZSkge1xuXHRcdGRhdGFbbmFtZV0gPSB2YWx1ZTtcblx0fVxuXG5cdHdpbmRvd1snX2RlYnVnJ10gPSBkYXRhO1xuXG5cdHJldHVybiB7XG5cdFx0YWRkXG5cdH07XG59XG4iLCAiaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICcuL2luZGV4LmpzJ1xuXG5leHBvcnQgeyBFdmVudEVtaXR0ZXIgfVxuZXhwb3J0IGRlZmF1bHQgRXZlbnRFbWl0dGVyXG4iLCAiaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICdldmVudGVtaXR0ZXIzJztcblxuZXhwb3J0IGNvbnN0IEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbi8qKlxuICogQHR5cGVkZWYge29iamVjdH0gVEdhbWVcbiAqIEBwcm9wZXJ0eSB7VERlYnVnfSBbZGVidWddXG4gKiBAcHJvcGVydHkge1RLZXliYW9yZH0gW2tleV1cbiAqIEBwcm9wZXJ0eSB7VFRpbWVyfSBbdGltZXJdXG4gKiBAcHJvcGVydHkge0V2ZW50RW1pdHRlcn0gW2VtaXR0ZXJdXG4gKiBAcHJvcGVydHkge1RDYW52YXNMYXllcnN9IFtsYXllcnNdXG4gKiBAcHJvcGVydHkge1RUaWNrZXJ9IFt0aWNrZXJdXG4gKiBAcHJvcGVydHkge1RTb3VuZH0gW3NvdW5kXVxuICogQHByb3BlcnR5IHtUUm9vdFByb3BzfSBbcm9vdF1cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtvYmplY3R9IFRSb290UHJvcHNcbiAqIEBwcm9wZXJ0eSB7KG92ZXI6IGJvb2xlYW4pID0+IHZvaWR9IHNldEdhbWVPdmVyXG4gKiBAcHJvcGVydHkgeyh2YWx1ZTogbnVtYmVyKSA9PiB2b2lkfSBzZXRIZWFsdGhcbiAqIEBwcm9wZXJ0eSB7KHZhbHVlOiBudW1iZXIsIHJlcGxhY2U/OiBib29sZWFuKSA9PiB2b2lkfSBzZXRBcnJvd3NcbiAqIEBwcm9wZXJ0eSB7KHZhbHVlOiBudW1iZXIsIHJlcGxhY2U/OiBib29sZWFuKSA9PiB2b2lkfSBzZXRTY29yZVxuICogQHByb3BlcnR5IHsoKSA9PiBib29sZWFufSBnYW1lU3RhcnRlZFxuICogQHByb3BlcnR5IHsoKSA9PiBib29sZWFufSBnYW1lT3ZlclxuICogQHByb3BlcnR5IHsoKSA9PiBudW1iZXJ9IHNjb3JlXG4gKiBAcHJvcGVydHkgeygpID0+IG51bWJlcn0gYXJyb3dzXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHNldEdhbWVPdmVyXG4gKiBAcHJvcGVydHkge1RSZWN0W119IHdhbGxzXG4gKiBAcHJvcGVydHkge1RSZWN0W119IHBsYXRmb3Jtc1xuICogQHByb3BlcnR5IHtUUGxheWVyfSBbcGxheWVyXVxuICogQHByb3BlcnR5IHtURW5lbXlbXX0gW2VuZW1pZXNdXG4gKiBAcHJvcGVydHkge1REaXNwbGF5T2JqZWN0fSB3b3JsZFxuICogQHByb3BlcnR5IHtib29sZWFufSBwYXVzZWRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB3YXZlXG4gKiBAcHJvcGVydHkge1RHcm91cH0gWyBwbGF5ZXJHcm91cCBdXG4gKiBAcHJvcGVydHkge1RHcm91cH0gWyBlbmVtaWVzR3JvdXAgXVxuICovXG5cbiIsICJpbXBvcnQgeyBEZWJ1ZyB9IGZyb20gJ0BwYWNrYWdlcy9kZWJ1Zyc7XG5cbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICcuL3R5cGVzL2dhbWUudHlwZXMnO1xuXG4vKipcbiAqIEB0eXBlIHtpbXBvcnQoJy4vdHlwZXMvZ2FtZS50eXBlcycpLlRHYW1lfVxuICovXG5leHBvcnQgY29uc3QgR2FtZSA9ICgoKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0ZGVidWc6IERlYnVnKCksXG5cdFx0ZW1pdHRlcjogbmV3IEVtaXR0ZXIoKVxuXHR9O1xufSkoKTtcbiIsICIvKipcbiAqIGF2b2lkIHVzaW5nIHRoaXMgZnVuY3Rpb24gb24gc3BlZWQgY29sbGlzaW9uIC1saWtlIHN1cGVyIGZhc3QgbW92aW5nIG9iamVjdHNcbiAqIEB0eXBlIHtGSGl0VGVzdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhpdFRlc3QodGFyZ2V0LCBzb3VyY2UpIHtcblx0Y29uc3QgcjEgPSB0YXJnZXQ7XG5cdGNvbnN0IHIyID0gc291cmNlO1xuXHRjb25zdCBkeCA9IHIxLnggKyByMS5oYWxmV2lkdGgoKSAtIChyMi54ICsgcjIuaGFsZldpZHRoKCkpO1xuXHRjb25zdCBkeSA9IHIxLnkgKyByMS5oYWxmSGVpZ2h0KCkgLSAocjIueSArIHIyLmhhbGZIZWlnaHQoKSk7XG5cdGNvbnN0IGR3aWR0aCA9IChyMS53aWR0aCArIHIyLndpZHRoKSAvIDI7XG5cdGNvbnN0IGRoZWlnaHQgPSAocjEuaGVpZ2h0ICsgcjIuaGVpZ2h0KSAvIDI7XG5cdGNvbnN0IGNyb3NzV2lkdGggPSBkd2lkdGggKiBkeTtcblx0Y29uc3QgY3Jvc3NIZWlnaHQgPSBkaGVpZ2h0ICogZHg7XG5cdC8qKlxuXHQgKiBAdHlwZSB7VENvbGxpc2lvblJlc3VsdH1cblx0Ki9cblx0Y29uc3QgY29sbGlzaW9uID0ge1xuXHRcdGhpdDogZmFsc2UsXG5cdFx0c2lkZTogJ25vbmUnLFxuXHR9O1xuXG5cdGlmIChNYXRoLmFicyhkeCkgPD0gZHdpZHRoICYmIE1hdGguYWJzKGR5KSA8PSBkaGVpZ2h0KSB7XG5cdFx0aWYgKGNyb3NzV2lkdGggPiBjcm9zc0hlaWdodCkge1xuXHRcdFx0Y29sbGlzaW9uLnNpZGUgPSBjcm9zc1dpZHRoID4gLWNyb3NzSGVpZ2h0ID8gJ2JvdHRvbScgOiAnbGVmdCc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbGxpc2lvbi5zaWRlID0gY3Jvc3NXaWR0aCA+IC1jcm9zc0hlaWdodCA/ICdyaWdodCcgOiAndG9wJztcblx0XHR9XG5cdH1cblxuXHRjb2xsaXNpb24uaGl0ID0gQm9vbGVhbihcblx0XHRyMS54IDwgcjIueCArIHIyLndpZHRoICYmXG4gICAgICAgIHIxLnggKyByMS53aWR0aCA+IHIyLnggJiZcbiAgICAgICAgcjEueSA8IHIyLnkgKyByMi5oZWlnaHQgJiZcbiAgICAgICAgcjEueSArIHIxLmhlaWdodCA+IHIyLnlcblx0KTtcblxuXHRyZXR1cm4gY29sbGlzaW9uO1xufVxuIiwgImltcG9ydCB7IEdhbWUgfSBmcm9tICdAZ2FtZS9HYW1lJztcbmltcG9ydCB7IGhpdFRlc3QgfSBmcm9tICdAcGFja2FnZXMvY29sbGlzaW9ucyc7XG5pbXBvcnQgeyBBbmltYXRlZFNwcml0ZSB9IGZyb20gJ0BwYWNrYWdlcy9kaXNwbGF5T2JqZWN0cyc7XG5pbXBvcnQgeyBnZXRBbmltRnJhbWVzIH0gZnJvbSAnQHBhY2thZ2VzL3V0aWxzL21pc2MnO1xuXG4vKipcbiAqIEB0eXBlIHtGQXJyb3dzQnVuZGxlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gQXJyb3dzQnVuZGxlKHg9MCwgeT0wKSB7XG5cdGNvbnN0IHdvcmxkID0gR2FtZS5yb290LnBsYXllckdyb3VwO1xuXHRjb25zdCBzcmMgPSBnZXRBbmltRnJhbWVzKCdhcnJvd3NfYnVuZGxlJyk7XG5cdGNvbnN0IG8gPSBBbmltYXRlZFNwcml0ZShzcmMpO1xuXHRvLnggPSB4O1xuXHRvLnkgPSB5O1xuXHRvLmZwcyA9IDEyO1xuXHRvLmxvb3AgPSB0cnVlO1xuXHRvLnBsYXkoKTtcblx0d29ybGQuYWRkQ2hpbGQobyk7XG5cblx0bGV0IGRlZmF1bHRHcmF2aXR5ID0gMC40O1xuXHRsZXQgZ3Jhdml0eSA9IGRlZmF1bHRHcmF2aXR5O1xuXHRsZXQgdnkgPSAwO1xuXHRsZXQgYXkgPSAwO1xuXHRsZXQgYXggPSAwO1xuXHRsZXQgdnggPSAwO1xuXHRsZXQgZ3JvdW5kZWQgPSBmYWxzZTtcblx0bGV0IGZhbGxpbmcgPSBmYWxzZTtcblx0bGV0IGp1bXBpbmcgPSBmYWxzZTtcblx0bGV0IGp1bXBGb3JjZSA9IDY7XG5cblx0Y29uc3QgdXBkYXRlSWQgPSBHYW1lLnRpY2tlci5hZGQoJ3VwZGF0ZScsIHVwZGF0ZS5iaW5kKHRoaXMpKTtcblxuXHRjb25zdCBfZGVzdHJveSA9IG8uZGVzdHJveTtcblx0anVtcCgpO1xuXG5cdG8uZGVzdHJveSA9ICgpID0+IHtcblx0XHRfZGVzdHJveSgpO1xuXHRcdEdhbWUudGlja2VyLnJlbW92ZSh1cGRhdGVJZCwgJ3VwZGF0ZScpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIHVwZGF0ZSgpIHtcblx0XHR2eCArPSBheDtcblx0XHRvLnggKz0gdng7XG5cblx0XHR2eSArPSBheTtcblx0XHR2eSArPSBncmF2aXR5O1xuXHRcdG8ueSArPSB2eTtcblxuXHRcdGlmICh2eSA+IDApIHtcblx0XHRcdGZhbGxpbmcgPSB0cnVlO1xuXHRcdH1cblx0XHR2c0dyb3VuZCgpO1xuXHRcdHZzUGxheWVyKCk7XG5cdH1cblxuXHRmdW5jdGlvbiBqdW1wKCkge1xuXHRcdGNvbnN0IHVwRm9yY2UgPSBqdW1wRm9yY2U7XG5cdFx0dnkgPSAtdXBGb3JjZTtcblx0XHRncm91bmRlZCA9IGZhbHNlO1xuXHRcdGp1bXBpbmcgPSB0cnVlO1xuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlT25Hcm91bmQoKSB7XG5cdFx0Z3Jhdml0eSA9IGRlZmF1bHRHcmF2aXR5O1xuXHRcdGdyb3VuZGVkID0gdHJ1ZTtcblx0XHRmYWxsaW5nID0gZmFsc2U7XG5cdFx0anVtcGluZyA9IGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gdnNHcm91bmQoKSB7XG5cdFx0Y29uc3QgY29sbGlkZXJzID0gR2FtZS5yb290LnBsYXRmb3JtcztcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgY29sbGlkZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBwbGF0Zm9ybSA9IGNvbGxpZGVyc1tpXTtcblx0XHRcdGNvbnN0IHRlc3QgPSBoaXRUZXN0KHBsYXRmb3JtLCBvKTtcblxuXHRcdFx0aWYgKHRlc3QuaGl0KSB7XG5cdFx0XHRcdGlmICh0ZXN0LnNpZGUgPT09ICdib3R0b20nICYmIHZ5ID49IDApIHtcblx0XHRcdFx0XHR1cGRhdGVPbkdyb3VuZCgpO1xuXHRcdFx0XHRcdG8ueSA9IHBsYXRmb3JtLnkgLSBvLmhlaWdodDtcblx0XHRcdFx0XHR2eSA9IC1ncmF2aXR5O1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRlc3Quc2lkZSA9PT0gJ3RvcCcgJiYgdnkgPD0gMCkge1xuXHRcdFx0XHRcdHZ5ID0gMDtcblx0XHRcdFx0fSBlbHNlIGlmICh0ZXN0LnNpZGUgPT09ICdyaWdodCcgJiYgdnggPj0gMCkge1xuXHRcdFx0XHRcdG8ueCA9IHBsYXRmb3JtLnggLSBvLndpZHRoO1xuXHRcdFx0XHRcdHZ4ID0gMDtcblx0XHRcdFx0fSBlbHNlIGlmICh0ZXN0LnNpZGUgPT09ICdsZWZ0JyAmJiB2eCA8PSAwKSB7XG5cdFx0XHRcdFx0by54ID0gcGxhdGZvcm0ueCArIHBsYXRmb3JtLndpZHRoO1xuXHRcdFx0XHRcdHZ4ID0gMDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodGVzdC5zaWRlICE9PSAnYm90dG9tJyAmJiB2eSA+IDApIHtcblx0XHRcdFx0XHRncm91bmRlZCA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdnNQbGF5ZXIoKSB7XG5cdFx0Y29uc3QgcGxheWVyID0gR2FtZS5yb290LnBsYXllcjtcblx0XHRjb25zdCB0ZXN0ID0gaGl0VGVzdChwbGF5ZXIuYm9keSwgbyk7XG5cdFx0aWYgKHRlc3QuaGl0ICYmIHBsYXllci5oZWFsdGgpIHtcblx0XHRcdG8uZGVzdHJveSgpO1xuXHRcdFx0R2FtZS5yb290LnNldEFycm93cygxMCk7XG5cdFx0fVxuXHR9XG59XG4iLCAiaW1wb3J0IHsgR2FtZSB9IGZyb20gJ0BnYW1lL0dhbWUnO1xuaW1wb3J0IHsgaGl0VGVzdCB9IGZyb20gJ0BwYWNrYWdlcy9jb2xsaXNpb25zJztcbmltcG9ydCB7IE1vdmllQ2xpcCwgUmVjdGFuZ2xlIH0gZnJvbSAnQHBhY2thZ2VzL2Rpc3BsYXlPYmplY3RzJztcblxuLyoqXG4gKiBAdHlwZSB7RkFjdG9yfVxuICovXG5leHBvcnQgZnVuY3Rpb24gQWN0b3IocHJvcHMpIHtcblx0Y29uc3Qgd29ybGQgPSBwcm9wcy53b3JsZCB8fCBHYW1lLnJvb3Qud29ybGQ7XG5cblx0Y29uc3Qgc2tpbiA9IE1vdmllQ2xpcChwcm9wcy5hbmltYXRpb25zKTtcblx0Y29uc3QgYm9keSA9IFJlY3RhbmdsZShcblx0XHRwcm9wcy5ib2R5LndpZHRoIHx8IDUsXG5cdFx0cHJvcHMuYm9keS5oZWlnaHQgfHwgMTYsXG5cdFx0cHJvcHMuYm9keS5jb2xvciB8fCAncmVkJyxcblx0XHQnbm9uZScsXG5cdFx0MCxcblx0XHQwLFxuXHRcdDBcblx0KTtcblxuXHRza2luLmFkZFRvKHdvcmxkKTtcblx0d29ybGQuYWRkQ2hpbGQoYm9keSk7XG5cblx0LyoqXG5cdCAqIEB0eXBlIHtQYXJ0aWFsPFRBY3Rvcj59XG5cdCAqL1xuXHRjb25zdCBvID0ge1xuXHRcdGdyYXZpdHk6IHByb3BzLmdyYXZpdHkgfHwgMC40LFxuXHRcdGhlYWx0aDogMTAsXG5cdFx0ZGFtYWdlOiAxLFxuXHRcdHNwZWVkWDogMixcblx0XHRzcGVlZFk6IDEsXG5cdFx0dnk6IDAsXG5cdFx0YXg6IDAsXG5cdFx0YXk6IDAsXG5cdFx0anVtcEZvcmNlOiA2XG5cdH07XG5cblx0by5za2luID0gc2tpbjtcblx0by5ib2R5ID0gYm9keTtcblx0by52eCA9IG8uc3BlZWRYO1xuXHRvLnVwZGF0ZSA9IHVwZGF0ZTtcblx0by51cGRhdGVTa2luQm9keSA9IHVwZGF0ZVNraW5Ub0JvZHk7XG5cdG8udXBkYXRlR3Jhdml0eSA9IHVwZGF0ZUdyYXZpdHk7XG5cdG8udXBkYXRlVmVsb2NpdHkgPSB1cGRhdGVWZWxvY2l0eTtcblx0by51cGRhdGVPbkdyb3VuZCA9IHVwZGF0ZU9uR3JvdW5kO1xuXHRvLnZzUGxhdGZvcm1zID0gdnNQbGF0Zm9ybXM7XG5cdG8uZmxpcCA9IGZsaXA7XG5cdG8uaXNGbGlwSCA9IGlzRmxpcEg7XG5cdG8uZmxpcEhWYWx1ZSA9IGZsaXBIVmFsdWU7XG5cdG8uanVtcCA9IGp1bXA7XG5cdG8ucmVjZWl2ZURhbWFnZSA9IHJlY2VpdmVEYW1hZ2U7XG5cdG8ua2lsbCA9IGtpbGw7XG5cdG8uZGVzdHJveSA9IGRlc3Ryb3k7XG5cdG8uc2hvd0F0dGFja0hpdEFyZWEgPSBzaG93QXR0YWNrSGl0QXJlYTtcblx0by5yZW1vdmVBdHRhY2tIaXRBcmVhID0gcmVtb3ZlQXR0YWNrSGl0QXJlYTtcblxuXHRvLmF0dGFja0hpdEFyZWEgPSBwcm9wcy5hdHRhY2tIaXRBcmVhIHx8IFJlY3RhbmdsZSgxNiwgMTYsICdyZWQnLCAnJywgMCwgMCwgMCk7XG5cblx0ZnVuY3Rpb24gdXBkYXRlKCkge1xuXHRcdG8udXBkYXRlU2tpbkJvZHkoKTtcblx0XHRvLnVwZGF0ZUdyYXZpdHkoKTtcblx0XHRvLnVwZGF0ZVZlbG9jaXR5KCk7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVHcmF2aXR5KCkge1xuXHRcdG8udnkgKz0gby5heTtcblx0XHRvLnZ5ICs9IG8uZ3Jhdml0eTtcblx0XHRib2R5LnkgKz0gby52eTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVZlbG9jaXR5KCkge1xuXHRcdG8udnggKz0gby5heDtcblx0XHRib2R5LnggKz0gby52eDtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZU9uR3JvdW5kKCkge1xuXHRcdG8uZ3Jhdml0eSA9IHByb3BzLmdyYXZpdHk7XG5cdFx0by5ncm91bmRlZCA9IHRydWU7XG5cdFx0by5mYWxsaW5nID0gZmFsc2U7XG5cdFx0by5qdW1waW5nID0gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVTa2luVG9Cb2R5KCkge1xuXHRcdGlmIChza2luKSB7XG5cdFx0XHRza2luLnggPSBib2R5LnggLSBza2luLmhhbGZXaWR0aCgpICsgYm9keS5oYWxmV2lkdGgoKTtcblx0XHRcdHNraW4ueSA9IGJvZHkueSAtIGJvZHkuaGVpZ2h0O1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBAdHlwZSB7RkFjdG9ySnVtcH1cblx0ICovXG5cdGZ1bmN0aW9uIGp1bXAoZm9yY2UpIHtcblx0XHRjb25zdCB1cEZvcmNlID0gZm9yY2UgfHwgby5qdW1wRm9yY2U7XG5cdFx0by52eSA9IC11cEZvcmNlO1xuXHRcdG8uZ3JvdW5kZWQgPSBmYWxzZTtcblx0XHRvLmp1bXBpbmcgPSB0cnVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEB0eXBlIHtGUmVjZWl2ZURhbWFnZX1cblx0ICovXG5cdGZ1bmN0aW9uIHJlY2VpdmVEYW1hZ2UoYW1vdW50LCBmcm9tKSB7XG5cdFx0YW1vdW50ID0gYW1vdW50IHx8IG8uZGFtYWdlO1xuXG5cdFx0aWYgKG8uZGVhZCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmIChvLm9uUmVjZWl2ZURhbWFnZSkgby5vblJlY2VpdmVEYW1hZ2UoYW1vdW50LCBmcm9tKTtcblxuXHRcdG8uaGVhbHRoIC09IGFtb3VudDtcblx0XHRpZiAoby5oZWFsdGggPD0gMCkge1xuXHRcdFx0by5oZWFsdGggPSAwO1xuXHRcdFx0by5raWxsKCk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24ga2lsbCgpIHtcblx0XHRvLmRlYWQgPSB0cnVlO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRvLnNraW4uZGVzdHJveSgpO1xuXHRcdG8uYm9keS5kZXN0cm95KCk7XG5cdFx0by5hdHRhY2tIaXRBcmVhLmRlc3Ryb3koKTtcblx0XHRvLmhlYWx0aCA9IDA7XG5cdFx0by5kZXN0cm95ZWQgPSB0cnVlO1xuXHRcdGtpbGwoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAdHlwZSB7RlZzUGxhdGZvcm1zfVxuXHQgKi9cblx0ZnVuY3Rpb24gdnNQbGF0Zm9ybXMoY29sbGlkZXJzKSB7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjb2xsaWRlcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IHBsYXRmb3JtID0gY29sbGlkZXJzW2ldO1xuXHRcdFx0Y29uc3QgdGVzdCA9IGhpdFRlc3QocGxhdGZvcm0sIGJvZHkpO1xuXG5cdFx0XHRpZiAodGVzdC5oaXQpIHtcblx0XHRcdFx0aWYgKHRlc3Quc2lkZSA9PT0gJ2JvdHRvbScgJiYgdGhpcy52eSA+PSAwKSB7XG5cdFx0XHRcdFx0by51cGRhdGVPbkdyb3VuZCgpO1xuXHRcdFx0XHRcdGJvZHkueSA9IHBsYXRmb3JtLnkgLSBib2R5LmhlaWdodDtcblx0XHRcdFx0XHRvLnZ5ID0gLW8uZ3Jhdml0eTtcblx0XHRcdFx0fSBlbHNlIGlmICh0ZXN0LnNpZGUgPT09ICd0b3AnICYmIG8udnkgPD0gMCkge1xuXHRcdFx0XHRcdG8udnkgPSAwO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRlc3Quc2lkZSA9PT0gJ3JpZ2h0JyAmJiBvLnZ4ID49IDApIHtcblx0XHRcdFx0XHRvLmJvZHkueCA9IHBsYXRmb3JtLnggLSBvLmJvZHkud2lkdGg7XG5cdFx0XHRcdFx0by52eCA9IDA7XG5cdFx0XHRcdH0gZWxzZSBpZiAodGVzdC5zaWRlID09PSAnbGVmdCcgJiYgby52eCA8PSAwKSB7XG5cdFx0XHRcdFx0by5ib2R5LnggPSBwbGF0Zm9ybS54ICsgcGxhdGZvcm0ud2lkdGg7XG5cdFx0XHRcdFx0by52eCA9IDA7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHRlc3Quc2lkZSAhPT0gJ2JvdHRvbScgJiYgby52eSA+IDApIHtcblx0XHRcdFx0XHRvLmdyb3VuZGVkID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQHR5cGUge0ZTaG93QXR0YWNrSGl0QXJlYX1cblx0ICovXG5cdGZ1bmN0aW9uIHNob3dBdHRhY2tIaXRBcmVhKHApIHtcblx0XHRpZiAoby5hdHRhY2tIaXRBcmVhLnBhcmVudCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdG8uYXR0YWNrSGl0QXJlYS53aWR0aCA9IHAudyB8fCBvLmF0dGFja0hpdEFyZWEud2lkdGg7IFxuXHRcdG8uYXR0YWNrSGl0QXJlYS5oZWlnaHQgPSBwLmggfHwgby5hdHRhY2tIaXRBcmVhLmhlaWdodDsgXG5cblx0XHR3b3JsZC5hZGRDaGlsZChvLmF0dGFja0hpdEFyZWEpO1xuXHRcdG8uYXR0YWNrSGl0QXJlYS54ID0gIW8uaXNGbGlwSCgpID8gcC54IDogcC5mbGlwWDtcblxuXHRcdG8uYXR0YWNrSGl0QXJlYS55ID0gcC55O1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlQXR0YWNrSGl0QXJlYSgpIHtcblx0XHRpZiAoby5hdHRhY2tIaXRBcmVhLnBhcmVudCkge1xuXHRcdFx0d29ybGQucmVtb3ZlQ2hpbGQoby5hdHRhY2tIaXRBcmVhKTtcblx0XHRcdG8uYXR0YWNrSGl0QXJlYS53aWR0aCA9IDE2O1xuXHRcdFx0by5hdHRhY2tIaXRBcmVhLndpZHRoID0gMTY7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNGbGlwSCgpIHtcblx0XHRyZXR1cm4gby5mbGlwSCA9PT0gJ2xlZnQnOyBcblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge1RGbGlwSFNpZGV9IHNpZGVcblx0ICogQHJldHVybnMge3ZvaWR9XG5cdCAqL1xuXHRmdW5jdGlvbiBmbGlwKHNpZGUpIHtcblx0XHRvLmZsaXBIID0gc2lkZTtcblxuXHRcdGlmIChzaWRlID09PSAncmlnaHQnKSB7XG5cdFx0XHRpZiAoc2tpbi5zY2FsZVggPCAwKSB7XG5cdFx0XHRcdHNraW4uc2NhbGVYICo9IC0xO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoc2tpbi5zY2FsZVggPiAwKSB7XG5cdFx0XHRcdHNraW4uc2NhbGVYICo9IC0xO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfVxuXHQgKi9cblx0ZnVuY3Rpb24gZmxpcEhWYWx1ZSgpIHtcblx0XHRyZXR1cm4gby5mbGlwSCA9PT0gJ3JpZ2h0JyA/IDEgOiAtMTtcblx0fVxuXG5cdHJldHVybiAvKiogQHR5cGUge1RBY3Rvcn0gKi8obyk7XG59XG4iLCAiaW1wb3J0IHsgR2FtZSB9IGZyb20gJ0BnYW1lL0dhbWUnO1xuaW1wb3J0IHsgaGl0VGVzdCB9IGZyb20gJ0BwYWNrYWdlcy9jb2xsaXNpb25zJztcbmltcG9ydCB7IGdldEFycmF5UmFuZG9tVmFsdWUgfSBmcm9tICdAcGFja2FnZXMvdXRpbHMvbWF0aCc7XG5pbXBvcnQgeyBkaXN0YW5jZSwgZm9sbG93Q29uc3RhbnQsIGdldEFuaW1GcmFtZXMgfSBmcm9tICdAcGFja2FnZXMvdXRpbHMvbWlzYyc7XG5cbmltcG9ydCB7IEFycm93c0J1bmRsZSB9IGZyb20gJy4uL0Fycm93c0J1bmRsZSc7XG5pbXBvcnQgeyBBY3RvciB9IGZyb20gJy4vQWN0b3InO1xuXG5leHBvcnQgY29uc3QgRU5FTVlfQUNUSU9OUyA9IC8qKiBAdHlwZSB7VEVuZW15QWN0aW9uc1tdfSovKFsnY2hhc2UnLCAncnVuLWF3YXknLCAnc3RhbmQnLCAnYXR0YWNrJywgJ25vbmUnXSk7XG5cbi8qKlxuICogQHR5cGUge0ZFbmVteX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEVuZW15KG9wdGlvbnMpIHtcblx0Ly8gYWRkIHRvIG93biBncm91cFxuXHRjb25zdCB3b3JsZCA9IEdhbWUucm9vdC5lbmVtaWVzR3JvdXA7XG5cdGNvbnN0IHRpbWVyID0gR2FtZS50aW1lcjtcblx0Y29uc3QgZW5lbXlOYXR1cmUgPSBvcHRpb25zID8gb3B0aW9ucy5lbmVteU5hdHVyZSB8fCAnbm9uZScgOiAnbm9uZSc7XG5cdGNvbnN0IGVuZW15VHlwZSA9IG9wdGlvbnMgPyBvcHRpb25zLmVuZW15VHlwZSB8fCAnZTEnIDogJ2UxJztcblxuXHRjb25zdCBvID0gQWN0b3Ioe1xuXHRcdHdvcmxkLFxuXHRcdGdyYXZpdHk6IDAuNCxcblx0XHRib2R5OiB7XG5cdFx0XHR3aWR0aDogNSxcblx0XHRcdGhlaWdodDogMTYsXG5cdFx0XHRjb2xvcjogJ3JlZCdcblx0XHR9LFxuXHRcdGFuaW1hdGlvbnM6IHtcblx0XHRcdCdpZGxlJzoge1xuXHRcdFx0XHRmcmFtZXM6IGdldEFuaW1GcmFtZXMoYCR7ZW5lbXlUeXBlfS9pZGxlL2ApLFxuXHRcdFx0XHRmcHM6IDEyXG5cdFx0XHR9LFxuXHRcdFx0J3J1bic6IHtcblx0XHRcdFx0ZnJhbWVzOiBnZXRBbmltRnJhbWVzKGAke2VuZW15VHlwZX0vcnVuYCksXG5cdFx0XHRcdGZwczogMTJcblx0XHRcdH0sXG5cdFx0XHQnYXR0YWNrJzoge1xuXHRcdFx0XHRmcmFtZXM6IGdldEFuaW1GcmFtZXMoYCR7ZW5lbXlUeXBlfS9hdHRhY2tgKSxcblx0XHRcdFx0bG9vcDogZmFsc2UsXG5cdFx0XHRcdGZwczogMTJcblx0XHRcdH0sXG5cdFx0XHQnZGllRmFsbCc6IHtcblx0XHRcdFx0ZnJhbWVzOiBbXG5cdFx0XHRcdFx0YCR7ZW5lbXlUeXBlfS9kaWUvZGllMS5wbmdgXG5cdFx0XHRcdF0sXG5cdFx0XHRcdGxvb3A6IGZhbHNlXG5cdFx0XHR9LFxuXHRcdFx0J2RpZUxhbmQnOiB7XG5cdFx0XHRcdGZyYW1lczogW1xuXHRcdFx0XHRcdGAke2VuZW15VHlwZX0vZGllL2RpZTIucG5nYFxuXHRcdFx0XHRdLFxuXHRcdFx0XHRsb29wOiBmYWxzZVxuXHRcdFx0fSxcblx0XHRcdCdqdW1wJzoge1xuXHRcdFx0XHRmcmFtZXM6IFtcblx0XHRcdFx0XHRgJHtlbmVteVR5cGV9L3J1bi9ydW4xLnBuZ2Bcblx0XHRcdFx0XSxcblx0XHRcdFx0bG9vcDogZmFsc2Vcblx0XHRcdH0sXG5cdFx0XHQnZ290SGl0Jzoge1xuXHRcdFx0XHRmcmFtZXM6IGdldEFuaW1GcmFtZXMoYCR7ZW5lbXlUeXBlfS9nb3RfaGl0L2ApLFxuXHRcdFx0XHRmcHM6IDEyLFxuXHRcdFx0XHRsb29wOiBmYWxzZVxuXHRcdFx0fSxcblx0XHQvLyAndGVzdCc6IHtcblx0XHQvLyBcdGZyYW1lczogLyoqIEB0eXBlIHtzdHJpbmdbXX0gKi8oW2dldEFuaW1TaGVldCgnYXJyb3dfYXR0YWNrXzAwMDAnKV0pLFxuXHRcdC8vIFx0bG9vcDogdHJ1ZVxuXHRcdC8vIH0sXG5cdFx0fVxuXHR9KTtcblxuXHQvKipcblx0ICogQHR5cGUge1BhcnRpYWw8VEVuZW15T25seVByb3BzPn1cblx0ICovXG5cdGxldCBwcm9wcyA9IHtcblx0XHRuYW1lOiAnZW5lbXknLFxuXHRcdGFjdGlvbjogJ2NoYXNlJ1xuXHR9O1xuXG5cdGxldCBzZWxmID0gLyoqIEB0eXBlIHtURW5lbXl9ICovIChPYmplY3QuYXNzaWduKG8sIHByb3BzKSk7XG5cblx0c2VsZi5ib2R5Lm5hbWUgPSBgJHtwcm9wcy5uYW1lfS1ib2R5YDtcblx0c2VsZi5za2luLm5hbWUgPSBgJHtwcm9wcy5uYW1lfS1za2luYDtcblx0c2VsZi5ib2R5LnggPSAxMDtcblx0c2VsZi5ib2R5LnkgPSAwO1xuXHRzZWxmLmZsaXBIID0gJ3JpZ2h0JzsgXG5cdHNlbGYuYm9keS5hbHBoYSA9IDA7XG5cdHNlbGYuc2tpbi5hbHBoYSA9IDE7XG5cdHNlbGYuc2tpbi5wbGF5KCdpZGxlJyk7XG5cdHNlbGYuc3BlZWRYID0gMTtcblx0c2VsZi5zY29yZVBvaW50ID0gMTtcblx0c2VsZi5oZWFsdGggPSAzO1xuXG5cdHNlbGYuYXR0YWNrSGl0QXJlYS5hbHBoYSA9IDA7XG5cblx0Y29uc3QgX3VwZGF0ZSA9IHNlbGYudXBkYXRlO1xuXHRjb25zdCBfa2lsbCA9IHNlbGYua2lsbDtcblx0Y29uc3QgX3JlY2VpdmVEYW1hZ2UgPSBzZWxmLnJlY2VpdmVEYW1hZ2U7XG5cdGNvbnN0IF9kZXN0cm95ID0gc2VsZi5kZXN0cm95O1xuXG5cdC8qKlxuXHQgKiBAdHlwZSB7bnVtYmVyW119XG5cdCAqL1xuXHRjb25zdCB0aW1lcnMgPSBbXTtcblxuXHRzZWxmLnNraW4ub25BbmltVXBkYXRlID0gKGZyYW1lTnVtYmVyLCBuYW1lKSA9PiB7XG5cdFx0aWYgKG5hbWUgPT09ICdhdHRhY2snKSB7XG5cdFx0XHRpZiAoZW5lbXlUeXBlID09PSAnZTEnKSB7XG5cdFx0XHRcdHNob3dFZW5lbXkxQXR0YWNrSGl0QXJlYShmcmFtZU51bWJlcik7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZW5lbXlUeXBlID09PSAnZTInKSB7XG5cdFx0XHRcdHNob3dFZW5lbXkyQXR0YWNrSGl0QXJlYShmcmFtZU51bWJlcik7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZW5lbXlUeXBlID09PSAnZTMnKSB7XG5cdFx0XHRcdHNob3dFZW5lbXkzQXR0YWNrSGl0QXJlYShmcmFtZU51bWJlcik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdHNlbGYuc2tpbi5vbkFuaW1Db21wbGV0ZSA9IChuYW1lKSA9PiB7XG5cdFx0Y29uc3QgaXNBdHRhY2sgPSBuYW1lLmluY2x1ZGVzKCdhdHRhY2snKTtcblx0XHRjb25zdCBpc0dvdEhpdCA9IG5hbWUuaW5jbHVkZXMoJ2dvdEhpdCcpO1xuXG5cdFx0aWYgKGlzQXR0YWNrKSB7XG5cdFx0XHRzZWxmLmF0dGFja2luZyA9IGZhbHNlO1xuXHRcdFx0c2VsZi5yZW1vdmVBdHRhY2tIaXRBcmVhKCk7XG5cdFx0XHRyZXNldEFjdGlvbigpO1xuXHRcdFx0YXV0b0RldGVjdEFjdGlvbnMoJ3N0YW5kJyk7XG5cdFx0fVxuXG5cdFx0aWYgKGlzR290SGl0KSB7XG5cdFx0XHRzZWxmLmdvdEhpdCA9IGZhbHNlO1xuXHRcdFx0cmVzZXRBY3Rpb24oKTtcblx0XHRcdGF1dG9EZXRlY3RBY3Rpb25zKCdzdGFuZCcpO1xuXHRcdH1cblx0fTtcblxuXHRzZWxmLnVwZGF0ZSA9ICgpID0+IHtcblx0XHRfdXBkYXRlKCk7XG5cdFx0aWYgKCFzZWxmLmRlYWQpIHtcblx0XHRcdGlmIChpc0RldGVjdEFjdGlvbnMoKSkge1xuXHRcdFx0XHRhdXRvRGV0ZWN0QWN0aW9ucygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dXBkYXRlQWN0aW9ucygpO1xuXHRcdFx0fVxuXHRcdFx0dXBkYXRlTW92ZW1lbnQoKTtcblx0XHR9XG5cdFx0dnNXYWxscygpO1xuXHRcdHZzQXR0YWNrUGxheWVyKCk7XG5cdFx0c2VsZi52c1BsYXRmb3JtcyhHYW1lLnJvb3QucGxhdGZvcm1zKTtcblx0XHR1cGRhdGVPbkRpZSgpO1xuXHR9O1xuXG5cdHNlbGYua2lsbCA9ICgpID0+IHtcblx0XHRpZiAoIXNlbGYuZGVhZCkge1xuXHRcdFx0Y29uc3Qgc3Bhd25BcnJvd3MgPSBnZXRBcnJheVJhbmRvbVZhbHVlKFswLCAxLCAwLCAwLCAxLCAwXSk7XG5cdFx0XHRpZiAoc3Bhd25BcnJvd3MpIHtcblx0XHRcdFx0QXJyb3dzQnVuZGxlKHNlbGYuYm9keS54LCBzZWxmLmJvZHkueSk7XG5cdFx0XHR9XG5cdFx0XHRHYW1lLnJvb3Quc2V0U2NvcmUoc2VsZi5zY29yZVBvaW50KTtcblx0XHR9XG5cblx0XHRfa2lsbCgpO1xuXHRcdEdhbWUuc291bmQucGxheVNGWCgnZGllJyk7XG5cdFx0c2VsZi5za2luLnBsYXkoJ2RpZUZhbGwnKTtcblx0XHRzZWxmLmp1bXAoMyk7XG5cdFx0c2VsZi52eCA9IC1zZWxmLmZsaXBIVmFsdWUoKSAqIDE7XG5cdH07XG5cblx0c2VsZi5yZWNlaXZlRGFtYWdlID0gKGFtb3VudCwgZnJvbSkgPT4ge1xuXHRcdGlmIChzZWxmLmF0dGFja2luZykge1xuXHRcdFx0c2VsZi5kaXNhYmxlR290SGl0ID0gZmFsc2U7XG5cdFx0XHRzZWxmLmdvdEhpdCA9IGZhbHNlO1xuXHRcdFx0c2VsZi52eCA9IDA7XG5cdFx0XHRzZWxmLnJlbW92ZUF0dGFja0hpdEFyZWEoKTtcblx0XHRcdHJlc2V0QWN0aW9uKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmIChzZWxmLmdvdEhpdCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRfcmVjZWl2ZURhbWFnZShhbW91bnQsIGZyb20pO1xuXHR9O1xuXG5cdHNlbGYub25SZWNlaXZlRGFtYWdlID0gKCkgPT4ge1xuXHRcdGlmICghc2VsZi5nb3RIaXQgJiYgc2VsZi5za2luLmN1cnJlbnRBbmltTmFtZSAhPT0gJ2dvdEhpdCcpIHtcblx0XHRcdHNlbGYuZ290SGl0ID0gdHJ1ZTtcblx0XHRcdHNlbGYuc2tpbi5wbGF5KCdnb3RIaXQnKTtcblx0XHRcdHNlbGYudnggPSAwO1xuXG5cdFx0XHRpZiAoaXNCZWhpbmRQbGF5ZXIoKSkge1xuXHRcdFx0XHRpZiAoc2VsZi5pc0ZsaXBIKCkpIHtcblx0XHRcdFx0XHRzZWxmLmZsaXAoJ3JpZ2h0Jyk7XG5cdFx0XHRcdH0gXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoIXNlbGYuaXNGbGlwSCgpKSB7XG5cdFx0XHRcdFx0c2VsZi5mbGlwKCdsZWZ0Jyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gcmVwZWFsXG5cdFx0XHRzZWxmLmp1bXAoMyk7XG5cdFx0XHRzZWxmLnZ4ID0gLXNlbGYuZmxpcEhWYWx1ZSgpICogMC41O1xuXG5cdFx0XHRraWxsVGltZXJzKCk7XG5cblx0XHRcdC8vIGNvbnNvbGUubG9nKCdlbmVteS1oZWFsdGgnLCBvLmhlYWx0aCk7XG5cdFx0fVxuXHR9O1xuXG5cdHNlbGYudXBkYXRlU2tpbkJvZHkgPSAoKSA9PiB7XG5cdFx0Y29uc3Qgc2tpbiA9IHNlbGYuc2tpbjtcblx0XHRjb25zdCBib2R5ID0gc2VsZi5ib2R5O1xuXG5cdFx0aWYgKHNraW4pIHtcblx0XHRcdHNraW4ueCA9IGJvZHkueCAtIHNraW4uaGFsZldpZHRoKCkgKyBib2R5LmhhbGZXaWR0aCgpO1xuXHRcdFx0c2tpbi55ID0gYm9keS55IC0gc2tpbi5oZWlnaHQgKyBib2R5LmhlaWdodDtcblx0XHR9XG5cdH07XG5cblx0c2VsZi5kZXN0cm95ID0gKCkgPT4ge1xuXHRcdF9kZXN0cm95KCk7XG5cdFx0a2lsbFRpbWVycygpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIHVwZGF0ZU9uRGllKCkge1xuXHRcdGlmIChzZWxmLmRlYWQpIHtcblx0XHRcdGlmIChzZWxmLmdyb3VuZGVkKSB7XG5cdFx0XHRcdHNlbGYudnggPSAwO1xuXHRcdFx0XHRzZWxmLnNraW4ucGxheSgnZGllTGFuZCcpO1xuXG5cdFx0XHRcdGNvbnN0IHQgPSB0aW1lci53YWl0KHtcblx0XHRcdFx0XHR0aW1lOiAxMDAwLFxuXHRcdFx0XHRcdG9uQ29tcGxldGU6ICgpPT4ge1xuXHRcdFx0XHRcdFx0c2VsZi5kZXN0cm95KCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHR0aW1lcnMucHVzaCh0KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHtudW1iZXJ9IGZyYW1lTnVtYmVyXG5cdCAqIEByZXR1cm5zIHt2b2lkfVxuXHQgKi9cblx0ZnVuY3Rpb24gc2hvd0VlbmVteTFBdHRhY2tIaXRBcmVhKGZyYW1lTnVtYmVyKSB7XG5cdFx0Y29uc3QgeSA9IHNlbGYuYXR0YWNrSGl0QXJlYS55ID0gc2VsZi5ib2R5LnkgLSBzZWxmLmJvZHkuaGFsZkhlaWdodCgpICsgNTtcblxuXHRcdGlmIChmcmFtZU51bWJlciA9PT0gMSkge1xuXHRcdFx0c2VsZi5zaG93QXR0YWNrSGl0QXJlYSh7XG5cdFx0XHRcdHg6IHNlbGYuYm9keS54ICsgc2VsZi5hdHRhY2tIaXRBcmVhLmhhbGZXaWR0aCgpIC0gNSxcblx0XHRcdFx0ZmxpcFg6IHNlbGYuYm9keS54IC0gc2VsZi5hdHRhY2tIaXRBcmVhLndpZHRoLFxuXHRcdFx0XHR5XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0aWYgKGZyYW1lTnVtYmVyID09PSAzKSB7XG5cdFx0XHRzZWxmLnJlbW92ZUF0dGFja0hpdEFyZWEoKTtcblx0XHR9XG5cdFx0aWYgKGZyYW1lTnVtYmVyID09PSA2KSB7XG5cdFx0XHRzZWxmLnNob3dBdHRhY2tIaXRBcmVhKHtcblx0XHRcdFx0eDogc2VsZi5ib2R5LnggKyBzZWxmLmF0dGFja0hpdEFyZWEuaGFsZldpZHRoKCkgLSA1LFxuXHRcdFx0XHRmbGlwWDogc2VsZi5ib2R5LnggLSBzZWxmLmF0dGFja0hpdEFyZWEud2lkdGgsXG5cdFx0XHRcdHlcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRpZiAoZnJhbWVOdW1iZXIgPT09IDcpIHtcblx0XHRcdHNlbGYucmVtb3ZlQXR0YWNrSGl0QXJlYSgpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gZnJhbWVOdW1iZXJcblx0ICogQHJldHVybnMge3ZvaWR9XG5cdCAqL1xuXHRmdW5jdGlvbiBzaG93RWVuZW15MkF0dGFja0hpdEFyZWEoZnJhbWVOdW1iZXIpIHtcblx0XHRjb25zdCB5ID0gc2VsZi5hdHRhY2tIaXRBcmVhLnkgPSBzZWxmLmJvZHkueSAtIHNlbGYuYm9keS5oYWxmSGVpZ2h0KCkgKyA1O1xuXG5cdFx0aWYgKGZyYW1lTnVtYmVyID09PSAyKSB7XG5cdFx0XHRzZWxmLnNob3dBdHRhY2tIaXRBcmVhKHtcblx0XHRcdFx0eDogc2VsZi5ib2R5LnggKyBzZWxmLmF0dGFja0hpdEFyZWEuaGFsZldpZHRoKCksXG5cdFx0XHRcdGZsaXBYOiBzZWxmLmJvZHkueCAtIHNlbGYuYXR0YWNrSGl0QXJlYS53aWR0aCAtIDUsXG5cdFx0XHRcdHksXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0aWYgKGZyYW1lTnVtYmVyID09PSA0KSB7XG5cdFx0XHRzZWxmLnJlbW92ZUF0dGFja0hpdEFyZWEoKTtcblx0XHR9XG5cdFx0aWYgKGZyYW1lTnVtYmVyID09PSA2KSB7XG5cdFx0XHRzZWxmLnNob3dBdHRhY2tIaXRBcmVhKHtcblx0XHRcdFx0eDogc2VsZi5ib2R5LnggKyBzZWxmLmF0dGFja0hpdEFyZWEuaGFsZldpZHRoKCksXG5cdFx0XHRcdGZsaXBYOiBzZWxmLmJvZHkueCAtIHNlbGYuYXR0YWNrSGl0QXJlYS53aWR0aCAtIDUsXG5cdFx0XHRcdHlcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRpZiAoZnJhbWVOdW1iZXIgPT09IDcpIHtcblx0XHRcdHNlbGYucmVtb3ZlQXR0YWNrSGl0QXJlYSgpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge251bWJlcn0gZnJhbWVOdW1iZXJcblx0ICogQHJldHVybnMge3ZvaWR9XG5cdCAqL1xuXHRmdW5jdGlvbiBzaG93RWVuZW15M0F0dGFja0hpdEFyZWEoZnJhbWVOdW1iZXIpIHtcblx0XHRjb25zdCB5ID0gc2VsZi5hdHRhY2tIaXRBcmVhLnkgPSBzZWxmLmJvZHkueSAtIHNlbGYuYm9keS5oZWlnaHQ7XG5cdFx0Y29uc3QgdyA9IDMwO1xuXHRcdGNvbnN0IGggPSAzMDtcblxuXHRcdGlmIChmcmFtZU51bWJlciA9PT0gMikge1xuXHRcdFx0c2VsZi5zaG93QXR0YWNrSGl0QXJlYSh7XG5cdFx0XHRcdHg6IHNlbGYuYm9keS54ICsgc2VsZi5hdHRhY2tIaXRBcmVhLmhhbGZXaWR0aCgpIC0gNSxcblx0XHRcdFx0ZmxpcFg6IHNlbGYuYm9keS54IC0gc2VsZi5hdHRhY2tIaXRBcmVhLndpZHRoIC0gMTIsXG5cdFx0XHRcdHksXG5cdFx0XHRcdHcsXG5cdFx0XHRcdGhcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRpZiAoZnJhbWVOdW1iZXIgPT09IDQpIHtcblx0XHRcdHNlbGYucmVtb3ZlQXR0YWNrSGl0QXJlYSgpO1xuXHRcdH1cblx0XHRpZiAoZnJhbWVOdW1iZXIgPT09IDUpIHtcblx0XHRcdHNlbGYuc2hvd0F0dGFja0hpdEFyZWEoe1xuXHRcdFx0XHR4OiBzZWxmLmJvZHkueCArIHNlbGYuYXR0YWNrSGl0QXJlYS5oYWxmV2lkdGgoKSAtIDUsXG5cdFx0XHRcdGZsaXBYOiBzZWxmLmJvZHkueCAtIHNlbGYuYXR0YWNrSGl0QXJlYS53aWR0aCAtIDEyLFxuXHRcdFx0XHR5LFxuXHRcdFx0XHR3LFxuXHRcdFx0XHRoXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0aWYgKGZyYW1lTnVtYmVyID09PSA3KSB7XG5cdFx0XHRzZWxmLnJlbW92ZUF0dGFja0hpdEFyZWEoKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGVNb3ZlbWVudCgpIHtcblx0XHRpZiAoc2VsZi52eSA+IDApIHtcblx0XHRcdHNlbGYuZmFsbGluZyA9IHRydWU7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlQWN0aW9ucygpIHtcblx0XHRpZiAoc2VsZi5nb3RIaXQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRzd2l0Y2ggKHNlbGYuYWN0aW9uKSB7XG5cdFx0Y2FzZSAnY2hhc2UnOlxuXHRcdFx0YWN0aW9uQ2hhc2UoKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ2F0dGFjayc6XG5cdFx0XHRhY3Rpb25BdHRhY2soKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ3J1bi1hd2F5Jzpcblx0XHRcdGFjdGlvblJ1bkF3YXkoKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ3N0YW5kJzpcblx0XHRcdGFjdGlvblN0YW5kKCk7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHtURW5lbXlBY3Rpb25zfSBbIGZvcmNlZEFjdGlvbiBdXG5cdCAqIEByZXR1cm5zIHt2b2lkfVxuIFx0Ki9cblx0ZnVuY3Rpb24gYXV0b0RldGVjdEFjdGlvbnMoZm9yY2VkQWN0aW9uKSB7XG5cdFx0aWYgKHNlbGYuZ290SGl0KSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0bGV0IGFjdGlvbnMgPSBFTkVNWV9BQ1RJT05TO1xuXG5cdFx0aWYgKGVuZW15TmF0dXJlID09PSAnYXR0YWNrZXInKSB7XG5cdFx0XHRhY3Rpb25zID0gRU5FTVlfQUNUSU9OUy5maWx0ZXIoYSA9PiBhICE9PSAncnVuLWF3YXknKTtcblx0XHR9XG5cblx0XHQvKiogQHR5cGUge1RFbmVteUFjdGlvbnN9ICovXG5cdFx0bGV0IGFjdGlvbiA9IGZvcmNlZEFjdGlvbiB8fCBnZXRBcnJheVJhbmRvbVZhbHVlKGFjdGlvbnMpO1xuXG5cdFx0aWYgKCFpc1dpdGhpblRhcmdldFJhbmdlKCkgJiYgYWN0aW9uID09PSAnYXR0YWNrJykge1xuXHRcdFx0YWN0aW9uID0gZ2V0QXJyYXlSYW5kb21WYWx1ZShhY3Rpb25zLmZpbHRlcihhID0+IGEgIT09ICdhdHRhY2snKSk7XG5cdFx0fVxuXG5cdFx0bWlkZGxld2FyZU9uRGV0ZWN0QWN0aW9ucyhhY3Rpb24pO1xuXG5cdFx0c2VsZi5wcmV2QWN0aW9uID0gc2VsZi5hY3Rpb247XG5cdFx0c2VsZi5hY3Rpb24gPSBhY3Rpb247XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHtURW5lbXlBY3Rpb25zfSBhY3Rpb25cblx0ICogQHJldHVybnMge3ZvaWR9XG5cdCAqL1xuXHRmdW5jdGlvbiBtaWRkbGV3YXJlT25EZXRlY3RBY3Rpb25zKGFjdGlvbikge1xuXHRcdGlmIChzZWxmLmFjdGlvbiA9PT0gJ25vbmUnKSB7XG5cblx0XHRcdGlmIChhY3Rpb24gPT09ICdzdGFuZCcpIHtcblx0XHRcdFx0Y29uc3QgdCA9IEdhbWUudGltZXIud2FpdCh7XG5cdFx0XHRcdFx0dGltZTogMTAwMCxcblx0XHRcdFx0XHRvbkNvbXBsZXRlOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXNldEFjdGlvbigpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHRpbWVycy5wdXNoKHQpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoYWN0aW9uID09PSAncnVuLWF3YXknKSB7XG5cdFx0XHRcdC8vIGNvbnN0IHJ1bk9wcG9zaXRlID0gZ2V0T3Bwb3NpdGVGbGlwSCgpO1xuXHRcdFx0XHRjb25zdCBmbGlwU2lkZXMgPSAvKiogQHR5cGUge1RGbGlwSFNpZGVbXX0gKi8oWydsZWZ0JywgJ3JpZ2h0J10pO1xuXHRcdFx0XHRjb25zdCByYW5kU2lkZSA9IGdldEFycmF5UmFuZG9tVmFsdWUoZmxpcFNpZGVzKTtcblxuXHRcdFx0XHRzZWxmLmZsaXAocmFuZFNpZGUpO1xuXG5cdFx0XHRcdGNvbnN0IHQgPSBHYW1lLnRpbWVyLndhaXQoe1xuXHRcdFx0XHRcdHRpbWU6IDMwMDAsXG5cdFx0XHRcdFx0b25Db21wbGV0ZTogKCkgPT4ge1xuXHRcdFx0XHRcdFx0cmVzZXRBY3Rpb24oKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR0aW1lcnMucHVzaCh0KTtcblx0XHRcdH1cblxuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGFjdGlvbkNoYXNlKCkge1xuXHRcdGlmIChzZWxmLmdyb3VuZGVkKSB7XG5cdFx0XHRzZWxmLnNraW4ucGxheSgncnVuJyk7XG5cdFx0fVxuXG5cdFx0aWYgKGlzQmVoaW5kUGxheWVyKCkpIHtcblx0XHRcdHNlbGYuZmxpcCgncmlnaHQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2VsZi5mbGlwKCdsZWZ0Jyk7XG5cdFx0fVxuXG5cdFx0aWYgKCFpc1dpdGhpblRhcmdldFJhbmdlKCkpIHtcblx0XHRcdHNlbGYudnggPSBzZWxmLmZsaXBIVmFsdWUoKSAqIHNlbGYuc3BlZWRYO1xuXHRcdFx0Zm9sbG93Q29uc3RhbnQoc2VsZi5ib2R5LCBHYW1lLnJvb3QucGxheWVyLmJvZHksIHNlbGYuc3BlZWRYLCB0cnVlLCBmYWxzZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc2V0QWN0aW9uKCk7XG5cdFx0XHRhdXRvRGV0ZWN0QWN0aW9ucygnYXR0YWNrJyk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gYWN0aW9uQXR0YWNrKCkge1xuXHRcdGlmIChpc0F0dGFjaygpKSB7XG5cdFx0XHRpZiAoc2VsZi5ncm91bmRlZCkge1xuXHRcdFx0XHRhdHRhY2soKTtcblx0XHRcdFx0c2VsZi5za2luLnBsYXkoJ2F0dGFjaycpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGFjdGlvblJ1bkF3YXkoKSB7XG5cdFx0aWYgKHNlbGYuZ3JvdW5kZWQpIHtcblx0XHRcdHNlbGYuc2tpbi5wbGF5KCdydW4nKTtcblx0XHR9XG5cdFx0c2VsZi52eCA9IHNlbGYuZmxpcEhWYWx1ZSgpICogc2VsZi5zcGVlZFg7XG5cdH1cblxuXHRmdW5jdGlvbiBhY3Rpb25TdGFuZCgpIHtcblx0XHRzZWxmLnZ4ICo9IDAuMztcblx0XHRpZiAoc2VsZi5ncm91bmRlZCkge1xuXHRcdFx0c2VsZi5za2luLnBsYXkoJ2lkbGUnKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBhdHRhY2soKSB7XG5cdFx0c2VsZi5hdHRhY2tpbmcgPSB0cnVlO1xuXHRcdHNlbGYudnggPSAwO1xuXHR9XG5cblx0ZnVuY3Rpb24gdnNXYWxscygpIHtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IEdhbWUucm9vdC53YWxscy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3Qgd2FsbCA9IEdhbWUucm9vdC53YWxsc1tpXTtcblxuXHRcdFx0Y29uc3QgdGVzdCA9IGhpdFRlc3Qod2FsbCwgc2VsZi5ib2R5KTtcblxuXHRcdFx0aWYgKHRlc3QuaGl0KSB7XG5cdFx0XHRcdGlmICh0ZXN0LnNpZGUgPT09ICdyaWdodCcgJiYgc2VsZi52eCA+PSAwKSB7XG5cdFx0XHRcdFx0c2VsZi5mbGlwKCdsZWZ0Jyk7XG5cdFx0XHRcdH0gZWxzZSBpZiAodGVzdC5zaWRlID09PSAnbGVmdCcgJiYgc2VsZi52eCA8PSAwKSB7XG5cdFx0XHRcdFx0c2VsZi5mbGlwKCdyaWdodCcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdnNBdHRhY2tQbGF5ZXIoKSB7XG5cdFx0Y29uc3QgcGxheWVyID0gR2FtZS5yb290LnBsYXllcjtcblx0XHRpZiAoIXBsYXllciB8fCAhc2VsZi5hdHRhY2tIaXRBcmVhLnBhcmVudCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zdCB0ZXN0ID0gaGl0VGVzdChwbGF5ZXIuYm9keSwgc2VsZi5hdHRhY2tIaXRBcmVhKTtcblx0XHRpZiAodGVzdC5oaXQgJiYgcGxheWVyLmhlYWx0aCkge1xuXHRcdFx0cGxheWVyLnJlY2VpdmVEYW1hZ2UoMSwgc2VsZik7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24ga2lsbFRpbWVycygpIHtcblx0XHR0aW1lcnMuZm9yRWFjaCh0ID0+IHtcblx0XHRcdEdhbWUudGltZXIua2lsbFdhaXQodCk7XG5cdFx0fSk7XG5cblx0XHR0aW1lcnMubGVuZ3RoID0gMDtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldE9wcG9zaXRlRmxpcEgoKSB7XG5cdFx0Y29uc3Qgc2lkZSA9ICBzZWxmLmZsaXBIID09PSAnbGVmdCcgPyAncmlnaHQnIDogJ2xlZnQnO1xuXG5cdFx0cmV0dXJuIHNpZGU7XG5cdH1cblxuXHRmdW5jdGlvbiByZXNldEFjdGlvbigpIHtcblx0XHRzZWxmLmFjdGlvbiA9ICdub25lJztcblx0XHRzZWxmLmF0dGFja2luZyA9IGZhbHNlO1xuXHRcdGtpbGxUaW1lcnMoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGlzQXR0YWNrKCkge1xuXHRcdHJldHVybiAhc2VsZi5hdHRhY2tpbmc7XG5cdH1cblxuXHRmdW5jdGlvbiBpc0p1bXAoKSB7XG5cdFx0cmV0dXJuICFzZWxmLmp1bXBpbmc7XG5cdH1cblxuXHRmdW5jdGlvbiBpc0JlaGluZFBsYXllcigpIHtcblx0XHRyZXR1cm4gQm9vbGVhbihzZWxmLmJvZHkueCA8PSBHYW1lLnJvb3QucGxheWVyLmJvZHkueCk7XG5cdH1cblxuXHRmdW5jdGlvbiBpc0RldGVjdEFjdGlvbnMoKSB7XG5cdFx0cmV0dXJuIHNlbGYuYWN0aW9uID09PSAnbm9uZSc7XG5cdH1cblxuXHRmdW5jdGlvbiBpc1dpdGhpblRhcmdldFJhbmdlKHJhbmdlPTIwKSB7XG5cdFx0Y29uc3QgZCA9IGRpc3RhbmNlKHNlbGYuYm9keSwgR2FtZS5yb290LnBsYXllci5ib2R5KTsgXG5cdFx0cmV0dXJuIEJvb2xlYW4oZCA8PSByYW5nZSk7XG5cdH1cblxuXHRyZXR1cm4gc2VsZjtcbn1cbiIsICJpbXBvcnQgeyBHYW1lIH0gZnJvbSAnQGdhbWUvR2FtZSc7XG5pbXBvcnQgeyBoaXRUZXN0IH0gZnJvbSAnQHBhY2thZ2VzL2NvbGxpc2lvbnMnO1xuaW1wb3J0IHsgU3ByaXRlIH0gZnJvbSAnQHBhY2thZ2VzL2Rpc3BsYXlPYmplY3RzJztcbmltcG9ydCB7IGdldEFuaW1GcmFtZXMgfSBmcm9tICdAcGFja2FnZXMvdXRpbHMvbWlzYyc7XG5cbi8qKlxuICogQHR5cGUge0ZBcnJvd31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEFycm93KHgsIHksIGRpcmVjdGlvbikge1xuXHRjb25zdCB3b3JsZCA9IEdhbWUucm9vdC5wbGF5ZXJHcm91cDtcblx0Y29uc3Qgc3JjID0gZ2V0QW5pbUZyYW1lcygnYXJyb3cuJylbMF07XG5cdGNvbnN0IG8gPSBTcHJpdGUoc3JjKTtcblx0by54ID0geDtcblx0by55ID0geTtcblx0d29ybGQuYWRkQ2hpbGQobyk7XG5cblx0bGV0IHNwZWVkWCA9IDQ7XG5cdGxldCB2eCA9IHNwZWVkWDtcblx0bGV0IGF4ID0gMDtcblxuXHRHYW1lLmRlYnVnLmFkZCgnYXJyb3cnLCBvKTtcblxuXHRjb25zdCB1cGRhdGVJZCA9IEdhbWUudGlja2VyLmFkZCgndXBkYXRlJywgdXBkYXRlLmJpbmQodGhpcykpO1xuXG5cdGZ1bmN0aW9uIHVwZGF0ZSgpIHtcblx0XHR2eCArPSBheDtcblx0XHRvLnggKz0gdnggKiBkaXJlY3Rpb247XG5cblx0XHR2c1dhbGxzKCk7XG5cdFx0dnNFbmVtaWVzKCk7XG5cdH1cblxuXHRmdW5jdGlvbiB2c1dhbGxzKCkge1xuXHRcdGNvbnN0IHdhbGxzID0gR2FtZS5yb290LndhbGxzO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB3YWxscy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3Qgd2FsbCA9IHdhbGxzW2ldO1xuXHRcdFx0Y29uc3QgdGVzdCA9IGhpdFRlc3Qod2FsbCwgbyk7XG5cblx0XHRcdGlmICh0ZXN0LmhpdCkge1xuXHRcdFx0XHRkZXN0cm95KCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdnNFbmVtaWVzKCkge1xuXHRcdGNvbnN0IGVuZW1pZXMgPSBHYW1lLnJvb3QuZW5lbWllcztcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgZW5lbWllcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgZSA9IGVuZW1pZXNbaV07XG5cdFx0XHRjb25zdCB0ZXN0ID0gaGl0VGVzdChlLmJvZHksIG8pO1xuXG5cdFx0XHRpZiAodGVzdC5oaXQgJiYgZS5oZWFsdGgpIHtcblx0XHRcdFx0ZGVzdHJveSgpO1xuXHRcdFx0XHRlLnJlY2VpdmVEYW1hZ2UoKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQHR5cGUge0ZBcnJvd1ZzQWN0b3J9XG5cdCAqL1xuXHRmdW5jdGlvbiB2c0FjdG9yKGFjdG9yKSB7XG5cdFx0Y29uc3QgdGVzdCA9IGhpdFRlc3QoYWN0b3IuYm9keSwgbyk7XG5cdFx0aWYgKHRlc3QuaGl0KSB7XG5cdFx0XHRkZXN0cm95KCk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0XHRvLmRlc3Ryb3koKTtcblx0XHRHYW1lLnRpY2tlci5yZW1vdmUodXBkYXRlSWQsICd1cGRhdGUnKTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0dnNXYWxscyxcblx0XHR2c0FjdG9yLFxuXHRcdHVwZGF0ZSxcblx0XHRkZXN0cm95XG5cdH07XG59XG4iLCAiaW1wb3J0IHsgUExBWUVSX0VWRU5UUyB9IGZyb20gJ0BnYW1lL0V2ZW50cyc7XG5pbXBvcnQgeyBHYW1lIH0gZnJvbSAnQGdhbWUvR2FtZSc7XG5pbXBvcnQgeyBoaXRUZXN0IH0gZnJvbSAnQHBhY2thZ2VzL2NvbGxpc2lvbnMnO1xuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSAnQHBhY2thZ2VzL2Rpc3BsYXlPYmplY3RzJztcbmltcG9ydCB7IGdldEFuaW1GcmFtZXMgfSBmcm9tICdAcGFja2FnZXMvdXRpbHMvbWlzYyc7XG5cbmltcG9ydCB7IEFycm93IH0gZnJvbSAnLi4vQXJyb3cnO1xuaW1wb3J0IHsgQWN0b3IgfSBmcm9tICcuL0FjdG9yJztcblxuLyoqXG4gKiBAdHlwZSB7RlBsYXllcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFBsYXllcigpIHtcblx0Ly8gY29uc3Qgd29ybGQgPSBHYW1lLnJvb3Qud29ybGQ7XG5cdC8vIGFkZCB0byBvd24gd29ybGQgLT4gcGxheWVyV29ybGRcblx0Y29uc3Qgd29ybGQgPSBHYW1lLnJvb3QucGxheWVyR3JvdXA7XG5cdGNvbnN0IHRpbWVyID0gR2FtZS50aW1lcjtcblxuXHRjb25zdCBpZGxlMVNoZWV0ID0gJ3BsYXllci9pZGxlMS9pZGxlJztcblx0Y29uc3QgaWRsZTJTaGVldCA9ICdwbGF5ZXIvaWRsZTIvaWRsZSc7XG5cdGNvbnN0IGRpZVNoZWV0ID0gJ3BsYXllci9kaWUvZGllJztcblx0Y29uc3QgcnVuU2hlZXQgPSAncGxheWVyL3J1bi9ydW4nO1xuXHRjb25zdCBnb3RIaXRTaGVldCA9ICdwbGF5ZXIvZ290X2hpdC8nO1xuXHRjb25zdCBzd29yZEF0dGFjazFTaGVldCA9ICdwbGF5ZXIvc3dvcmRfYXR0YWNrMS9zd29yZF9hdHRhY2snO1xuXHRjb25zdCBzd29yZEF0dGFjazJTaGVldCA9ICdwbGF5ZXIvc3dvcmRfYXR0YWNrMi9zd29yZF9hdHRhY2snO1xuXHRjb25zdCBzd29yZEF0dGFjazNTaGVldCA9ICdwbGF5ZXIvc3dvcmRfYXR0YWNrMy9zd29yZF9hdHRhY2snO1xuXHRjb25zdCBhcnJvd0F0dGFja1NoZWV0ID0gJ3BsYXllci9hcnJvd19hdHRhY2svYXJyb3dfYXR0YWNrJztcblxuXHRjb25zdCBpZGxlQW5pbU5hbWUgPSAnaWRsZTEnO1xuXG5cdGNvbnN0IG8gPSBBY3Rvcih7XG5cdFx0d29ybGQsXG5cdFx0Z3Jhdml0eTogMC40LFxuXHRcdGJvZHk6IHtcblx0XHRcdHdpZHRoOiA1LFxuXHRcdFx0aGVpZ2h0OiAxNixcblx0XHRcdGNvbG9yOiAncmVkJ1xuXHRcdH0sXG5cdFx0YW5pbWF0aW9uczoge1xuXHRcdFx0J2lkbGUxJzoge1xuXHRcdFx0XHRmcmFtZXM6IGdldEFuaW1GcmFtZXMoaWRsZTFTaGVldCArIDEpLFxuXHRcdFx0XHRmcHM6IDRcblx0XHRcdH0sXG5cdFx0XHQnaWRsZTInOiB7XG5cdFx0XHRcdGZyYW1lczogZ2V0QW5pbUZyYW1lcyhpZGxlMlNoZWV0ICsgMiksXG5cdFx0XHRcdGZwczogNFxuXHRcdFx0fSxcblx0XHRcdCdydW4nOiB7XG5cdFx0XHRcdGZyYW1lczogZ2V0QW5pbUZyYW1lcyhydW5TaGVldClcblx0XHRcdH0sXG5cdFx0XHQnc3dvcmRBdHRhY2sxJzoge1xuXHRcdFx0XHRmcmFtZXM6IGdldEFuaW1GcmFtZXMoc3dvcmRBdHRhY2sxU2hlZXQgKyAxKS5jb25jYXQoaWRsZTJTaGVldCArIDIpLFxuXHRcdFx0XHRsb29wOiBmYWxzZSxcblx0XHRcdFx0ZnBzOiAxMlxuXHRcdFx0fSxcblx0XHRcdCdzd29yZEF0dGFjazInOiB7XG5cdFx0XHRcdGZyYW1lczogZ2V0QW5pbUZyYW1lcyhzd29yZEF0dGFjazJTaGVldCArIDIpLmNvbmNhdChpZGxlMlNoZWV0ICsgMiksXG5cdFx0XHRcdGxvb3A6IGZhbHNlLFxuXHRcdFx0XHRmcHM6IDEyXG5cdFx0XHR9LFxuXHRcdFx0J3N3b3JkQXR0YWNrMyc6IHtcblx0XHRcdFx0ZnJhbWVzOiBnZXRBbmltRnJhbWVzKHN3b3JkQXR0YWNrM1NoZWV0ICsgMykuY29uY2F0KGlkbGUyU2hlZXQgKyAyKSxcblx0XHRcdFx0bG9vcDogZmFsc2UsXG5cdFx0XHRcdGZwczogMTJcblx0XHRcdH0sXG5cdFx0XHQnYXJyb3dBdHRhY2snOiB7XG5cdFx0XHRcdGZyYW1lczogZ2V0QW5pbUZyYW1lcyhhcnJvd0F0dGFja1NoZWV0KS5jb25jYXQoYXJyb3dBdHRhY2tTaGVldCArICdfMDAwMScpLFxuXHRcdFx0XHRsb29wOiBmYWxzZSxcblx0XHRcdFx0ZnBzOiAxMFxuXHRcdFx0fSxcblx0XHRcdCdkaWVGYWxsJzoge1xuXHRcdFx0XHRmcmFtZXM6IGdldEFuaW1GcmFtZXMoZGllU2hlZXQgKyAnXzAwMDAnKSxcblx0XHRcdFx0bG9vcDogZmFsc2Vcblx0XHRcdH0sXG5cdFx0XHQnZGllTGFuZCc6IHtcblx0XHRcdFx0ZnJhbWVzOiBnZXRBbmltRnJhbWVzKGRpZVNoZWV0ICsgJ18wMDAxJyksXG5cdFx0XHRcdGxvb3A6IGZhbHNlXG5cdFx0XHR9LFxuXHRcdFx0J2p1bXAnOiB7XG5cdFx0XHRcdGZyYW1lczogZ2V0QW5pbUZyYW1lcyhydW5TaGVldCArICdfMDAwMScpLFxuXHRcdFx0XHRsb29wOiBmYWxzZVxuXHRcdFx0fSxcblx0XHRcdCdlbnRyeUZhbGwnOiB7XG5cdFx0XHRcdGZyYW1lczogW1xuXHRcdFx0XHRcdCdwbGF5ZXIvc2t5X2ZhbGwvc2t5X2ZhbGxfMS5wbmcnLFxuXHRcdFx0XHRcdCdwbGF5ZXIvc2t5X2ZhbGwvc2t5X2ZhbGxfMi5wbmcnLFxuXHRcdFx0XHRcdCdwbGF5ZXIvc2t5X2ZhbGwvc2t5X2ZhbGxfMy5wbmcnXG5cdFx0XHRcdF0sXG5cdFx0XHRcdGZwczogMTIsXG5cdFx0XHRcdGxvb3A6IGZhbHNlXG5cdFx0XHR9LFxuXHRcdFx0J2VudHJ5TGFuZCc6IHtcblx0XHRcdFx0ZnJhbWVzOiBbXG5cdFx0XHRcdFx0J3BsYXllci9za3lfZmFsbC9za3lfZmFsbF80LnBuZycsXG5cdFx0XHRcdFx0J3BsYXllci9za3lfZmFsbC9za3lfZmFsbF81LnBuZycsXG5cdFx0XHRcdFx0J3BsYXllci9za3lfZmFsbC9za3lfZmFsbF82LnBuZycsXG5cdFx0XHRcdFx0J3BsYXllci9za3lfZmFsbC9za3lfZmFsbF83LnBuZycsXG5cdFx0XHRcdFx0J3BsYXllci9za3lfZmFsbC9za3lfZmFsbF84LnBuZycsXG5cdFx0XHRcdFx0J3BsYXllci9za3lfZmFsbC9za3lfZmFsbF85LnBuZycsXG5cdFx0XHRcdF0sXG5cdFx0XHRcdGZwczogMTIsXG5cdFx0XHRcdGxvb3A6IGZhbHNlXG5cdFx0XHR9LFxuXHRcdFx0J2dvdEhpdCc6IHtcblx0XHRcdFx0ZnJhbWVzOiBnZXRBbmltRnJhbWVzKGdvdEhpdFNoZWV0KSxcblx0XHRcdFx0ZnBzOiAxMixcblx0XHRcdFx0bG9vcDogZmFsc2Vcblx0XHRcdH0sXG5cdFx0Ly8gJ3Rlc3QnOiB7XG5cdFx0Ly8gXHRmcmFtZXM6IC8qKiBAdHlwZSB7c3RyaW5nW119ICovKFtnZXRBbmltRnJhbWVzKCdhcnJvd19hdHRhY2tfMDAwMCcpXSksXG5cdFx0Ly8gXHRsb29wOiB0cnVlXG5cdFx0Ly8gfSxcblx0XHR9XG5cblx0fSk7XG5cdGxldCBzd29yZEF0dGFja1R5cGUgPSAxO1xuXG5cdC8qKlxuXHQgKiBAdHlwZSB7UGFydGlhbDxUUGxheWVyT25seVByb3BzPn1cblx0ICovXG5cdGxldCBwcm9wcyA9IHtcblx0XHRuYW1lOiAncGxheWVyJ1xuXHR9O1xuXG5cdGxldCBzZWxmID0gLyoqIEB0eXBlIHtUUGxheWVyfSAqLyAoT2JqZWN0LmFzc2lnbihvLCBwcm9wcykpO1xuXG5cdHNlbGYuYm9keS5uYW1lID0gYCR7cHJvcHMubmFtZX0tYm9keWA7XG5cdHNlbGYuc2tpbi5uYW1lID0gYCR7cHJvcHMubmFtZX0tc2tpbmA7XG5cdHNlbGYuYm9keS54ID0gNDY0LzI7XG5cdHNlbGYuYm9keS55ID0gMDtcblx0c2VsZi5mbGlwSCA9ICdyaWdodCc7IFxuXHRzZWxmLmJvZHkuYWxwaGEgPSAwO1xuXHRzZWxmLnNraW4uYWxwaGEgPSAwO1xuXHRzZWxmLmhlYWx0aCA9IDU7XG5cdHNlbGYuc2tpbi5wbGF5KGlkbGVBbmltTmFtZSk7XG5cblx0Y29uc3QgaW5kaWNhdG9yID0gUmVjdGFuZ2xlKDIsIDQsICcjOWYxODNhJywgJycsIDAsIDAsIDApO1xuXHRpbmRpY2F0b3IuYWxwaGEgPSAwO1xuXHR3b3JsZC5hZGRDaGlsZChpbmRpY2F0b3IpO1xuXG5cdHNlbGYuYXR0YWNrSGl0QXJlYS5hbHBoYSA9IDA7XG5cblx0R2FtZS5yb290LnNldEhlYWx0aChzZWxmLmhlYWx0aCk7XG5cblx0Y29uc3QgX3VwZGF0ZSA9IHNlbGYudXBkYXRlO1xuXHRjb25zdCBfa2lsbCA9IHNlbGYua2lsbDtcblx0Y29uc3QgX3JlY2VpdmVEYW1hZ2UgPSBzZWxmLnJlY2VpdmVEYW1hZ2U7XG5cdGNvbnN0IF9kZXN0cm95ID0gc2VsZi5kZXN0cm95O1xuXG5cdC8qKlxuXHQgKiBAdHlwZSB7bnVtYmVyW119XG5cdCAqL1xuXHRjb25zdCB0aW1lcnMgPSBbXTtcblxuXHRsZXQgaXNFbnRyeUZhbGwgPSB0cnVlO1xuXHRsZXQgaXNFbnRyeUxhbmQgPSBmYWxzZTtcblxuXHRzZWxmLnNraW4ub25BbmltVXBkYXRlID0gKGZyYW1lTnVtYmVyLCBuYW1lKSA9PiB7XG5cdFx0Y29uc3QgaXNBcnJvd0F0dGFjayA9IG5hbWUuaW5jbHVkZXMoJ2Fycm93Jyk7XG5cblx0XHRpZiAoaXNBcnJvd0F0dGFjayAmJiBmcmFtZU51bWJlciA9PT0gMSAmJiBHYW1lLnJvb3QuYXJyb3dzKCkgPiAwKSB7XG5cdFx0XHRzcGF3bkFycm93KCk7XG5cdFx0fVxuXG5cdFx0aWYgKG5hbWUuaW5jbHVkZXMoJ3N3b3JkQXR0YWNrJykpIHtcblx0XHRcdHNob3dBdHRhY2sxSGl0QXJlYShmcmFtZU51bWJlcik7XG5cdFx0fVxuXHR9O1xuXG5cdHNlbGYuc2tpbi5vbkFuaW1Db21wbGV0ZSA9IChuYW1lKSA9PiB7XG5cdFx0Y29uc3QgaXNTd29yZEF0dGFjayA9IG5hbWUuaW5jbHVkZXMoJ3N3b3JkJyk7XG5cdFx0Y29uc3QgaXNBcnJvd0F0dGFjayA9IG5hbWUuaW5jbHVkZXMoJ2Fycm93Jyk7XG5cdFx0Y29uc3QgZmFsbCA9IG5hbWUuaW5jbHVkZXMoJ2VudHJ5RmFsbCcpO1xuXHRcdGNvbnN0IGxhbmQgPSBuYW1lLmluY2x1ZGVzKCdlbnRyeUxhbmQnKTtcblx0XHRjb25zdCBpc0dvdEhpdCA9IG5hbWUuaW5jbHVkZXMoJ2dvdEhpdCcpO1xuXG5cdFx0aWYgKGlzU3dvcmRBdHRhY2sgfHwgaXNBcnJvd0F0dGFjaykge1xuXHRcdFx0c2VsZi5hdHRhY2tpbmcgPSBmYWxzZTtcblx0XHRcdHNlbGYucmVtb3ZlQXR0YWNrSGl0QXJlYSgpO1xuXHRcdH1cblxuXHRcdGlmIChpc1N3b3JkQXR0YWNrKSB7XG5cdFx0XHQvLyBUT0RPIDogZG8gcHJvcGVyIGltcGxlbWVudGF0aW9uIG9yIGFheWJlIHJhbmQgZm9yIG1vdmVzXG5cdFx0XHR1cGRhdGVTd29yZEF0dGFja1R5cGUoKTtcblx0XHR9XG5cblx0XHRpZiAoZmFsbCkge1xuXHRcdFx0aXNFbnRyeUZhbGwgPSBmYWxzZTtcblx0XHRcdGlzRW50cnlMYW5kID0gdHJ1ZTtcblx0XHRcdHNlbGYuc2tpbi5wbGF5KCdlbnRyeUxhbmQnKTtcblx0XHRcdEdhbWUuZW1pdHRlci5lbWl0KFBMQVlFUl9FVkVOVFMuRU5UUllfTEFOREVEKTtcblx0XHR9XG5cblx0XHRpZiAobGFuZCAmJiBpc0VudHJ5TGFuZCkge1xuXHRcdFx0aXNFbnRyeUxhbmRcdD0gZmFsc2U7XG5cdFx0XHRzZWxmLnNraW4ucGxheShpZGxlQW5pbU5hbWUpO1xuXHRcdH1cblxuXHRcdGlmIChpc0dvdEhpdCkge1xuXHRcdFx0c2VsZi5nb3RIaXQgPSBmYWxzZTtcblx0XHRcdGtpbGxUaW1lcnMoKTtcblxuXHRcdFx0Ly8gYmxpbmsgaW4gdGltbGV5IG1hbm5lclxuXHRcdFx0Y29uc3QgdCA9IHRpbWVyLmNoYWluKFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRpbWU6IDEwMCxcblx0XHRcdFx0XHRvbkNvbXBsZXRlOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRzZWxmLnNraW4uYWxwaGEgPSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRpbWU6IDEwMCxcblx0XHRcdFx0XHRvbkNvbXBsZXRlOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRzZWxmLnNraW4uYWxwaGEgPSAxO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRpbWU6IDEwMCxcblx0XHRcdFx0XHRvbkNvbXBsZXRlOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRzZWxmLnNraW4uYWxwaGEgPSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRpbWU6IDEwMCxcblx0XHRcdFx0XHRvbkNvbXBsZXRlOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRzZWxmLnNraW4uYWxwaGEgPSAxO1xuXHRcdFx0XHRcdFx0c2VsZi5kaXNhYmxlR290SGl0ID0gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRdKTtcblxuXHRcdFx0dGltZXJzLnB1c2godCk7XG5cdFx0fVxuXHR9O1xuXG5cdHNlbGYudXBkYXRlID0gKCkgPT4ge1xuXHRcdGlmIChpc0VudHJ5RmFsbCkge1xuXHRcdFx0c2VsZi5za2luLmFscGhhID0gMTtcblx0XHRcdHNlbGYuc2tpbi5wbGF5KCdlbnRyeUZhbGwnKTtcblx0XHR9XG5cblx0XHRfdXBkYXRlKCk7XG5cdFx0aWYgKCFzZWxmLmRlYWQgJiYgIXNlbGYuZ290SGl0KSB7XG5cdFx0XHRpZiAoR2FtZS5yb290LmVuZW1pZXMgJiYgR2FtZS5yb290LmVuZW1pZXMubGVuZ3RoID49IDMpIHtcblx0XHRcdFx0aW5kaWNhdG9yLmFscGhhID0gMTtcblx0XHRcdH1cblx0XHRcdHVwZGF0ZU1vdmVtZW50KCk7XG5cdFx0XHR1cGRhdGVBdHRhY2soKTtcblx0XHRcdGlmIChzZWxmLmF0dGFja2luZykge1xuXHRcdFx0XHRzd29yZHNWc0VuZW1pZXMoKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0dXBkYXRlSW5kaWNhdG9yKCk7XG5cdFx0c2VsZi52c1BsYXRmb3JtcyhHYW1lLnJvb3QucGxhdGZvcm1zKTtcblxuXHRcdHVwZGF0ZU9uRGllKCk7XG5cblx0fTtcblxuXHRzZWxmLmtpbGwgPSAoKSA9PiB7XG5cdFx0X2tpbGwoKTtcblx0XHRHYW1lLnNvdW5kLnBsYXlTRlgoJ2RpZScpO1xuXHRcdHNlbGYuc2tpbi5wbGF5KCdkaWVGYWxsJyk7XG5cdFx0c2VsZi5qdW1wKDMpO1xuXHRcdHNlbGYudnggPSAtc2VsZi5mbGlwSFZhbHVlKCkgKiAxO1xuXHR9O1xuXG5cdHNlbGYucmVjZWl2ZURhbWFnZSA9IChhbW91bnQsIGZyb20pID0+IHtcblx0XHRpZiAoc2VsZi5hdHRhY2tpbmcpIHtcblx0XHRcdHNlbGYuZGlzYWJsZUdvdEhpdCA9IGZhbHNlO1xuXHRcdFx0c2VsZi5nb3RIaXQgPSBmYWxzZTtcblx0XHRcdHNlbGYudnggPSAwO1xuXHRcdFx0c2VsZi5yZW1vdmVBdHRhY2tIaXRBcmVhKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmIChzZWxmLmRpc2FibGVHb3RIaXQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0X3JlY2VpdmVEYW1hZ2UoYW1vdW50LCBmcm9tKTtcblxuXHRcdEdhbWUucm9vdC5zZXRIZWFsdGgoby5oZWFsdGgpO1xuXHR9O1xuXG5cdHNlbGYub25SZWNlaXZlRGFtYWdlID0gKGFtb3VudCwgZnJvbSkgPT4ge1xuXHRcdGlmICghc2VsZi5nb3RIaXQgJiYgc2VsZi5za2luLmN1cnJlbnRBbmltTmFtZSAhPT0gJ2dvdEhpdCcpIHtcblx0XHRcdHNlbGYuZ290SGl0ID0gdHJ1ZTtcblx0XHRcdHNlbGYuZGlzYWJsZUdvdEhpdCA9IHRydWU7XG5cdFx0XHRzZWxmLnNraW4ucGxheSgnZ290SGl0Jyk7XG5cdFx0XHRzZWxmLnZ4ID0gMDtcblxuXHRcdFx0aWYgKGlzQmVoaW5kRW5lbXkoZnJvbSkpIHtcblx0XHRcdFx0aWYgKHNlbGYuaXNGbGlwSCgpKSB7XG5cdFx0XHRcdFx0c2VsZi5mbGlwKCdyaWdodCcpO1xuXHRcdFx0XHR9IFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKCFzZWxmLmlzRmxpcEgoKSkge1xuXHRcdFx0XHRcdHNlbGYuZmxpcCgnbGVmdCcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRPRE86OiBlcnJvciBvbiB3aGlsZSBnb3QgaGl0IGR1cmluZyBhdHRhY2sgbW9kZTogZml4ZWQsIGJ1dCBuZWVkcyByZS1jaGVja2luZ1xuXG5cdFx0XHQvLyByZXBlYWxcblx0XHRcdHNlbGYuanVtcCgzKTtcblx0XHRcdHNlbGYudnggPSAtc2VsZi5mbGlwSFZhbHVlKCkgKiAwLjU7XG5cblx0XHRcdGtpbGxUaW1lcnMoKTtcblx0XHR9XG5cdH07XG5cblx0c2VsZi5kZXN0cm95ID0gKCkgPT4ge1xuXHRcdF9kZXN0cm95KCk7XG5cdFx0a2lsbFRpbWVycygpO1xuXHRcdGluZGljYXRvci5kZXN0cm95KCk7XG5cdH07XG5cblx0ZnVuY3Rpb24gdXBkYXRlT25EaWUoKSB7XG5cdFx0Ly8gaWYgKEdhbWUua2V5LmlzRG93bignb2snKSkge1xuXHRcdC8vIFx0c2VsZi5yZWNlaXZlRGFtYWdlKDEwKTtcblx0XHQvLyB9XG5cblx0XHRpZiAoc2VsZi5kZWFkKSB7XG5cdFx0XHRpZiAoc2VsZi5ncm91bmRlZCkge1xuXHRcdFx0XHRzZWxmLnZ4ID0gMDtcblx0XHRcdFx0c2VsZi5za2luLnBsYXkoJ2RpZUxhbmQnKTtcblxuXHRcdFx0XHRjb25zdCB0ID0gdGltZXIud2FpdCh7XG5cdFx0XHRcdFx0dGltZTogMTAwMCxcblx0XHRcdFx0XHRvbkNvbXBsZXRlOiAoKT0+IHtcblx0XHRcdFx0XHRcdEdhbWUucm9vdC5zZXRHYW1lT3Zlcih0cnVlKTtcblx0XHRcdFx0XHRcdHNlbGYuZGVzdHJveSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHRpbWVycy5wdXNoKHQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZVN3b3JkQXR0YWNrVHlwZSgpIHtcblx0XHRpZiAoaXNBdHRhY2soKSkge1xuXHRcdFx0c3dvcmRBdHRhY2tUeXBlICs9IDE7XG5cdFx0XHRpZiAoc3dvcmRBdHRhY2tUeXBlID4gMykge1xuXHRcdFx0XHRzd29yZEF0dGFja1R5cGUgPSAxO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRzd29yZEF0dGFja1R5cGUgPSAxO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZUluZGljYXRvcigpIHtcblx0XHRpbmRpY2F0b3IueCA9ICFzZWxmLmlzRmxpcEgoKSA/XG5cdFx0XHRzZWxmLmJvZHkueCArIGluZGljYXRvci5oYWxmV2lkdGgoKSA6XG5cdFx0XHRzZWxmLmJvZHkueCArIGluZGljYXRvci53aWR0aDtcblxuXHRcdGluZGljYXRvci55ID0gc2VsZi5ib2R5LnkgLSBzZWxmLmJvZHkuaGVpZ2h0O1xuXHR9XG5cblx0ZnVuY3Rpb24gc3Bhd25BcnJvdygpIHtcblx0XHRjb25zdCB4ID0gIXNlbGYuaXNGbGlwSCgpID9cblx0XHRcdHNlbGYuYm9keS54ICsgMzpcblx0XHRcdHNlbGYuYm9keS54IC0gMTA7XG5cblx0XHRBcnJvdyh4LCBzZWxmLmJvZHkueSArIDIsIHNlbGYuZmxpcEhWYWx1ZSgpKTtcblx0XHRHYW1lLnJvb3Quc2V0QXJyb3dzKC0xKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZU1vdmVtZW50KCkge1xuXHRcdGlmIChzZWxmLnZ5ID4gMCkge1xuXHRcdFx0c2VsZi5mYWxsaW5nID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoaXNFbnRyeUZhbGwgfHwgaXNFbnRyeUxhbmQpIHtcblx0XHRcdHNlbGYudnggPSAwO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICghc2VsZi5hdHRhY2tpbmcpIHtcblx0XHRcdGlmIChpc01vdmUoKSkge1xuXHRcdFx0XHRpZiAoc2VsZi5ncm91bmRlZCkge1xuXHRcdFx0XHRcdHNlbGYuc2tpbi5wbGF5KCdydW4nKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzZWxmLnZ4ID0gc2VsZi5mbGlwSFZhbHVlKCkgKiBzZWxmLnNwZWVkWDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGlzTW92ZSgncmlnaHQnKSkge1xuXHRcdFx0XHRzZWxmLmZsaXAoJ3JpZ2h0Jyk7XG5cdFx0XHR9IGVsc2UgaWYgKGlzTW92ZSgnbGVmdCcpKSB7XG5cdFx0XHRcdHNlbGYuZmxpcCgnbGVmdCcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gYWRkIGZyaWN0aW9uXG5cdFx0XHRcdHNlbGYudnggKj0gMC4zO1xuXHRcdFx0XHRpZiAoc2VsZi5ncm91bmRlZCkge1xuXHRcdFx0XHRcdHNlbGYuc2tpbi5wbGF5KGlkbGVBbmltTmFtZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoaXNKdW1wKCkpIHtcblx0XHRcdGlmIChzZWxmLmdyb3VuZGVkICYmICFzZWxmLmF0dGFja2luZykge1xuXHRcdFx0XHRzZWxmLmp1bXAoKTtcblx0XHRcdFx0c2VsZi5za2luLnBsYXkoJ2p1bXAnKTtcblx0XHRcdH1cblx0XHR9XG5cblx0fVxuXG5cdGZ1bmN0aW9uIHVwZGF0ZUF0dGFjaygpIHtcblx0XHRpZiAoaXNBdHRhY2soKSkge1xuXHRcdFx0aWYgKHNlbGYuZ3JvdW5kZWQpIHtcblx0XHRcdFx0YXR0YWNrKCk7XG5cblx0XHRcdFx0aWYgKGlzU2xhc2goKSkge1xuXHRcdFx0XHRcdHN3b3JkQXR0YWNrKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0YXJyb3dBdHRhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGF0dGFjaygpIHtcblx0XHRzZWxmLmF0dGFja2luZyA9IHRydWU7XG5cdFx0c2VsZi52eCA9IDA7XG5cdH1cblxuXHRmdW5jdGlvbiBzd29yZEF0dGFjaygpIHtcblx0XHRHYW1lLnNvdW5kLnBsYXlTRlgoJ3NsYXNoJyk7XG5cdFx0c2VsZi5za2luLnBsYXkoJ3N3b3JkQXR0YWNrJysgc3dvcmRBdHRhY2tUeXBlKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGFycm93QXR0YWNrKCkge1xuXHRcdEdhbWUuc291bmQucGxheVNGWCgnc2hvb3QnKTtcblx0XHRzZWxmLnNraW4ucGxheSgnYXJyb3dBdHRhY2snKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHN3b3Jkc1ZzRW5lbWllcygpIHtcblx0XHRpZiAoIXNlbGYuYXR0YWNrSGl0QXJlYS5wYXJlbnQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3QgZW5lbWllcyA9IEdhbWUucm9vdC5lbmVtaWVzO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBlbmVtaWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBlID0gZW5lbWllc1tpXTtcblxuXHRcdFx0Y29uc3QgdGVzdCA9IGhpdFRlc3QoZS5ib2R5LCBzZWxmLmF0dGFja0hpdEFyZWEpO1xuXG5cdFx0XHRpZiAodGVzdC5oaXQpIHtcblx0XHRcdFx0ZS5yZWNlaXZlRGFtYWdlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBmcmFtZU51bWJlclxuXHQgKiBAcmV0dXJucyB7dm9pZH1cblx0ICovXG5cdGZ1bmN0aW9uIHNob3dBdHRhY2sxSGl0QXJlYShmcmFtZU51bWJlcikge1xuXHRcdGNvbnN0IHkgPSBzZWxmLmF0dGFja0hpdEFyZWEueSA9IHNlbGYuYm9keS55IC0gc2VsZi5ib2R5LmhhbGZIZWlnaHQoKSArIDU7XG5cblx0XHRpZiAoZnJhbWVOdW1iZXIgPT09IDEpIHtcblx0XHRcdHNlbGYuc2hvd0F0dGFja0hpdEFyZWEoe1xuXHRcdFx0XHR4OiBzZWxmLmJvZHkueCArIHNlbGYuYXR0YWNrSGl0QXJlYS5oYWxmV2lkdGgoKSAtIDUsXG5cdFx0XHRcdGZsaXBYOiBzZWxmLmJvZHkueCAtIHNlbGYuYXR0YWNrSGl0QXJlYS53aWR0aCxcblx0XHRcdFx0eVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGlmIChmcmFtZU51bWJlciA9PT0gMikge1xuXHRcdFx0c2VsZi5yZW1vdmVBdHRhY2tIaXRBcmVhKCk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24ga2lsbFRpbWVycygpIHtcblx0XHR0aW1lcnMuZm9yRWFjaCh0ID0+IHtcblx0XHRcdEdhbWUudGltZXIua2lsbFdhaXQodCk7XG5cdFx0fSk7XG5cblx0XHR0aW1lcnMubGVuZ3RoID0gMDtcblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0ge1RGbGlwSFNpZGV9IFtzaWRlXVxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG5cdGZ1bmN0aW9uIGlzTW92ZShzaWRlKSB7XG5cdFx0aWYgKHNpZGUpIHtcblx0XHRcdHJldHVybiBHYW1lLmtleS5pc0Rvd24oc2lkZSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIChHYW1lLmtleS5pc0Rvd24oJ3JpZ2h0JykgfHwgR2FtZS5rZXkuaXNEb3duKCdsZWZ0JykpO1xuXHR9XG5cblx0ZnVuY3Rpb24gaXNBdHRhY2soKSB7XG5cdFx0cmV0dXJuICFzZWxmLmF0dGFja2luZyAmJiAoaXNTaG9vdCgpIHx8IGlzU2xhc2goKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBpc1Nob290KCkge1xuXHRcdHJldHVybiBHYW1lLmtleS5pc0Rvd24oJ3Nob290Jyk7XG5cdH1cblxuXHRmdW5jdGlvbiBpc1NsYXNoKCkge1xuXHRcdHJldHVybiBHYW1lLmtleS5pc0Rvd24oJ3NsYXNoJyk7XG5cdH1cblxuXHRmdW5jdGlvbiBpc0p1bXAoKSB7XG5cdFx0cmV0dXJuICFzZWxmLmp1bXBpbmcgJiYgR2FtZS5rZXkuaXNEb3duKCdqdW1wJyk7XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIHtURW5lbXl9IGVuZW15XG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNCZWhpbmRFbmVteShlbmVteSkge1xuXHRcdHJldHVybiBCb29sZWFuKHNlbGYuYm9keS54IDw9IGVuZW15LmJvZHkueCk7XG5cdH1cblxuXHRyZXR1cm4gc2VsZjtcbn1cbiIsICJpbXBvcnQgeyBHcm91cCwgU3ByaXRlIH0gZnJvbSAnQHBhY2thZ2VzL2Rpc3BsYXlPYmplY3RzJztcbmltcG9ydCB7IHJhbmRvbUludCB9IGZyb20gJ0BwYWNrYWdlcy91dGlscy9tYXRoJztcbmltcG9ydCB7IGdldEFuaW1GcmFtZSB9IGZyb20gJ0BwYWNrYWdlcy91dGlscy9taXNjJztcblxuLyoqXG4gKiBAY2FsbGJhY2sgVEJnVXBkYXRlXG4gKiBAcGFyYW0ge1RQbGF5ZXJ9IHBsYXllclxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge1RHcm91cFtdfSB3b3JsZHNcbiAqIEByZXR1cm5zIHt7dXBkYXRlOiBUQmdVcGRhdGV9fVxuICovXG5leHBvcnQgZnVuY3Rpb24gQmFja2dyb3VuZCh3b3JsZHMpIHtcblx0Y29uc3QgYmcyQ29udGFpbmVyID0gR3JvdXAoKTtcblx0Y29uc3QgYmcxQ29udGFpbmVyID0gR3JvdXAoKTtcblx0YmcxQ29udGFpbmVyLm5hbWUgPSAnZmcnO1xuXHRiZzJDb250YWluZXIubmFtZSA9ICdiZyc7XG5cblx0d29ybGRzWzBdLmFkZENoaWxkKGJnMkNvbnRhaW5lcik7XG5cdHdvcmxkc1sxXS5hZGRDaGlsZChiZzFDb250YWluZXIpO1xuXG5cdGNyZWF0ZVRyZWVzKCdiZycsIDUwLCAzLCAyMCwgYmcyQ29udGFpbmVyKTtcblx0Ly8gY3JlYXRlVHJlZXMoJ2ZnJywgNTAsIDIsIDQwLCBiZzFDb250YWluZXIpO1xuXG5cdC8qKlxuXHQgKiBAcGFyYW0geydmZycgfCAnYmcnfSB0eXBlXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB0b3RhbFxuXHQgKiBAcGFyYW0ge251bWJlcn0gcmFuZFxuXHQgKiBAcGFyYW0ge251bWJlcn0geE9mZnNldFxuXHQgKiBAcGFyYW0ge1REaXNwbGF5T2JqZWN0fSBjb250YWluZXJcblx0ICogQHJldHVybnMge3ZvaWR9XG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVUcmVlcyh0eXBlLCB0b3RhbCwgcmFuZCwgeE9mZnNldCwgY29udGFpbmVyKSB7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbDsgaSsrKSB7XG5cdFx0XHRjb25zdCBpbmRleCA9IHJhbmRvbUludCgxLCByYW5kKTtcblx0XHRcdGNvbnN0IHNyYyA9IGdldEFuaW1GcmFtZShgdHJlZS90cmVlJHtpbmRleH1fJHt0eXBlfWApO1xuXHRcdFx0Y29uc3QgdHJlZSA9IFNwcml0ZShzcmMpO1xuXHRcdFx0dHJlZS54ID0gaSAqIHhPZmZzZXQ7XG5cdFx0XHRjb250YWluZXIuYWRkQ2hpbGQodHJlZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEBwYXJhbSB7VERpc3BsYXlPYmplY3R9IGRpc3BsYXlPYmplY3Rcblx0ICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB4XG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB5XG5cdCAqIEByZXR1cm5zIHt2b2lkfVxuXHQgKi9cblx0ZnVuY3Rpb24gdXBkYXRlUG9zaXRpb24oZGlzcGxheU9iamVjdCwgZGlzdGFuY2UsIHgsIHkgKSB7XG5cdFx0ZGlzcGxheU9iamVjdC54ID0geCAvIGRpc3RhbmNlIC0gNTA7XG5cdFx0Ly8gZGlzcGxheU9iamVjdC55ID0geSArIDUyO1xuXHR9XG5cblx0LyoqXG5cdCAqIEB0eXBlIHtUQmdVcGRhdGV9XG5cdCAqL1xuXHRmdW5jdGlvbiB1cGRhdGUocGxheWVyKSB7XG5cdFx0dXBkYXRlUG9zaXRpb24oYmcxQ29udGFpbmVyLCA0LCAtcGxheWVyLmJvZHkueCwgLXBsYXllci5ib2R5LnkpO1xuXHRcdHVwZGF0ZVBvc2l0aW9uKGJnMkNvbnRhaW5lciwgOCwgLXBsYXllci5ib2R5LngsIC1wbGF5ZXIuYm9keS55KTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0dXBkYXRlXG5cdH07XG59XG4iLCAiaW1wb3J0IHsgR3JvdXAsIFNwcml0ZSB9IGZyb20gJ0BwYWNrYWdlcy9kaXNwbGF5T2JqZWN0cyc7XG5pbXBvcnQgeyByYW5kb21JbnQgfSBmcm9tICdAcGFja2FnZXMvdXRpbHMvbWF0aCc7XG5pbXBvcnQgeyBnZXRBbmltRnJhbWUgfSBmcm9tICdAcGFja2FnZXMvdXRpbHMvbWlzYyc7XG5cbi8qKlxuICogQHBhcmFtIHtUR3JvdXB9IHdvcmxkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBHcmFzcyh3b3JsZCkge1xuXHRjb25zdCBncmFzc0NvbnRhaW5lciA9IEdyb3VwKCk7XG5cdGdyYXNzQ29udGFpbmVyLm5hbWUgPSAnZ3Jhc3Nlcyc7XG5cblx0d29ybGQuYWRkQ2hpbGQoZ3Jhc3NDb250YWluZXIpO1xuXG5cdGNyZWF0ZSgpO1xuXG5cdGZ1bmN0aW9uIGNyZWF0ZSgpIHtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IDMwOyBpKyspIHtcblx0XHRcdGNvbnN0IGluZGV4ID0gcmFuZG9tSW50KDEsIDIpO1xuXHRcdFx0Y29uc3Qgc3JjID0gZ2V0QW5pbUZyYW1lKGBncmFzcy9ncmFzcyR7aW5kZXh9YCk7XG5cdFx0XHRjb25zdCBncmFzcyA9IFNwcml0ZShzcmMpO1xuXHRcdFx0Z3Jhc3MueCA9IGkgKiAxNjtcblx0XHRcdGdyYXNzQ29udGFpbmVyLmFkZENoaWxkKGdyYXNzKTtcblx0XHR9XG5cblx0XHRncmFzc0NvbnRhaW5lci55ID0gNjU7XG5cdH1cblxuXHRmdW5jdGlvbiB1cGRhdGUocGxheWVyKSB7XG5cdFx0Z3Jhc3NDb250YWluZXIueCA9IC1wbGF5ZXIuYm9keS54ICsgMTAwO1xuXHRcdGdyYXNzQ29udGFpbmVyLnkgPSAtcGxheWVyLmJvZHkueSArIDEyMDtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0dXBkYXRlXG5cdH07XG59XG4iLCAiaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSAnQHBhY2thZ2VzL2Rpc3BsYXlPYmplY3RzJztcblxuLyoqXG4gKiBAdHlwZSB7RlBsYXRmb3JtfVxuICovXG5leHBvcnQgZnVuY3Rpb24gUGxhdGZvcm1zKHdvcmxkKSB7XG5cdGNvbnN0IHdpZHRoID0gNDY0O1xuXHRjb25zdCBoZWlnaHQgPSAxMjA7XG5cblx0Y29uc3QgZ3JvdW5kID0gUmVjdGFuZ2xlKHdpZHRoLCAyMDAsICdibHVlJywgJycsIDAsIDAsIDgwKTtcblx0Z3JvdW5kLm5hbWUgPSAnZ3JvdW5kJztcblx0Z3JvdW5kLmFscGhhID0gMDtcblxuXHRjb25zdCB3YWxsMSA9IFJlY3RhbmdsZSgxMCwgaGVpZ2h0LCAnYmxhY2snLCAnJywgMCwgMCwgMCk7XG5cdHdhbGwxLm5hbWUgPSAnd2FsbDEnO1xuXHR3YWxsMS5hbHBoYSA9IDE7XG5cblx0Y29uc3Qgd2FsbDJYID0gZ3JvdW5kLnggKyBncm91bmQud2lkdGg7XG5cdGNvbnN0IHdhbGwyID0gUmVjdGFuZ2xlKDEwLCBoZWlnaHQsICdibGFjaycsICcnLCAwLCB3YWxsMlgsIDApO1xuXHR3YWxsMi5uYW1lID0gJ3dhbGwyJztcblx0d2FsbDEuYWxwaGEgPSAxO1xuXG5cdGNvbnN0IGNvbGxpZGVycyA9IFtncm91bmQsIHdhbGwxLCB3YWxsMl07XG5cdGNvbnN0IHdhbGxzID0gW3dhbGwxLCB3YWxsMl07XG5cblx0Y29uc3QgdzEgPSB7XG5cdFx0eDogd2FsbDEueCxcblx0XHRheDogMCxcblx0XHR2eDogMCxcblx0XHRzcGVlZFg6IDJcblx0fTtcblxuXHRjb25zdCB3MiA9IHtcblx0XHR4OiB3YWxsMi54LFxuXHRcdGF4OiAwLFxuXHRcdHZ4OiAwLFxuXHRcdHNwZWVkWDogMlxuXHR9O1xuXG5cdGNvbGxpZGVycy5mb3JFYWNoKGNvbGxpZGVyID0+IHtcblx0XHRjb2xsaWRlci52aXNpYmxlID0gdHJ1ZTtcblx0XHQvLyBjb2xsaWRlci5hbHBoYSA9IDAuNTtcblx0XHR3b3JsZC5hZGRDaGlsZChjb2xsaWRlcik7XG5cdH0pO1xuXG5cdGZ1bmN0aW9uIHJlc2V0V2FsbHNQb3MoKSB7XG5cdFx0d2FsbDEueCA9IGdyb3VuZC54IC0gMTA7XG5cdFx0d2FsbDIueCA9IHdhbGwyWDtcblx0fVxuXG5cdGZ1bmN0aW9uIG1vdmVXYWxscyh3MURpcj0xLCB3MkRpcj0tMSkge1xuXHRcdHcxLnZ4ICs9IHcxLmF4O1xuXHRcdHcyLnZ4ICs9IHcyLmF4O1xuXG5cdFx0dzEueCArPSB3MS52eDtcblx0XHR3Mi54ICs9IHcyLnZ4O1xuXG5cdFx0dzEudnggPSB3MURpciAqIHcxLnNwZWVkWDtcblx0XHR3Mi52eCA9IHcyRGlyICogdzIuc3BlZWRYO1xuXG5cdFx0d2FsbDEueCA9IHcxLng7XG5cdFx0d2FsbDIueCA9IHcyLng7XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdGNvbGxpZGVycyxcblx0XHR3YWxscyxcblx0XHRyZXNldFdhbGxzUG9zLFxuXHRcdG1vdmVXYWxsc1xuXHR9O1xufVxuIiwgIi8qKlxuICogQHR5cGUge0ZTb3VuZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEdhbWVTb3VuZChzb3VuZCkge1xuXHRsZXQgbXVzaWMgPSAwO1xuXG5cdHJldHVybiB7XG5cdFx0cGxheU11c2ljKCkge1xuXHRcdFx0aWYgKG11c2ljICYmIHNvdW5kLnBsYXlpbmcobXVzaWMpKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdG11c2ljID0gc291bmQucGxheSgnbXVzaWMnKTtcblx0XHRcdHNvdW5kLmxvb3AodHJ1ZSwgbXVzaWMpO1xuXHRcdH0sXG5cdFx0cGxheVNGWChuYW1lKSB7XG5cdFx0XHRzb3VuZC5wbGF5KG5hbWUpO1xuXHRcdH0sXG5cdFx0cGF1c2UoZW5hYmxlKSB7XG5cdFx0XHRpZiAoZW5hYmxlICYmIG11c2ljKSB7XG5cdFx0XHRcdHNvdW5kLnBsYXkobXVzaWMpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c291bmQucGF1c2UobXVzaWMpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHR9O1xufVxuIiwgImltcG9ydCB7IGdldERpdkVsZW1lbnRCeUlkIH0gZnJvbSAnQHBhY2thZ2VzL3V0aWxzL21pc2MnO1xuXG5pbXBvcnQgeyBHYW1lIH0gZnJvbSAnLi9HYW1lJztcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gem9vbShpZCkge1xuXHRjb25zdCBkaXYgPSBnZXREaXZFbGVtZW50QnlJZChpZCk7XG5cblx0aWYgKGRpdi5jbGFzc0xpc3QuY29udGFpbnMoJ3pvb20nKSkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGRpdi5jbGFzc0xpc3QuYWRkKCd6b29tJyk7XG5cdEdhbWUudGltZXIud2FpdCh7XG5cdFx0dGltZTogMTAwLCBcblx0XHRvbkNvbXBsZXRlOiAoKSA9PiB7XG5cdFx0XHRkaXYuY2xhc3NMaXN0LnJlbW92ZSgnem9vbScpO1xuXHRcdH1cblx0fSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNoYWtlU2NyZWVuKGlkKSB7XG5cdGNvbnN0IHR5cGUgPSAndi1zaGFrZSc7XG5cdGNvbnN0IGRpdiA9IGdldERpdkVsZW1lbnRCeUlkKGlkKTtcblxuXHRpZiAoZGl2LmNsYXNzTGlzdC5jb250YWlucyh0eXBlKSkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGRpdi5jbGFzc0xpc3QuYWRkKHR5cGUpO1xuXHRHYW1lLnRpbWVyLndhaXQoe1xuXHRcdHRpbWU6IDMwMCxcblx0XHRvbkNvbXBsZXRlOiAoKSA9PiB7XG5cdFx0XHRkaXYuY2xhc3NMaXN0LnJlbW92ZSh0eXBlKTtcblx0XHR9XG5cdH0pO1xufVxuIiwgImltcG9ydCB7IEJvb3QgfSBmcm9tICdAcGFja2FnZXMvYm9vdCc7XG5pbXBvcnQgeyBDYW52YXNMYXllcnMgfSBmcm9tICdAcGFja2FnZXMvY2FudmFzLWxheWVycyc7XG5pbXBvcnQgeyBHcm91cCwgU3RhZ2UgfSBmcm9tICdAcGFja2FnZXMvZGlzcGxheU9iamVjdHMnO1xuaW1wb3J0IHsgS2V5Ym9hcmQgfSBmcm9tICdAcGFja2FnZXMvaW5wdXRzJztcbmltcG9ydCB7IExvYWRlciB9IGZyb20gJ0BwYWNrYWdlcy9sb2FkZXInO1xuaW1wb3J0IHsgcmVuZGVyQ2FudmFzTGF5ZXIgfSBmcm9tICdAcGFja2FnZXMvcmVuZGVyJztcbmltcG9ydCB7IFJlc2l6ZXIgfSBmcm9tICdAcGFja2FnZXMvcmVzaXplcic7XG5pbXBvcnQgeyBUaWNrZXIgfSBmcm9tICdAcGFja2FnZXMvdGlja2VyJztcbmltcG9ydCB7IFRpbWVyIH0gZnJvbSAnQHBhY2thZ2VzL3RpbWVyJztcbmltcG9ydCB7IGdldEFycmF5UmFuZG9tVmFsdWUsIHJhbmRvbUludCB9IGZyb20gJ0BwYWNrYWdlcy91dGlscy9tYXRoJztcbmltcG9ydCB7IGdldERpdkVsZW1lbnRCeUlkIH0gZnJvbSAnQHBhY2thZ2VzL3V0aWxzL21pc2MnO1xuXG5pbXBvcnQgeyBQTEFZRVJfRVZFTlRTIH0gZnJvbSAnLi9FdmVudHMnO1xuaW1wb3J0IHsgR2FtZSB9IGZyb20gJy4vR2FtZSc7XG5pbXBvcnQgeyBFbmVteSB9IGZyb20gJy4vZ2FtZU9iamVjdHMvYWN0b3IvRW5lbXknO1xuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSAnLi9nYW1lT2JqZWN0cy9hY3Rvci9QbGF5ZXInO1xuaW1wb3J0IHsgQmFja2dyb3VuZCB9IGZyb20gJy4vZ2FtZU9iamVjdHMvQmFja2dyb3VuZCc7XG5pbXBvcnQgeyBHcmFzcyB9IGZyb20gJy4vZ2FtZU9iamVjdHMvR3Jhc3MnO1xuaW1wb3J0IHsgUGxhdGZvcm1zIH0gZnJvbSAnLi9nYW1lT2JqZWN0cy9QbGF0Zm9ybXMnO1xuaW1wb3J0IHsgR2FtZVNvdW5kIH0gZnJvbSAnLi9HYW1lU291bmQnO1xuaW1wb3J0IHsgc2hha2VTY3JlZW4sIHpvb20gfSBmcm9tICcuL3V0aWxzJztcblxuLy8gVE9ETzogbWFrZSBhdXRvLXJlc3BvbnNpdmUgb24gZ2FtZSBwYXVzZSByZXN1bWUsIGxpa2UgYW5pbWF0aW9uLCB2ZWxvY2l0eVxuXG5SZXNpemVyKHt3aWR0aDogNDY0LCBoZWlnaHQ6IDEyMH0sIGdldERpdkVsZW1lbnRCeUlkKCdyb290JykpO1xuXG5Cb290KCgpID0+IHtcblx0TG9hZGVyKHtcblx0XHR0cHNKU09ORmlsZXM6IFtcblx0XHRcdCdtZWRpYS9pbWFnZXMvZ2FtZS1pbWFnZXMwLmpzb24nXHRcblx0XHRdLFxuXHRcdHNvdW5kU3ByaXRlOiAnbWVkaWEvc291bmRzL291dC9nYW1lLXNvdW5kcy5qc29uJyxcblx0XHR0aWxlZEZpbGVzOiBbXG5cdFx0XHQnbWVkaWEvdGlsZWQvbGV2ZWwxLmpzb24nXG5cdFx0XSxcblx0XHRvbkxvYWRTb3VuZHM6IChzb3VuZCkgPT4ge1xuXHRcdFx0R2FtZS5zb3VuZCA9IEdhbWVTb3VuZChzb3VuZCk7XG5cdFx0fSxcblx0XHRvbkxvYWRDb21wbGV0ZTogKCkgPT4ge1xuXHRcdFx0Z2V0RGl2RWxlbWVudEJ5SWQoJ2xvYWRlcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0XHRvbmxvYWQoKTtcblx0XHR9XG5cdH0pO1xuXHRHYW1lLnRpbWVyID0gVGltZXIoKTtcblx0R2FtZS5rZXkgPSBLZXlib2FyZCh7IC8vIFRPRE8gcmVmYWN0b3IgS0V5Ym9hcmQgdHlwZXNcblx0XHQnanVtcCc6IHtjb2RlOiAnayd9LFxuXHRcdCdsZWZ0Jzoge2NvZGU6ICdhJ30sXG5cdFx0J3JpZ2h0Jzoge2NvZGU6ICdkJ30sXG5cdFx0J3NsYXNoJzoge2NvZGU6ICdqJ30sXG5cdFx0J3Nob290Jzoge2NvZGU6ICdoJ30sXG5cdFx0J29rJzoge2NvZGU6ICcgJ31cblx0fSk7XG5cdEdhbWUudGlja2VyID0gVGlja2VyKHtcblx0XHRvblZpc2liaWxpdHlDaGFuZ2U6ICh2aXNpYmxlKSA9PiB7XG5cdFx0XHRHYW1lLnRpbWVyLnBhdXNlKERhdGUubm93KCkpO1xuXHRcdFx0aWYgKEdhbWUucm9vdCkge1xuXHRcdFx0XHRHYW1lLnJvb3QucGF1c2VkID0gdmlzaWJsZTsgXG5cdFx0XHR9XG5cdFx0XHRpZiAoR2FtZS5zb3VuZCkge1xuXHRcdFx0XHRHYW1lLnNvdW5kLnBhdXNlKHZpc2libGUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cdEdhbWUubGF5ZXJzID0gQ2FudmFzTGF5ZXJzKCk7XG5cblx0Y29uc3QgZ2FtZURpdiA9IGdldERpdkVsZW1lbnRCeUlkKCdnYW1lJyk7XG5cdGNvbnN0IGdhbWVMYXllciA9IEdhbWUubGF5ZXJzLmFkZCgnZ2FtZS1jYW52YXMnLCA0NjQsIDEyMCk7XG5cblx0Z2FtZURpdi5hcHBlbmRDaGlsZChnYW1lTGF5ZXIuY2FudmFzKTtcblxuXHRmdW5jdGlvbiBvbmxvYWQoKSB7XG5cdFx0Y29uc3QgdG90YWxBcnJvd3MgPSAxMDtcblx0XHRsZXQgc2NvcmUgPSAwO1xuXHRcdGxldCBhcnJvd3MgPSAwO1xuXHRcdGxldCBnYW1lU3RhcnRlZCA9IGZhbHNlO1xuXHRcdGxldCBnYW1lT3ZlciA9IGZhbHNlO1xuXHRcdGxldCBzdGFnZSA9IFN0YWdlKDQ2NCwgMTIwKTtcblxuXHRcdC8vIGNyZWF0ZSBhIGdyb3VwIHdvcmxkIHdoaWNoIHJlLWNhbGN1bGF0ZXMgdGhlIHNpemUgYmFzZWQgb24gaXRzIGNoaWxkcmVuc1xuXHRcdC8vIGFuZCBhZGQgZXZlcnl0aGluZyBpbiBpdCBpbnN0ZWFkIG9mIGFwcC5zdGFnZS5cblx0XHRsZXQgd29ybGQgPSBHcm91cCgpO1xuXHRcdGxldCBwbGF5ZXJHcm91cCA9IEdyb3VwKCk7XG5cdFx0bGV0IGVuZW1pZXNHcm91cCA9IEdyb3VwKCk7XG5cblx0XHRzdGFnZS5hZGRDaGlsZCh3b3JsZCk7XG5cblx0XHRjb25zdCBiYWNrZ3JvdW5kID0gQmFja2dyb3VuZChbd29ybGQsIHdvcmxkXSk7XG5cdFx0Y29uc3QgZ3Jhc3MgPSBHcmFzcyh3b3JsZCk7XG5cblx0XHR3b3JsZC5hZGRDaGlsZChlbmVtaWVzR3JvdXApO1xuXHRcdHdvcmxkLmFkZENoaWxkKHBsYXllckdyb3VwKTtcblxuXHRcdGNvbnN0IHBsYXRmb3JtcyA9IFBsYXRmb3Jtcyh3b3JsZCk7XG5cdFx0LyoqXG5cdFx0ICogQHR5cGUge1RQbGF5ZXIgfCBudWxsfVxuXHRcdCAqL1xuXHRcdGxldCBwbGF5ZXIgPSBudWxsO1xuXG5cdFx0LyoqXG5cdFx0ICogQHR5cGUge1RFbmVteVtdfVxuXHRcdCAqL1xuXHRcdGxldCBlbmVtaWVzID0gW107XG5cblx0XHQvKipcblx0XHQgKiBAdHlwZSB7bnVtYmVyW119XG5cdFx0ICovXG5cdFx0bGV0IGVuZW15U3Bhd250aW1lcnMgPSBbXTtcblx0XHRsZXQgZW5lbWllc0luRWFjaFdhdmVzID0gWzAsIDUsIDEwLCAxMCwgOCwgNV07IC8vIGFsd2F5cyBzdGFydCB3aXRoIFswXSA9IDAgPT4gbm8td2F2ZSwgZm9yIHF1aWNrICYgZWFzeSBjb21wYXJpc29uXG5cdFx0bGV0IHRvdGFsS2lsbHNJbkVhY2hXYXZlcyA9IGVuZW1pZXNJbkVhY2hXYXZlcy5tYXAoKCkgPT4gMCk7XG5cdFx0bGV0IGlzTW92ZVdhbGxzID0gZmFsc2U7XG5cblx0XHRkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uRG93biwgZmFsc2UpO1xuXG5cdFx0R2FtZS50aWNrZXIuYWRkKCd1cGRhdGUnLCB1cGRhdGUuYmluZCh0aGlzKSk7XG5cdFx0R2FtZS50aWNrZXIuYWRkKCdyZW5kZXInLCByZW5kZXIuYmluZCh0aGlzKSk7XG5cblx0XHRHYW1lLnJvb3QgPSB7XG5cdFx0XHR3YXZlOiAwLFxuXHRcdFx0cGF1c2VkOiBmYWxzZSxcblx0XHRcdHdvcmxkLFxuXHRcdFx0d2FsbHM6IHBsYXRmb3Jtcy53YWxscyxcblx0XHRcdHBsYXRmb3JtczogcGxhdGZvcm1zLmNvbGxpZGVycyxcblx0XHRcdHBsYXllckdyb3VwLFxuXHRcdFx0ZW5lbWllc0dyb3VwLFxuXHRcdFx0ZW5lbWllcyxcblx0XHRcdGdhbWVPdmVyOiAoKSA9PiB7XG5cdFx0XHRcdHJldHVybiBnYW1lT3Zlcjtcblx0XHRcdH0sXG5cdFx0XHRnYW1lU3RhcnRlZDogKCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gZ2FtZVN0YXJ0ZWQ7XG5cdFx0XHR9LFxuXHRcdFx0YXJyb3dzOiAoKSA9PiB7XG5cdFx0XHRcdHJldHVybiBhcnJvd3M7XG5cdFx0XHR9LFxuXHRcdFx0c2NvcmU6ICgpID0+IHtcblx0XHRcdFx0cmV0dXJuIHNjb3JlO1xuXHRcdFx0fSxcblx0XHRcdHNldEdhbWVPdmVyOiAob3ZlcikgPT4ge1xuXHRcdFx0XHRnYW1lT3ZlciA9IG92ZXI7XG5cdFx0XHRcdGRpc3BsYXlHYW1lT3ZlcigpO1xuXHRcdFx0XHRraWxsRW5lbXlTcGF3blRpbWVycygpO1xuXHRcdFx0fSxcblx0XHRcdHNldFNjb3JlOiAodmFsdWUsIHJlcGxhY2UpID0+IHtcblx0XHRcdFx0Y29uc3QgdWkgPSBnZXREaXZFbGVtZW50QnlJZCgnc2NvcmUnKTtcblx0XHRcdFx0c2NvcmUgPSByZXBsYWNlID8gdmFsdWUgOiBzY29yZSArIHZhbHVlO1xuXHRcdFx0XHR1aS5pbm5lckhUTUwgPSAna2lsbHM6ICcgKyBzY29yZTtcblx0XHRcdFx0em9vbSgnc2NvcmUnKTtcblxuXHRcdFx0XHRpZiAoIXZhbHVlKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKEdhbWUucm9vdC53YXZlID49IGVuZW1pZXNJbkVhY2hXYXZlcy5sZW5ndGgtMSkge1xuXG5cdFx0XHRcdFx0R2FtZS50aW1lci53YWl0KHtcblx0XHRcdFx0XHRcdHRpbWU6IDMwMDAsXG5cdFx0XHRcdFx0XHRvbkNvbXBsZXRlOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGdhbWVPdmVyID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0ZGlzcGxheUdhbWVXaW4oKTtcblx0XHRcdFx0XHRcdFx0a2lsbEVuZW15U3Bhd25UaW1lcnMoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHVwZGF0ZUtpbGxzKCk7XG5cdFx0XHRcdGNvbnN0IGlzVXBncmFkZVdhdmUgPSBlbmVtaWVzSW5FYWNoV2F2ZXNbR2FtZS5yb290LndhdmVdID09PSB0b3RhbEtpbGxzSW5FYWNoV2F2ZXNbR2FtZS5yb290LndhdmVdO1xuXG5cdFx0XHRcdGlmIChpc1VwZ3JhZGVXYXZlKSB7XG5cdFx0XHRcdFx0bW92ZVdhbGxzKCk7XG5cdFx0XHRcdFx0dXBncmFkZVdhdmVzKCk7XG5cdFx0XHRcdFx0aW5pdFNwYXduRW5lbWllcygpO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0sXG5cdFx0XHRzZXRIZWFsdGg6ICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRjb25zdCB1aSA9IGdldERpdkVsZW1lbnRCeUlkKCdoZWFsdGgtdGV4dCcpO1xuXHRcdFx0XHR1aS5pbm5lckhUTUwgPSAneCAnICsgdmFsdWU7XG5cdFx0XHRcdHpvb20oJ2hlYWx0aC1pdGVtJyk7XG5cdFx0XHR9LFxuXHRcdFx0c2V0QXJyb3dzOiAodmFsdWUsIHJlcGxhY2UpID0+IHtcblx0XHRcdFx0Y29uc3QgdWkgPSBnZXREaXZFbGVtZW50QnlJZCgnYXJyb3dzLXRleHQnKTtcblx0XHRcdFx0bGV0IG5ld0Fycm93cyA9IGFycm93cyArIHZhbHVlO1xuXG5cdFx0XHRcdGlmIChuZXdBcnJvd3MgPj0gdG90YWxBcnJvd3MpIHtcblx0XHRcdFx0XHRuZXdBcnJvd3MgPSB0b3RhbEFycm93cztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGFycm93cyA9IHJlcGxhY2UgPyB2YWx1ZSA6IG5ld0Fycm93cztcblx0XHRcdFx0dWkuaW5uZXJIVE1MID0gJ3ggJyArIGFycm93cztcblx0XHRcdFx0em9vbSgnYXJyb3dzLWl0ZW0nKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0R2FtZS5lbWl0dGVyLm9uKFBMQVlFUl9FVkVOVFMuRU5UUllfTEFOREVELCAoKSA9PiB7XG5cdFx0XHRzaGFrZVNjcmVlbignZ2FtZScpO1xuXHRcdH0pO1xuXG5cdFx0cmVzZXQoKTtcblxuXHRcdC8vIGNvbnN0IGNhbWVyYSA9IENhbWVyYShbd29ybGRdLCBnYW1lTGF5ZXIuY2FudmFzKTtcblxuXHRcdGZ1bmN0aW9uIHVwZGF0ZUtpbGxzKCkge1xuXHRcdFx0Y29uc3Qgd2F2ZSA9IEdhbWUucm9vdC53YXZlO1xuXHRcdFx0dG90YWxLaWxsc0luRWFjaFdhdmVzW3dhdmVdID0gdG90YWxLaWxsc0luRWFjaFdhdmVzW3dhdmVdICsgMTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiB1cGdyYWRlV2F2ZXModGltZT0zMDAwKSB7XG5cdFx0XHRHYW1lLnJvb3Qud2F2ZSArPSAxO1xuXG5cdFx0XHRjb25zdCB3YXZlc0RpdiA9IGdldERpdkVsZW1lbnRCeUlkKCd3YXZlcycpO1xuXHRcdFx0d2F2ZXNEaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdFx0XHR3YXZlc0Rpdi5pbm5lckhUTUwgPSAnd2F2ZSAnICsgR2FtZS5yb290LndhdmU7XG5cblx0XHRcdEdhbWUudGltZXIud2FpdCh7XG5cdFx0XHRcdHRpbWUsXG5cdFx0XHRcdG9uQ29tcGxldGU6ICgpID0+IHtcblx0XHRcdFx0XHR3YXZlc0Rpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBpbml0V2F2ZXMoKSB7XG5cdFx0XHRHYW1lLnRpbWVyLndhaXQoe1xuXHRcdFx0XHR0aW1lOiAxMDAwLFxuXHRcdFx0XHRvbkNvbXBsZXRlOiAoKSA9PiB7XG5cdFx0XHRcdFx0dXBncmFkZVdhdmVzKCk7XG5cdFx0XHRcdFx0aW5pdFNwYXduRW5lbWllcygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cblxuXHRcdC8qKlxuXHRcdCAqIEBwYXJhbSB7bnVtYmVyfSBbdGltZV1cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBoaWRlSGVscCh0aW1lPTgwMDApIHtcblx0XHRcdEdhbWUudGltZXIud2FpdCh7XG5cdFx0XHRcdHRpbWUsXG5cdFx0XHRcdG9uQ29tcGxldGU6ICgpPT4ge1xuXHRcdFx0XHRcdGdldERpdkVsZW1lbnRCeUlkKCdib3R0b20tYmFyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZGlzcGxheUdhbWVPdmVyKCkge1xuXHRcdFx0Z2V0RGl2RWxlbWVudEJ5SWQoJ2dhbWUtb3ZlcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXHRcdFx0Y29uc3QgdGl0bGUgPSBnZXREaXZFbGVtZW50QnlJZCgnZ28tdGl0bGUnKTtcblx0XHRcdHRpdGxlLmlubmVySFRNTCA9ICdHYW1lIE92ZXInO1xuXHRcdFx0aGlkZUhlbHAoMCk7XG5cblx0XHRcdGNvbnN0IHNjb3JlVUkgPSBnZXREaXZFbGVtZW50QnlJZCgnZ28tc2NvcmUnKTtcblx0XHRcdHNjb3JlVUkuaW5uZXJIVE1MID0gJ2tpbGxzOiAnICsgc2NvcmU7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZGlzcGxheUdhbWVXaW4oKSB7XG5cdFx0XHRjb25zdCBvdmVyRGl2ID0gZ2V0RGl2RWxlbWVudEJ5SWQoJ2dhbWUtb3ZlcicpO1xuXHRcdFx0b3ZlckRpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuXHRcdFx0Y29uc3QgdGl0bGUgPSBnZXREaXZFbGVtZW50QnlJZCgnZ28tdGl0bGUnKTtcblx0XHRcdHRpdGxlLmlubmVySFRNTCA9ICdZb3UgV2luISc7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gb25Eb3duKCkge1xuXHRcdFx0aWYgKCFnYW1lU3RhcnRlZCkge1xuXHRcdFx0XHRnZXREaXZFbGVtZW50QnlJZCgnaW50cm8nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdFx0XHRoaWRlSGVscCgpO1xuXHRcdFx0XHRpbml0V2F2ZXMoKTtcblx0XHRcdFx0R2FtZS5zb3VuZC5wbGF5TXVzaWMoKTtcblx0XHRcdFx0Z2FtZVN0YXJ0ZWQgPSB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZ2FtZU92ZXIpIHtcblx0XHRcdFx0ZGVzdHJveUFsbCgpO1xuXHRcdFx0XHRyZXNldCgpO1xuXHRcdFx0XHRpbml0V2F2ZXMoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiByZXNldCgpIHtcblx0XHRcdGdldERpdkVsZW1lbnRCeUlkKCdnYW1lLW92ZXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdFx0Z2FtZU92ZXIgPSBmYWxzZTtcblx0XHRcdEdhbWUucm9vdC5zZXRBcnJvd3ModG90YWxBcnJvd3MsIHRydWUpO1xuXHRcdFx0R2FtZS5yb290LnNldFNjb3JlKDAsIHRydWUpO1xuXHRcdFx0cGxheWVyID0gUGxheWVyKCk7XG5cdFx0XHRHYW1lLnJvb3QucGxheWVyID0gcGxheWVyOyBcblx0XHRcdEdhbWUucm9vdC53YXZlID0gMDtcblx0XHRcdHRvdGFsS2lsbHNJbkVhY2hXYXZlcyA9IHRvdGFsS2lsbHNJbkVhY2hXYXZlcy5tYXAoKCkgPT4gMCk7XG5cdFx0XHRpc01vdmVXYWxscyA9IGZhbHNlO1xuXHRcdFx0cGxhdGZvcm1zLnJlc2V0V2FsbHNQb3MoKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBpbml0U3Bhd25FbmVtaWVzKHRpbWU9MjAwMCkge1xuXHRcdFx0R2FtZS50aW1lci53YWl0KHtcblx0XHRcdFx0dGltZSxcblx0XHRcdFx0b25Db21wbGV0ZTogKCkgPT4ge1xuXHRcdFx0XHRcdHNwYXduRW5lbWllcygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzcGF3bkVuZW1pZXMoKSB7XG5cdFx0XHRjb25zdCB3YWxscyA9IHBsYXRmb3Jtcy53YWxscztcblx0XHRcdGNvbnN0IHB0MSA9IHdhbGxzWzBdLnggKyB3YWxsc1swXS53aWR0aDtcblx0XHRcdGNvbnN0IHB0MiA9IHdhbGxzWzFdLnggLSB3YWxsc1sxXS53aWR0aDtcblx0XHRcdGNvbnN0IHkxID0gMDtcblx0XHRcdGNvbnN0IHkyID0gd2FsbHNbMF0uaGFsZkhlaWdodCgpO1xuXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGVuZW1pZXNJbkVhY2hXYXZlc1tHYW1lLnJvb3Qud2F2ZV07IGkrKykge1xuXHRcdFx0XHRjb25zdCByYW5kVGltZSA9IHJhbmRvbUludCgxMDAwLCA0MDAwKTtcblxuXHRcdFx0XHRjb25zdCB0ID0gR2FtZS50aW1lci53YWl0KHtcblx0XHRcdFx0XHR0aW1lOiByYW5kVGltZSAqIGksXG5cdFx0XHRcdFx0b25Db21wbGV0ZTogKCkgPT4ge1xuXHRcdFx0XHRcdFx0c3Bhd25FbmVteShpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRlbmVteVNwYXdudGltZXJzLnB1c2godCk7XG5cdFx0XHR9XG5cblx0XHRcdC8qKlxuXHRcdFx0ICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG5cdFx0XHQgKi9cblx0XHRcdGZ1bmN0aW9uIHNwYXduRW5lbXkoaW5kZXgpIHtcblx0XHRcdFx0Y29uc3QgeCA9IGdldEFycmF5UmFuZG9tVmFsdWUoW3B0MSwgcHQyXSk7XG5cdFx0XHRcdGNvbnN0IHkgPSBnZXRBcnJheVJhbmRvbVZhbHVlKFt5MSwgeTJdKTtcblx0XHRcdFx0LyoqXG5cdFx0XHRcdCAqIEB0eXBlIHtURW5lbXlUeXBlc31cblx0XHRcdFx0ICovXG5cdFx0XHRcdGNvbnN0IGVUeXBlID0gZ2V0QXJyYXlSYW5kb21WYWx1ZShbJ2UxJywgJ2UyJywgJ2UzJ10pO1xuXHRcdFx0XHQvKipcblx0XHRcdFx0ICogQHR5cGUge1RFbmVteU5hdHVyZX1cblx0XHRcdFx0ICovXG5cdFx0XHRcdGNvbnN0IGVOYXR1cmUgPSBnZXRBcnJheVJhbmRvbVZhbHVlKFsnYXR0YWNrZXInLCAnbm9uZSddKTtcblxuXHRcdFx0XHRjb25zdCBlID0gRW5lbXkoeyBlbmVteVR5cGU6IGVUeXBlLCBlbmVteU5hdHVyZTogZU5hdHVyZSB9KTtcblx0XHRcdFx0ZS5uYW1lID0gZS5uYW1lICsgaW5kZXg7XG5cdFx0XHRcdGUuYm9keS54ID0geDtcblx0XHRcdFx0ZS5ib2R5LnkgPSB5O1xuXHRcdFx0XHRpZiAoeCA9PT0gcHQyKSB7XG5cdFx0XHRcdFx0ZS5mbGlwKCdsZWZ0Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRlbmVtaWVzLnB1c2goZSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gbW92ZVdhbGxzKCkge1xuXHRcdFx0aWYgKGlzTW92ZVdhbGxzKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aXNNb3ZlV2FsbHMgPSB0cnVlO1xuXG5cdFx0XHRHYW1lLnRpbWVyLndhaXQoe1xuXHRcdFx0XHR0aW1lOiAzMDAsXG5cdFx0XHRcdG9uQ29tcGxldGU6ICgpID0+IHtcblx0XHRcdFx0XHRpc01vdmVXYWxscyA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBraWxsRW5lbXlTcGF3blRpbWVycygpIHtcblx0XHRcdGVuZW15U3Bhd250aW1lcnMuZm9yRWFjaCh0ID0+IHtcblx0XHRcdFx0R2FtZS50aW1lci5raWxsV2FpdCh0KTtcblx0XHRcdH0pO1xuXHRcdFx0ZW5lbXlTcGF3bnRpbWVycy5sZW5ndGggPSAwO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGRlc3Ryb3lBbGwoKSB7XG5cdFx0XHRpZiAocGxheWVyKSB7XG5cdFx0XHRcdHBsYXllci5kZXN0cm95KCk7XG5cdFx0XHRcdHBsYXllciA9IG51bGw7XG5cdFx0XHR9XG5cdFx0XHRlbmVtaWVzLmZvckVhY2goZSA9PiB7XG5cdFx0XHRcdGUuZGVzdHJveSgpO1xuXHRcdFx0fSk7XG5cdFx0XHRlbmVtaWVzLmxlbmd0aCA9IDA7XG5cdFx0XHRraWxsRW5lbXlTcGF3blRpbWVycygpO1xuXHRcdFx0R2FtZS50aW1lci5raWxsKCk7XG5cblx0XHRcdHBsYXllckdyb3VwLmNoaWxkcmVuLmZvckVhY2goZSA9PiB7XG5cdFx0XHRcdGUuZGVzdHJveSgpO1xuXHRcdFx0fSk7XG5cblx0XHRcdGVuZW1pZXNHcm91cC5jaGlsZHJlbi5mb3JFYWNoKGUgPT4ge1xuXHRcdFx0XHRlLmRlc3Ryb3koKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEB0eXBlIHtGVGlja2VyVXBkYXRlfVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIHVwZGF0ZShkdCkge1xuXHRcdFx0R2FtZS50aW1lci51cGRhdGUoKTtcblxuXHRcdFx0aWYgKCFnYW1lU3RhcnRlZCB8fCBnYW1lT3Zlcikge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRpZiAocGxheWVyKSB7XG5cdFx0XHRcdHBsYXllci51cGRhdGUoKTtcblx0XHRcdFx0YmFja2dyb3VuZC51cGRhdGUocGxheWVyKTtcblx0XHRcdFx0Ly8gZ3Jhc3MudXBkYXRlKHBsYXllcik7XG5cdFx0XHRcdC8vIGNhbWVyYS5jZW50ZXJPdmVyKHBsYXllci5ib2R5KTtcblx0XHRcdH1cblx0XHRcdGVuZW1pZXMuZm9yRWFjaCgoZW5lbXksIGkpID0+IHtcblx0XHRcdFx0aWYgKGVuZW15LmRlc3Ryb3llZCkge1xuXHRcdFx0XHRcdGVuZW1pZXMuc3BsaWNlKGksIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVuZW15LnVwZGF0ZSgpO1xuXHRcdFx0fSk7XG5cblx0XHRcdGlmIChpc01vdmVXYWxscykge1xuXHRcdFx0XHRwbGF0Zm9ybXMubW92ZVdhbGxzKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQHR5cGUge0ZUaWNrZXJSZW5kZXJ9XG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gcmVuZGVyKGR0KSB7XG5cdFx0XHRyZW5kZXJDYW52YXNMYXllcihnYW1lTGF5ZXIsIHN0YWdlLCBkdCk7XG5cdFx0fVxuXG5cdH1cbn0pO1xuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQVVBLEtBQUMsV0FBVztBQUVWO0FBU0EsVUFBSUEsZ0JBQWUsV0FBVztBQUM1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YUFBUyxhQUFhO0FBQ3JCLFVBQUksUUFBUTtBQUNYLGVBQU8sUUFBUTtBQUNmLGlCQUFTO0FBQUEsTUFDVjtBQUNBLGNBQVEsUUFBUSxPQUFLO0FBQ3BCLFVBQUUsUUFBUTtBQUFBLE1BQ1gsQ0FBQztBQUNELGNBQVEsU0FBUztBQUNqQiwyQkFBcUI7QUFDckIsV0FBSyxNQUFNLEtBQUs7QUFFaEIsa0JBQVksU0FBUyxRQUFRLE9BQUs7QUFDakMsVUFBRSxRQUFRO0FBQUEsTUFDWCxDQUFDO0FBRUQsbUJBQWEsU0FBUyxRQUFRLE9BQUs7QUFDbEMsVUFBRSxRQUFRO0FBQUEsTUFDWCxDQUFDO0FBQUEsSUFDRjtBQUtBLGFBQVMsT0FBTyxJQUFJO0FBQ25CLFdBQUssTUFBTSxPQUFPO0FBRWxCLFVBQUksQ0FBQyxlQUFlLFVBQVU7QUFDN0I7QUFBQSxNQUNEO0FBQ0EsVUFBSSxRQUFRO0FBQ1gsZUFBTyxPQUFPO0FBQ2QsbUJBQVcsT0FBTyxNQUFNO0FBQUEsTUFHekI7QUFDQSxjQUFRLFFBQVEsQ0FBQyxPQUFPLE1BQU07QUFDN0IsWUFBSSxNQUFNLFdBQVc7QUFDcEIsa0JBQVEsT0FBTyxHQUFHLENBQUM7QUFBQSxRQUNwQjtBQUNBLGNBQU0sT0FBTztBQUFBLE1BQ2QsQ0FBQztBQUVELFVBQUksYUFBYTtBQUNoQixrQkFBVSxVQUFVO0FBQUEsTUFDckI7QUFBQSxJQUNEO0FBS0EsYUFBUyxPQUFPLElBQUk7QUFDbkIsd0JBQWtCLFdBQVcsT0FBTyxFQUFFO0FBQUEsSUFDdkM7QUFBQSxFQUVEO0FBQ0QsQ0FBQzsiLAogICJuYW1lcyI6IFsiSG93bGVyR2xvYmFsIiwgIkhvd2xlciIsICJlIiwgImkiLCAiSG93bCIsICJTb3VuZCIsICJFdmVudEVtaXR0ZXIiLCAiZGlzdGFuY2UiLCAiaGFsZkRpbWVuc2lvbiIsICJzcmMiLCAic3JjIiwgImlzRG93biIsICJ0aW1lIiwgIkV2ZW50RW1pdHRlciIsICJpc0F0dGFjayIsICJkaXN0YW5jZSJdCn0K
